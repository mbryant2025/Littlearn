# Littlearn Interpreter Syntax

## Introduction

The Littlearn interpreter is a simple interpreter for the custom [RickScript OR C-] language. It is written in C++ and handles the parsing and execution of the language. It is designed specifically for the Littlearn project and is to be run on a microcontroller. It can also be compiled on a computer for testing purposes. The language can control the I/O of the microcontroller and can be used to create simple programs.

The language is procedural and is strongly typed.

## Sample programs

To get a feel for the language, here are some sample programs written using the language.


First, this program will print the Finonacci numbers less than 100. The code syntax is intentionally very similar to that of C.

```c
{ //Whole program is wrapped in a block
        
    //Print the Fibonacci numbers from 0 to 100
    int first = 0;
    int second = 1;
    int next = 0;

    while (second < 100) {
        print(second);
        next = first + second;
        first = second;
        second = next;
        wait(500); //Wait half a second between printing each number

    }

} //End of block
```

Here is another example for the Collatz Conjecture.
This program will print the Collatz sequence for the number 343. The Collatz Conjecture states that for any positive integer n, the sequence will eventually reach 1. The sequence is generated by the following rules:

- If n is even, divide it by 2
- If n is odd, multiply it by 3 and add 1

```c
{
    int n = 343; // Starting number
    int count = 0;
    print(n);
    while (n > 1) {
        count = count + 1;
        if (n % 2) {
            n = n / 2;
        }
        else {
            n = 3 * n;
            n = n + 1;
        }
        print(n); // Print the current number
        wait(50); // Wait 50 milliseconds between printing 
    }
    print(count); // Print the number of steps
}
```

## Syntax

Snake case is recomended but not required. The language is case sensitive.

### Control flow

The language supports the following control flow statements:

- `if` statements

```c
if (condition) {
    // code
}
```

- `if-else` statements

```c
if (condition) {
    // code
} else {
    // code
}
```

- `if-else if-else` statements

```c
if (condition) {
    // code
} else if (condition) {
    // code
} else if (condition) {
    // code
// ...
} else {
    // code
}
```

- `while` loops

```c
while (condition) {
    // code
}
```

- `for` loops

```c
for (int i = 0; i < 10; i = i + 1) {
    // code
}
```

- `break` statements

```c
while (condition) {
    // code
    break;
}
```

- `continue` statements

```c
while (condition) {
    // code
    continue;
}
```

  


### Variables

Variables can be declared and assigned to using the following syntax:

```c
int a = 5;
```

The following types are supported:

- `int` - 32 bit signed integer

```c
int a = 5;
```

- `float` - 32 bit floating point number

```c
float a = 5.0;
```

Note: there is no boolean type. Instead, 0 is false and any other value is true.

### Functions

Functions can be declared and called using the following syntax:

```c
int add(int a, int b) {
    return a + b;
}

int c = add(5, 10);
```

Functions can also be declared without a return type. In this case, the function will return nothing.

```c
void print_hello() {
    print("Hello");
}

print_hello();
```

In this case, a `return` statement is not required. If a `return` statement is used, the function will return early.

```c
void print_hello() {
    print("Hello");
    return;
    print("World"); //This will not be executed
}

print_hello();
```

Functions are ran in their own scope. This means that variables declared in a function are not accessible outside of the function and vice versa. For example:

```c
int a = 5; //Outer scope

void print_a() {
    print(a); //Invalid
    int a = 10; //Inner scope
    print(a); //Valid -- prints 10
}

```


### Built-in functions

The language supports the following built-in functions:

- `wait` - waits for a specified number of milliseconds

```c
wait(1000); //Wait 1 second (1000 milliseconds)
```

- `print` - prints a value to stdout or Bluetooth console (depending on `__embedded__`), with a newline

```c
print(3.14 + 10);
```

Output:
```
13.14
```

- `rand` - generates a random float between 0 and 1 

```c
float a = rand(); // For example, 0.840188
```

- `float_to_int` - converts a float to an int

```c
int a = float_to_int(3.14); // a is 3
```

- `int_to_float` - converts an int to a float

```c
float a = int_to_float(3); // a is 3.0
```

- `pow` - raises a number to a power

```c
float a = pow(2, 3); // a is 8
```

Planned built-in functions:

- `sqrt` - takes the square root of a number

```c
float a = sqrt(4); // a is 2
```

- `sin` - takes the sine of a number (in radians)

```c
float a = sin(3.14); // a is 0.00159265
```

- `cos` - takes the cosine of a number (in radians)

```c
float a = cos(3.14); // a is -0.999999
```

- `tan` - takes the tangent of a number (in radians)

```c
float a = tan(3.14); // a is -0.00159265
```

- `asin` - takes the inverse sine of a number (in radians)

```c
float a = asin(0.5); // a is 0.523599
``` 

- `acos` - takes the inverse cosine of a number (in radians)

```c
float a = acos(0.5); // a is 1.0472
```

- `atan` - takes the inverse tangent of a number (in radians)

```c
float a = atan(0.5); // a is 0.463648
```

- `atan2` - takes the inverse tangent of a number (in radians)

```c
float a = atan2(0.5, 0.5); // a is 0.785398
```

- `abs` - takes the absolute value of a number

```c
float a = abs(-5); // a is 5
```

- `min` - takes the minimum of two numbers

```c
float a = min(5, 10); // a is 5
```

- `max` - takes the maximum of two numbers

```c
float a = max(5, 10); // a is 10
```

- `floor` - rounds a number down

```c
float a = floor(5.5); // a is 5
```

- `ceil` - rounds a number up

```c
float a = ceil(5.5); // a is 6
```

- `log` - takes the natural logarithm of a number

```c
float a = log(5); // a is 1.60944
```

- `log10` - takes the base 10 logarithm of a number

```c
float a = log10(5); // a is 0.69897
```



## Variable Scoping

Variables are scoped to the block they are declared in. Inner blocks can access variables declared in outer blocks, but not vice versa. For example:

```c
int a = 5; //Outer block

if(a){
    int b = 10; //Inner block
    print(a); //Valid
    if(b){
        print(a); //Valid
        print(b); //Valid
    }

}

if(a){
    float b = 10.5; //Inner block
    print(b); //Valid -- prints 10.5
}

print(b); //Invalid
```

The entire program is to be wrapped in a block. For example:

```c
{
    //Program code
}
```

This block then represents the global scope. Variables declared in this block are accessible from anywhere in the program.

The exception to this rule is how functions are handled. Functions are ran in their own scope. This means that variables declared in a function are not accessible outside of the function and vice versa.



## Expressions

The language supports the following binary operators in any syntax where an expression is expected (e.g. variable assignment, if statements, print statement, etc.):

- `+` - addition

```c
int a = 5 + 10;
```

- `-` - subtraction

```c
int a = 25 - 10;
```

- `*` - multiplication

```c
int a = 5 * 10;
```

- `/` - division

```c
float a = 5 / 7;
```


- `>` - greater than

```c
int a = 5 > 10; //a is 0
```

- `<` - less than

```c
int a = 5 < 10; //a is 1
```

- `%` - modulo

```c
int a = 5 % 2; //a is 1
```

- `==` - equal to

```c
int a = 5 == 10; //a is 0
```

- `!=` - not equal to

```c
int a = 5 != 10; //a is 1
```

- `>=` - greater than or equal to

```c
int a = 5 >= 10; //a is 0
```

- `<=` - less than or equal to

```c
int a = 5 <= 10; //a is 1
```

- `&&` - logical and

```c
int a = 5 && 10; //a is 1
```

- `||` - logical or

```c
int a = 5 || 10; //a is 1
```




The language also supports chained expressions. For example:

```c
int a = 5 + 10 + 15;
int b = -5 + 10 * 15 / (a + 14) * read_port(1 * x + 314 / (a + 14));
```


## Comments

Comments are supported using the `//` syntax. They do not impact program behavior. For example:

```c
//This is a comment
int a = 5; //This is also a comment
```
