{"ast":null,"code":"/**\n * exception-handler.js: Object for handling uncaughtException events.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nvar os = require('os');\nvar asyncForEach = require('async/forEach');\nvar debug = require('@dabh/diagnostics')('winston:rejection');\nvar once = require('one-time');\nvar stackTrace = require('stack-trace');\nvar ExceptionStream = require('./exception-stream');\n\n/**\n * Object for handling unhandledRejection events.\n * @type {RejectionHandler}\n */\nmodule.exports = /*#__PURE__*/function () {\n  /**\n   * TODO: add contructor description\n   * @param {!Logger} logger - TODO: add param description\n   */\n  function RejectionHandler(logger) {\n    _classCallCheck(this, RejectionHandler);\n    if (!logger) {\n      throw new Error('Logger is required to handle rejections');\n    }\n    this.logger = logger;\n    this.handlers = new Map();\n  }\n\n  /**\n   * Handles `unhandledRejection` events for the current process by adding any\n   * handlers passed in.\n   * @returns {undefined}\n   */\n  _createClass(RejectionHandler, [{\n    key: \"handle\",\n    value: function handle() {\n      var _this = this;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      args.forEach(function (arg) {\n        if (Array.isArray(arg)) {\n          return arg.forEach(function (handler) {\n            return _this._addHandler(handler);\n          });\n        }\n        _this._addHandler(arg);\n      });\n      if (!this.catcher) {\n        this.catcher = this._unhandledRejection.bind(this);\n        process.on('unhandledRejection', this.catcher);\n      }\n    }\n\n    /**\n     * Removes any handlers to `unhandledRejection` events for the current\n     * process. This does not modify the state of the `this.handlers` set.\n     * @returns {undefined}\n     */\n  }, {\n    key: \"unhandle\",\n    value: function unhandle() {\n      var _this2 = this;\n      if (this.catcher) {\n        process.removeListener('unhandledRejection', this.catcher);\n        this.catcher = false;\n        Array.from(this.handlers.values()).forEach(function (wrapper) {\n          return _this2.logger.unpipe(wrapper);\n        });\n      }\n    }\n\n    /**\n     * TODO: add method description\n     * @param {Error} err - Error to get information about.\n     * @returns {mixed} - TODO: add return description.\n     */\n  }, {\n    key: \"getAllInfo\",\n    value: function getAllInfo(err) {\n      var message = null;\n      if (err) {\n        message = typeof err === 'string' ? err : err.message;\n      }\n      return {\n        error: err,\n        // TODO (indexzero): how do we configure this?\n        level: 'error',\n        message: [\"unhandledRejection: \".concat(message || '(no error message)'), err && err.stack || '  No stack trace'].join('\\n'),\n        stack: err && err.stack,\n        exception: true,\n        date: new Date().toString(),\n        process: this.getProcessInfo(),\n        os: this.getOsInfo(),\n        trace: this.getTrace(err)\n      };\n    }\n\n    /**\n     * Gets all relevant process information for the currently running process.\n     * @returns {mixed} - TODO: add return description.\n     */\n  }, {\n    key: \"getProcessInfo\",\n    value: function getProcessInfo() {\n      return {\n        pid: process.pid,\n        uid: process.getuid ? process.getuid() : null,\n        gid: process.getgid ? process.getgid() : null,\n        cwd: process.cwd(),\n        execPath: process.execPath,\n        version: process.version,\n        argv: process.argv,\n        memoryUsage: process.memoryUsage()\n      };\n    }\n\n    /**\n     * Gets all relevant OS information for the currently running process.\n     * @returns {mixed} - TODO: add return description.\n     */\n  }, {\n    key: \"getOsInfo\",\n    value: function getOsInfo() {\n      return {\n        loadavg: os.loadavg(),\n        uptime: os.uptime()\n      };\n    }\n\n    /**\n     * Gets a stack trace for the specified error.\n     * @param {mixed} err - TODO: add param description.\n     * @returns {mixed} - TODO: add return description.\n     */\n  }, {\n    key: \"getTrace\",\n    value: function getTrace(err) {\n      var trace = err ? stackTrace.parse(err) : stackTrace.get();\n      return trace.map(function (site) {\n        return {\n          column: site.getColumnNumber(),\n          file: site.getFileName(),\n          \"function\": site.getFunctionName(),\n          line: site.getLineNumber(),\n          method: site.getMethodName(),\n          \"native\": site.isNative()\n        };\n      });\n    }\n\n    /**\n     * Helper method to add a transport as an exception handler.\n     * @param {Transport} handler - The transport to add as an exception handler.\n     * @returns {void}\n     */\n  }, {\n    key: \"_addHandler\",\n    value: function _addHandler(handler) {\n      if (!this.handlers.has(handler)) {\n        handler.handleRejections = true;\n        var wrapper = new ExceptionStream(handler);\n        this.handlers.set(handler, wrapper);\n        this.logger.pipe(wrapper);\n      }\n    }\n\n    /**\n     * Logs all relevant information around the `err` and exits the current\n     * process.\n     * @param {Error} err - Error to handle\n     * @returns {mixed} - TODO: add return description.\n     * @private\n     */\n  }, {\n    key: \"_unhandledRejection\",\n    value: function _unhandledRejection(err) {\n      var info = this.getAllInfo(err);\n      var handlers = this._getRejectionHandlers();\n      // Calculate if we should exit on this error\n      var doExit = typeof this.logger.exitOnError === 'function' ? this.logger.exitOnError(err) : this.logger.exitOnError;\n      var timeout;\n      if (!handlers.length && doExit) {\n        // eslint-disable-next-line no-console\n        console.warn('winston: exitOnError cannot be true with no rejection handlers.');\n        // eslint-disable-next-line no-console\n        console.warn('winston: not exiting process.');\n        doExit = false;\n      }\n      function gracefulExit() {\n        debug('doExit', doExit);\n        debug('process._exiting', process._exiting);\n        if (doExit && !process._exiting) {\n          // Remark: Currently ignoring any rejections from transports when\n          // catching unhandled rejections.\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n          // eslint-disable-next-line no-process-exit\n          process.exit(1);\n        }\n      }\n      if (!handlers || handlers.length === 0) {\n        return process.nextTick(gracefulExit);\n      }\n\n      // Log to all transports attempting to listen for when they are completed.\n      asyncForEach(handlers, function (handler, next) {\n        var done = once(next);\n        var transport = handler.transport || handler;\n\n        // Debug wrapping so that we can inspect what's going on under the covers.\n        function onDone(event) {\n          return function () {\n            debug(event);\n            done();\n          };\n        }\n        transport._ending = true;\n        transport.once('finish', onDone('finished'));\n        transport.once('error', onDone('error'));\n      }, function () {\n        return doExit && gracefulExit();\n      });\n      this.logger.log(info);\n\n      // If exitOnError is true, then only allow the logging of exceptions to\n      // take up to `3000ms`.\n      if (doExit) {\n        timeout = setTimeout(gracefulExit, 3000);\n      }\n    }\n\n    /**\n     * Returns the list of transports and exceptionHandlers for this instance.\n     * @returns {Array} - List of transports and exceptionHandlers for this\n     * instance.\n     * @private\n     */\n  }, {\n    key: \"_getRejectionHandlers\",\n    value: function _getRejectionHandlers() {\n      // Remark (indexzero): since `logger.transports` returns all of the pipes\n      // from the _readableState of the stream we actually get the join of the\n      // explicit handlers and the implicit transports with\n      // `handleRejections: true`\n      return this.logger.transports.filter(function (wrap) {\n        var transport = wrap.transport || wrap;\n        return transport.handleRejections;\n      });\n    }\n  }]);\n  return RejectionHandler;\n}();","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","os","require","asyncForEach","debug","once","stackTrace","ExceptionStream","module","exports","RejectionHandler","logger","Error","handlers","Map","value","handle","_this","_len","arguments","args","Array","_key","forEach","isArray","handler","_addHandler","catcher","_unhandledRejection","bind","process","on","unhandle","_this2","removeListener","from","values","wrapper","unpipe","getAllInfo","err","message","error","level","concat","stack","join","exception","date","Date","toString","getProcessInfo","getOsInfo","trace","getTrace","pid","uid","getuid","gid","getgid","cwd","execPath","version","argv","memoryUsage","loadavg","uptime","parse","get","map","site","column","getColumnNumber","file","getFileName","getFunctionName","line","getLineNumber","method","getMethodName","isNative","has","handleRejections","set","pipe","info","_getRejectionHandlers","doExit","exitOnError","timeout","console","warn","gracefulExit","_exiting","clearTimeout","exit","nextTick","next","done","transport","onDone","event","_ending","log","setTimeout","transports","filter","wrap"],"sources":["/Users/michaelbryant/node_modules/winston/dist/winston/rejection-handler.js"],"sourcesContent":["/**\n * exception-handler.js: Object for handling uncaughtException events.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar os = require('os');\nvar asyncForEach = require('async/forEach');\nvar debug = require('@dabh/diagnostics')('winston:rejection');\nvar once = require('one-time');\nvar stackTrace = require('stack-trace');\nvar ExceptionStream = require('./exception-stream');\n\n/**\n * Object for handling unhandledRejection events.\n * @type {RejectionHandler}\n */\nmodule.exports = /*#__PURE__*/function () {\n  /**\n   * TODO: add contructor description\n   * @param {!Logger} logger - TODO: add param description\n   */\n  function RejectionHandler(logger) {\n    _classCallCheck(this, RejectionHandler);\n    if (!logger) {\n      throw new Error('Logger is required to handle rejections');\n    }\n    this.logger = logger;\n    this.handlers = new Map();\n  }\n\n  /**\n   * Handles `unhandledRejection` events for the current process by adding any\n   * handlers passed in.\n   * @returns {undefined}\n   */\n  _createClass(RejectionHandler, [{\n    key: \"handle\",\n    value: function handle() {\n      var _this = this;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      args.forEach(function (arg) {\n        if (Array.isArray(arg)) {\n          return arg.forEach(function (handler) {\n            return _this._addHandler(handler);\n          });\n        }\n        _this._addHandler(arg);\n      });\n      if (!this.catcher) {\n        this.catcher = this._unhandledRejection.bind(this);\n        process.on('unhandledRejection', this.catcher);\n      }\n    }\n\n    /**\n     * Removes any handlers to `unhandledRejection` events for the current\n     * process. This does not modify the state of the `this.handlers` set.\n     * @returns {undefined}\n     */\n  }, {\n    key: \"unhandle\",\n    value: function unhandle() {\n      var _this2 = this;\n      if (this.catcher) {\n        process.removeListener('unhandledRejection', this.catcher);\n        this.catcher = false;\n        Array.from(this.handlers.values()).forEach(function (wrapper) {\n          return _this2.logger.unpipe(wrapper);\n        });\n      }\n    }\n\n    /**\n     * TODO: add method description\n     * @param {Error} err - Error to get information about.\n     * @returns {mixed} - TODO: add return description.\n     */\n  }, {\n    key: \"getAllInfo\",\n    value: function getAllInfo(err) {\n      var message = null;\n      if (err) {\n        message = typeof err === 'string' ? err : err.message;\n      }\n      return {\n        error: err,\n        // TODO (indexzero): how do we configure this?\n        level: 'error',\n        message: [\"unhandledRejection: \".concat(message || '(no error message)'), err && err.stack || '  No stack trace'].join('\\n'),\n        stack: err && err.stack,\n        exception: true,\n        date: new Date().toString(),\n        process: this.getProcessInfo(),\n        os: this.getOsInfo(),\n        trace: this.getTrace(err)\n      };\n    }\n\n    /**\n     * Gets all relevant process information for the currently running process.\n     * @returns {mixed} - TODO: add return description.\n     */\n  }, {\n    key: \"getProcessInfo\",\n    value: function getProcessInfo() {\n      return {\n        pid: process.pid,\n        uid: process.getuid ? process.getuid() : null,\n        gid: process.getgid ? process.getgid() : null,\n        cwd: process.cwd(),\n        execPath: process.execPath,\n        version: process.version,\n        argv: process.argv,\n        memoryUsage: process.memoryUsage()\n      };\n    }\n\n    /**\n     * Gets all relevant OS information for the currently running process.\n     * @returns {mixed} - TODO: add return description.\n     */\n  }, {\n    key: \"getOsInfo\",\n    value: function getOsInfo() {\n      return {\n        loadavg: os.loadavg(),\n        uptime: os.uptime()\n      };\n    }\n\n    /**\n     * Gets a stack trace for the specified error.\n     * @param {mixed} err - TODO: add param description.\n     * @returns {mixed} - TODO: add return description.\n     */\n  }, {\n    key: \"getTrace\",\n    value: function getTrace(err) {\n      var trace = err ? stackTrace.parse(err) : stackTrace.get();\n      return trace.map(function (site) {\n        return {\n          column: site.getColumnNumber(),\n          file: site.getFileName(),\n          \"function\": site.getFunctionName(),\n          line: site.getLineNumber(),\n          method: site.getMethodName(),\n          \"native\": site.isNative()\n        };\n      });\n    }\n\n    /**\n     * Helper method to add a transport as an exception handler.\n     * @param {Transport} handler - The transport to add as an exception handler.\n     * @returns {void}\n     */\n  }, {\n    key: \"_addHandler\",\n    value: function _addHandler(handler) {\n      if (!this.handlers.has(handler)) {\n        handler.handleRejections = true;\n        var wrapper = new ExceptionStream(handler);\n        this.handlers.set(handler, wrapper);\n        this.logger.pipe(wrapper);\n      }\n    }\n\n    /**\n     * Logs all relevant information around the `err` and exits the current\n     * process.\n     * @param {Error} err - Error to handle\n     * @returns {mixed} - TODO: add return description.\n     * @private\n     */\n  }, {\n    key: \"_unhandledRejection\",\n    value: function _unhandledRejection(err) {\n      var info = this.getAllInfo(err);\n      var handlers = this._getRejectionHandlers();\n      // Calculate if we should exit on this error\n      var doExit = typeof this.logger.exitOnError === 'function' ? this.logger.exitOnError(err) : this.logger.exitOnError;\n      var timeout;\n      if (!handlers.length && doExit) {\n        // eslint-disable-next-line no-console\n        console.warn('winston: exitOnError cannot be true with no rejection handlers.');\n        // eslint-disable-next-line no-console\n        console.warn('winston: not exiting process.');\n        doExit = false;\n      }\n      function gracefulExit() {\n        debug('doExit', doExit);\n        debug('process._exiting', process._exiting);\n        if (doExit && !process._exiting) {\n          // Remark: Currently ignoring any rejections from transports when\n          // catching unhandled rejections.\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n          // eslint-disable-next-line no-process-exit\n          process.exit(1);\n        }\n      }\n      if (!handlers || handlers.length === 0) {\n        return process.nextTick(gracefulExit);\n      }\n\n      // Log to all transports attempting to listen for when they are completed.\n      asyncForEach(handlers, function (handler, next) {\n        var done = once(next);\n        var transport = handler.transport || handler;\n\n        // Debug wrapping so that we can inspect what's going on under the covers.\n        function onDone(event) {\n          return function () {\n            debug(event);\n            done();\n          };\n        }\n        transport._ending = true;\n        transport.once('finish', onDone('finished'));\n        transport.once('error', onDone('error'));\n      }, function () {\n        return doExit && gracefulExit();\n      });\n      this.logger.log(info);\n\n      // If exitOnError is true, then only allow the logging of exceptions to\n      // take up to `3000ms`.\n      if (doExit) {\n        timeout = setTimeout(gracefulExit, 3000);\n      }\n    }\n\n    /**\n     * Returns the list of transports and exceptionHandlers for this instance.\n     * @returns {Array} - List of transports and exceptionHandlers for this\n     * instance.\n     * @private\n     */\n  }, {\n    key: \"_getRejectionHandlers\",\n    value: function _getRejectionHandlers() {\n      // Remark (indexzero): since `logger.transports` returns all of the pipes\n      // from the _readableState of the stream we actually get the join of the\n      // explicit handlers and the implicit transports with\n      // `handleRejections: true`\n      return this.logger.transports.filter(function (wrap) {\n        var transport = wrap.transport || wrap;\n        return transport.handleRejections;\n      });\n    }\n  }]);\n  return RejectionHandler;\n}();"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}