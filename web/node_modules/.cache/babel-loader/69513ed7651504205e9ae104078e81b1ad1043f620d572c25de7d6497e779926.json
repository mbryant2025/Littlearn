{"ast":null,"code":"// Do not edit this file; automatically generated.\n\n/* eslint-disable */\n;\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([\"./blockly_compressed.js\"], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require(\"./blockly_compressed.js\"));\n  } else {\n    // Script\n    root.Blockly.libraryBlocks = factory(root.Blockly);\n  }\n})(this, function (__parent__) {\n  var $ = __parent__.__namespace__;\n  var blocks$$module$build$src$blocks$variables_dynamic = $.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{\n      type: \"variables_get_dynamic\",\n      message0: \"%1\",\n      args0: [{\n        type: \"field_variable\",\n        name: \"VAR\",\n        variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n      }],\n      output: null,\n      style: \"variable_dynamic_blocks\",\n      helpUrl: \"%{BKY_VARIABLES_GET_HELPURL}\",\n      tooltip: \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n      extensions: [\"contextMenu_variableDynamicSetterGetter\"]\n    }, {\n      type: \"variables_set_dynamic\",\n      message0: \"%{BKY_VARIABLES_SET}\",\n      args0: [{\n        type: \"field_variable\",\n        name: \"VAR\",\n        variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n      }, {\n        type: \"input_value\",\n        name: \"VALUE\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"variable_dynamic_blocks\",\n      tooltip: \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n      helpUrl: \"%{BKY_VARIABLES_SET_HELPURL}\",\n      extensions: [\"contextMenu_variableDynamicSetterGetter\"]\n    }]),\n    CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN$$module$build$src$blocks$variables_dynamic = {\n      customContextMenu: function customContextMenu(a) {\n        if (!this.isInFlyout) {\n          if (\"variables_get_dynamic\" === this.type) {\n            var b = \"variables_set_dynamic\";\n            var c = $.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;\n          } else b = \"variables_get_dynamic\", c = $.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;\n          var d = this.getField(\"VAR\");\n          b = {\n            type: b,\n            fields: {\n              VAR: d.saveState(!0)\n            }\n          };\n          a.push({\n            enabled: 0 < this.workspace.remainingCapacity(),\n            text: c.replace(\"%1\", d.getText()),\n            callback: $.callbackFactory$$module$build$src$core$contextmenu(this, b)\n          });\n        } else if (\"variables_get_dynamic\" === this.type || \"variables_get_reporter_dynamic\" === this.type) c = {\n          text: $.Msg$$module$build$src$core$msg.RENAME_VARIABLE,\n          enabled: !0,\n          callback: renameOptionCallbackFactory$$module$build$src$blocks$variables_dynamic(this)\n        }, d = this.getField(\"VAR\").getText(), d = {\n          text: $.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace(\"%1\", d),\n          enabled: !0,\n          callback: deleteOptionCallbackFactory$$module$build$src$blocks$variables_dynamic(this)\n        }, a.unshift(c), a.unshift(d);\n      },\n      onchange: function onchange(a) {\n        a = this.getFieldValue(\"VAR\");\n        a = $.getVariable$$module$build$src$core$variables(this.workspace, a);\n        \"variables_get_dynamic\" === this.type ? this.outputConnection.setCheck(a.type) : this.getInput(\"VALUE\").connection.setCheck(a.type);\n      }\n    },\n    renameOptionCallbackFactory$$module$build$src$blocks$variables_dynamic = function renameOptionCallbackFactory$$module$build$src$blocks$variables_dynamic(a) {\n      return function () {\n        var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n        $.renameVariable$$module$build$src$core$variables(b, c);\n      };\n    },\n    deleteOptionCallbackFactory$$module$build$src$blocks$variables_dynamic = function deleteOptionCallbackFactory$$module$build$src$blocks$variables_dynamic(a) {\n      return function () {\n        var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n        b.deleteVariableById(c.getId());\n        b.refreshToolboxSelection();\n      };\n    };\n  $.registerMixin$$module$build$src$core$extensions(\"contextMenu_variableDynamicSetterGetter\", CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN$$module$build$src$blocks$variables_dynamic);\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$variables_dynamic);\n  var module$build$src$blocks$variables_dynamic = {\n    blocks: blocks$$module$build$src$blocks$variables_dynamic\n  };\n  var blocks$$module$build$src$blocks$variables = $.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{\n      type: \"variables_get\",\n      message0: \"%1\",\n      args0: [{\n        type: \"field_variable\",\n        name: \"VAR\",\n        variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n      }],\n      output: null,\n      style: \"variable_blocks\",\n      helpUrl: \"%{BKY_VARIABLES_GET_HELPURL}\",\n      tooltip: \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n      extensions: [\"contextMenu_variableSetterGetter\"]\n    }, {\n      type: \"variables_set\",\n      message0: \"%{BKY_VARIABLES_SET}\",\n      args0: [{\n        type: \"field_variable\",\n        name: \"VAR\",\n        variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n      }, {\n        type: \"input_value\",\n        name: \"VALUE\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"variable_blocks\",\n      tooltip: \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n      helpUrl: \"%{BKY_VARIABLES_SET_HELPURL}\",\n      extensions: [\"contextMenu_variableSetterGetter\"]\n    }]),\n    CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN$$module$build$src$blocks$variables = {\n      customContextMenu: function customContextMenu(a) {\n        if (!this.isInFlyout) {\n          if (\"variables_get\" === this.type) {\n            var b = \"variables_set\";\n            var c = $.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;\n          } else b = \"variables_get\", c = $.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;\n          var d = this.getField(\"VAR\");\n          b = {\n            type: b,\n            fields: {\n              VAR: d.saveState(!0)\n            }\n          };\n          a.push({\n            enabled: 0 < this.workspace.remainingCapacity(),\n            text: c.replace(\"%1\", d.getText()),\n            callback: $.callbackFactory$$module$build$src$core$contextmenu(this, b)\n          });\n        } else if (\"variables_get\" === this.type || \"variables_get_reporter\" === this.type) c = {\n          text: $.Msg$$module$build$src$core$msg.RENAME_VARIABLE,\n          enabled: !0,\n          callback: renameOptionCallbackFactory$$module$build$src$blocks$variables(this)\n        }, d = this.getField(\"VAR\").getText(), d = {\n          text: $.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace(\"%1\", d),\n          enabled: !0,\n          callback: deleteOptionCallbackFactory$$module$build$src$blocks$variables(this)\n        }, a.unshift(c), a.unshift(d);\n      }\n    },\n    renameOptionCallbackFactory$$module$build$src$blocks$variables = function renameOptionCallbackFactory$$module$build$src$blocks$variables(a) {\n      return function () {\n        var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n        $.renameVariable$$module$build$src$core$variables(b, c);\n      };\n    },\n    deleteOptionCallbackFactory$$module$build$src$blocks$variables = function deleteOptionCallbackFactory$$module$build$src$blocks$variables(a) {\n      return function () {\n        var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n        b.deleteVariableById(c.getId());\n        b.refreshToolboxSelection();\n      };\n    };\n  $.registerMixin$$module$build$src$core$extensions(\"contextMenu_variableSetterGetter\", CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN$$module$build$src$blocks$variables);\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$variables);\n  var module$build$src$blocks$variables = {\n    blocks: blocks$$module$build$src$blocks$variables\n  };\n  var blocks$$module$build$src$blocks$text = $.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{\n      type: \"text\",\n      message0: \"%1\",\n      args0: [{\n        type: \"field_input\",\n        name: \"TEXT\",\n        text: \"\"\n      }],\n      output: \"String\",\n      style: \"text_blocks\",\n      helpUrl: \"%{BKY_TEXT_TEXT_HELPURL}\",\n      tooltip: \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n      extensions: [\"text_quotes\", \"parent_tooltip_when_inline\"]\n    }, {\n      type: \"text_multiline\",\n      message0: \"%1 %2\",\n      args0: [{\n        type: \"field_image\",\n        src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=\",\n        width: 12,\n        height: 17,\n        alt: \"\\xB6\"\n      }, {\n        type: \"field_multilinetext\",\n        name: \"TEXT\",\n        text: \"\"\n      }],\n      output: \"String\",\n      style: \"text_blocks\",\n      helpUrl: \"%{BKY_TEXT_TEXT_HELPURL}\",\n      tooltip: \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n      extensions: [\"parent_tooltip_when_inline\"]\n    }, {\n      type: \"text_join\",\n      message0: \"\",\n      output: \"String\",\n      style: \"text_blocks\",\n      helpUrl: \"%{BKY_TEXT_JOIN_HELPURL}\",\n      tooltip: \"%{BKY_TEXT_JOIN_TOOLTIP}\",\n      mutator: \"text_join_mutator\"\n    }, {\n      type: \"text_create_join_container\",\n      message0: \"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2\",\n      args0: [{\n        type: \"input_dummy\"\n      }, {\n        type: \"input_statement\",\n        name: \"STACK\"\n      }],\n      style: \"text_blocks\",\n      tooltip: \"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}\",\n      enableContextMenu: !1\n    }, {\n      type: \"text_create_join_item\",\n      message0: \"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}\",\n      previousStatement: null,\n      nextStatement: null,\n      style: \"text_blocks\",\n      tooltip: \"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}\",\n      enableContextMenu: !1\n    }, {\n      type: \"text_append\",\n      message0: \"%{BKY_TEXT_APPEND_TITLE}\",\n      args0: [{\n        type: \"field_variable\",\n        name: \"VAR\",\n        variable: \"%{BKY_TEXT_APPEND_VARIABLE}\"\n      }, {\n        type: \"input_value\",\n        name: \"TEXT\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"text_blocks\",\n      extensions: [\"text_append_tooltip\"]\n    }, {\n      type: \"text_length\",\n      message0: \"%{BKY_TEXT_LENGTH_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: [\"String\", \"Array\"]\n      }],\n      output: \"Number\",\n      style: \"text_blocks\",\n      tooltip: \"%{BKY_TEXT_LENGTH_TOOLTIP}\",\n      helpUrl: \"%{BKY_TEXT_LENGTH_HELPURL}\"\n    }, {\n      type: \"text_isEmpty\",\n      message0: \"%{BKY_TEXT_ISEMPTY_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: [\"String\", \"Array\"]\n      }],\n      output: \"Boolean\",\n      style: \"text_blocks\",\n      tooltip: \"%{BKY_TEXT_ISEMPTY_TOOLTIP}\",\n      helpUrl: \"%{BKY_TEXT_ISEMPTY_HELPURL}\"\n    }, {\n      type: \"text_indexOf\",\n      message0: \"%{BKY_TEXT_INDEXOF_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: \"String\"\n      }, {\n        type: \"field_dropdown\",\n        name: \"END\",\n        options: [[\"%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}\", \"FIRST\"], [\"%{BKY_TEXT_INDEXOF_OPERATOR_LAST}\", \"LAST\"]]\n      }, {\n        type: \"input_value\",\n        name: \"FIND\",\n        check: \"String\"\n      }],\n      output: \"Number\",\n      style: \"text_blocks\",\n      helpUrl: \"%{BKY_TEXT_INDEXOF_HELPURL}\",\n      inputsInline: !0,\n      extensions: [\"text_indexOf_tooltip\"]\n    }, {\n      type: \"text_charAt\",\n      message0: \"%{BKY_TEXT_CHARAT_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: \"String\"\n      }, {\n        type: \"field_dropdown\",\n        name: \"WHERE\",\n        options: [[\"%{BKY_TEXT_CHARAT_FROM_START}\", \"FROM_START\"], [\"%{BKY_TEXT_CHARAT_FROM_END}\", \"FROM_END\"], [\"%{BKY_TEXT_CHARAT_FIRST}\", \"FIRST\"], [\"%{BKY_TEXT_CHARAT_LAST}\", \"LAST\"], [\"%{BKY_TEXT_CHARAT_RANDOM}\", \"RANDOM\"]]\n      }],\n      output: \"String\",\n      style: \"text_blocks\",\n      helpUrl: \"%{BKY_TEXT_CHARAT_HELPURL}\",\n      inputsInline: !0,\n      mutator: \"text_charAt_mutator\"\n    }]),\n    GET_SUBSTRING_BLOCK$$module$build$src$blocks$text = {\n      init: function init() {\n        this.WHERE_OPTIONS_1 = [[$.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START, \"FROM_START\"], [$.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END, \"FROM_END\"], [$.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST, \"FIRST\"]];\n        this.WHERE_OPTIONS_2 = [[$.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START, \"FROM_START\"], [$.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END, \"FROM_END\"], [$.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST, \"LAST\"]];\n        this.setHelpUrl($.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL);\n        this.setStyle(\"text_blocks\");\n        this.appendValueInput(\"STRING\").setCheck(\"String\").appendField($.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);\n        this.appendDummyInput(\"AT1\");\n        this.appendDummyInput(\"AT2\");\n        $.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL && this.appendDummyInput(\"TAIL\").appendField($.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL);\n        this.setInputsInline(!0);\n        this.setOutput(!0, \"String\");\n        this.updateAt_(1, !0);\n        this.updateAt_(2, !0);\n        this.setTooltip($.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP);\n      },\n      mutationToDom: function mutationToDom() {\n        var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n        var b = this.getInput(\"AT1\") instanceof $.ValueInput$$module$build$src$core$inputs$value_input;\n        a.setAttribute(\"at1\", \"\".concat(b));\n        b = this.getInput(\"AT2\") instanceof $.ValueInput$$module$build$src$core$inputs$value_input;\n        a.setAttribute(\"at2\", \"\".concat(b));\n        return a;\n      },\n      domToMutation: function domToMutation(a) {\n        var b = \"true\" === a.getAttribute(\"at1\");\n        a = \"true\" === a.getAttribute(\"at2\");\n        this.updateAt_(1, b);\n        this.updateAt_(2, a);\n      },\n      updateAt_: function updateAt_(a, b) {\n        this.removeInput(\"AT\" + a);\n        this.removeInput(\"ORDINAL\" + a, !0);\n        b ? (this.appendValueInput(\"AT\" + a).setCheck(\"Number\"), $.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\" + a).appendField($.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\" + a);\n        2 === a && $.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL && (this.removeInput(\"TAIL\", !0), this.appendDummyInput(\"TAIL\").appendField($.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));\n        var c = $.fromJson$$module$build$src$core$field_registry({\n          type: \"field_dropdown\",\n          options: this[\"WHERE_OPTIONS_\" + a]\n        });\n        c.setValidator(function (d) {\n          var e = \"FROM_START\" === d || \"FROM_END\" === d;\n          if (e !== b) {\n            var f = this.getSourceBlock();\n            f.updateAt_(a, e);\n            f.setFieldValue(d, \"WHERE\" + a);\n            return null;\n          }\n        });\n        this.getInput(\"AT\" + a).appendField(c, \"WHERE\" + a);\n        1 === a && (this.moveInputBefore(\"AT1\", \"AT2\"), this.getInput(\"ORDINAL1\") && this.moveInputBefore(\"ORDINAL1\", \"AT2\"));\n      }\n    };\n  blocks$$module$build$src$blocks$text.text_getSubstring = GET_SUBSTRING_BLOCK$$module$build$src$blocks$text;\n  blocks$$module$build$src$blocks$text.text_changeCase = {\n    init: function init() {\n      var a = [[$.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE, \"UPPERCASE\"], [$.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE, \"LOWERCASE\"], [$.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE, \"TITLECASE\"]];\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"TEXT\").setCheck(\"String\").appendField($.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: a\n      }), \"CASE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip($.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP);\n    }\n  };\n  blocks$$module$build$src$blocks$text.text_trim = {\n    init: function init() {\n      var a = [[$.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH, \"BOTH\"], [$.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT, \"LEFT\"], [$.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT, \"RIGHT\"]];\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"TEXT\").setCheck(\"String\").appendField($.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: a\n      }), \"MODE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip($.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP);\n    }\n  };\n  blocks$$module$build$src$blocks$text.text_print = {\n    init: function init() {\n      this.jsonInit({\n        message0: $.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,\n        args0: [{\n          type: \"input_value\",\n          name: \"TEXT\"\n        }],\n        previousStatement: null,\n        nextStatement: null,\n        style: \"text_blocks\",\n        tooltip: $.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,\n        helpUrl: $.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL\n      });\n    }\n  };\n  var PROMPT_COMMON$$module$build$src$blocks$text = {\n    updateType_: function updateType_(a) {\n      this.outputConnection.setCheck(\"NUMBER\" === a ? \"Number\" : \"String\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n      a.setAttribute(\"type\", this.getFieldValue(\"TYPE\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"type\"));\n    }\n  };\n  blocks$$module$build$src$blocks$text.text_prompt_ext = Object.assign({}, PROMPT_COMMON$$module$build$src$blocks$text, {\n    init: function init() {\n      var _this = this;\n      var a = [[$.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT, \"TEXT\"], [$.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER, \"NUMBER\"]];\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL);\n      this.setStyle(\"text_blocks\");\n      a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: a\n      });\n      a.setValidator(function (b) {\n        _this.updateType_(b);\n      });\n      this.appendValueInput(\"TEXT\").appendField(a, \"TYPE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(function () {\n        return \"TEXT\" === _this.getFieldValue(\"TYPE\") ? $.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT : $.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER;\n      });\n    }\n  });\n  var TEXT_PROMPT_BLOCK$$module$build$src$blocks$text = Object.assign({}, PROMPT_COMMON$$module$build$src$blocks$text, {\n    init: function init() {\n      var _this2 = this;\n      this.mixin(QUOTE_IMAGE_MIXIN$$module$build$src$blocks$text);\n      var a = [[$.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT, \"TEXT\"], [$.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER, \"NUMBER\"]];\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL);\n      this.setStyle(\"text_blocks\");\n      a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: a\n      });\n      a.setValidator(function (b) {\n        _this2.updateType_(b);\n      });\n      this.appendDummyInput().appendField(a, \"TYPE\").appendField(this.newQuote_(!0)).appendField($.fromJson$$module$build$src$core$field_registry({\n        type: \"field_input\",\n        text: \"\"\n      }), \"TEXT\").appendField(this.newQuote_(!1));\n      this.setOutput(!0, \"String\");\n      this.setTooltip(function () {\n        return \"TEXT\" === _this2.getFieldValue(\"TYPE\") ? $.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT : $.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER;\n      });\n    }\n  });\n  blocks$$module$build$src$blocks$text.text_prompt = TEXT_PROMPT_BLOCK$$module$build$src$blocks$text;\n  blocks$$module$build$src$blocks$text.text_count = {\n    init: function init() {\n      this.jsonInit({\n        message0: $.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"SUB\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"Number\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: $.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,\n        helpUrl: $.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL\n      });\n    }\n  };\n  blocks$$module$build$src$blocks$text.text_replace = {\n    init: function init() {\n      this.jsonInit({\n        message0: $.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"FROM\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TO\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"String\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: $.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,\n        helpUrl: $.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL\n      });\n    }\n  };\n  blocks$$module$build$src$blocks$text.text_reverse = {\n    init: function init() {\n      this.jsonInit({\n        message0: $.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"String\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: $.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,\n        helpUrl: $.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL\n      });\n    }\n  };\n  var QUOTE_IMAGE_MIXIN$$module$build$src$blocks$text = {\n      QUOTE_IMAGE_LEFT_DATAURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC\",\n      QUOTE_IMAGE_RIGHT_DATAURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==\",\n      QUOTE_IMAGE_WIDTH: 12,\n      QUOTE_IMAGE_HEIGHT: 12,\n      quoteField_: function quoteField_(a) {\n        for (var b = 0, c; c = this.inputList[b]; b++) for (var d = 0, e; e = c.fieldRow[d]; d++) if (a === e.name) {\n          c.insertFieldAt(d, this.newQuote_(!0));\n          c.insertFieldAt(d + 2, this.newQuote_(!1));\n          return;\n        }\n        console.warn('field named \"' + a + '\" not found in ' + this.toDevString());\n      },\n      newQuote_: function newQuote_(a) {\n        a = this.RTL ? !a : a;\n        return $.fromJson$$module$build$src$core$field_registry({\n          type: \"field_image\",\n          src: a ? this.QUOTE_IMAGE_LEFT_DATAURI : this.QUOTE_IMAGE_RIGHT_DATAURI,\n          width: this.QUOTE_IMAGE_WIDTH,\n          height: this.QUOTE_IMAGE_HEIGHT,\n          alt: a ? \"\\u201C\" : \"\\u201D\"\n        });\n      }\n    },\n    QUOTES_EXTENSION$$module$build$src$blocks$text = function QUOTES_EXTENSION$$module$build$src$blocks$text() {\n      this.mixin(QUOTE_IMAGE_MIXIN$$module$build$src$blocks$text);\n      this.quoteField_(\"TEXT\");\n    },\n    JOIN_MUTATOR_MIXIN$$module$build$src$blocks$text = {\n      itemCount_: 0,\n      mutationToDom: function mutationToDom() {\n        var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n        a.setAttribute(\"items\", \"\".concat(this.itemCount_));\n        return a;\n      },\n      domToMutation: function domToMutation(a) {\n        this.itemCount_ = parseInt(a.getAttribute(\"items\"), 10);\n        this.updateShape_();\n      },\n      saveExtraState: function saveExtraState() {\n        return {\n          itemCount: this.itemCount_\n        };\n      },\n      loadExtraState: function loadExtraState(a) {\n        this.itemCount_ = a.itemCount;\n        this.updateShape_();\n      },\n      decompose: function decompose(a) {\n        var b = a.newBlock(\"text_create_join_container\");\n        b.initSvg();\n        var c = b.getInput(\"STACK\").connection;\n        for (var d = 0; d < this.itemCount_; d++) {\n          var e = a.newBlock(\"text_create_join_item\");\n          e.initSvg();\n          c.connect(e.previousConnection);\n          c = e.nextConnection;\n        }\n        return b;\n      },\n      compose: function compose(a) {\n        var b = a.getInputTargetBlock(\"STACK\");\n        for (a = []; b;) b.isInsertionMarker() || a.push(b.valueConnection_), b = b.getNextBlock();\n        for (b = 0; b < this.itemCount_; b++) {\n          var c = this.getInput(\"ADD\" + b).connection.targetConnection;\n          c && -1 === a.indexOf(c) && c.disconnect();\n        }\n        this.itemCount_ = a.length;\n        this.updateShape_();\n        for (b = 0; b < this.itemCount_; b++) {\n          var _c = void 0;\n          null == (_c = a[b]) || _c.reconnect(this, \"ADD\" + b);\n        }\n      },\n      saveConnections: function saveConnections(a) {\n        a = a.getInputTargetBlock(\"STACK\");\n        var b = 0;\n        for (; a;) {\n          if (a.isInsertionMarker()) {\n            a = a.getNextBlock();\n            continue;\n          }\n          var c = this.getInput(\"ADD\" + b);\n          a.valueConnection_ = c && c.connection.targetConnection;\n          a = a.getNextBlock();\n          b++;\n        }\n      },\n      updateShape_: function updateShape_() {\n        this.itemCount_ && this.getInput(\"EMPTY\") ? this.removeInput(\"EMPTY\") : this.itemCount_ || this.getInput(\"EMPTY\") || this.appendDummyInput(\"EMPTY\").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));\n        for (var a = 0; a < this.itemCount_; a++) if (!this.getInput(\"ADD\" + a)) {\n          var b = this.appendValueInput(\"ADD\" + a).setAlign($.Align$$module$build$src$core$inputs$align.RIGHT);\n          0 === a && b.appendField($.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH);\n        }\n        for (a = this.itemCount_; this.getInput(\"ADD\" + a); a++) this.removeInput(\"ADD\" + a);\n      }\n    },\n    JOIN_EXTENSION$$module$build$src$blocks$text = function JOIN_EXTENSION$$module$build$src$blocks$text() {\n      this.mixin(QUOTE_IMAGE_MIXIN$$module$build$src$blocks$text);\n      this.itemCount_ = 2;\n      this.updateShape_();\n      this.setMutator(new $.MutatorIcon$$module$build$src$core$icons$mutator_icon([\"text_create_join_item\"], this));\n    };\n  $.register$$module$build$src$core$extensions(\"text_append_tooltip\", $.buildTooltipWithFieldText$$module$build$src$core$extensions(\"%{BKY_TEXT_APPEND_TOOLTIP}\", \"VAR\"));\n  var INDEXOF_TOOLTIP_EXTENSION$$module$build$src$blocks$text = function INDEXOF_TOOLTIP_EXTENSION$$module$build$src$blocks$text() {\n      var _this3 = this;\n      this.setTooltip(function () {\n        return $.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace(\"%1\", _this3.workspace.options.oneBasedIndex ? \"0\" : \"-1\");\n      });\n    },\n    CHARAT_MUTATOR_MIXIN$$module$build$src$blocks$text = {\n      isAt_: !1,\n      mutationToDom: function mutationToDom() {\n        var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n        a.setAttribute(\"at\", \"\".concat(this.isAt_));\n        return a;\n      },\n      domToMutation: function domToMutation(a) {\n        a = \"false\" !== a.getAttribute(\"at\");\n        this.updateAt_(a);\n      },\n      updateAt_: function updateAt_(a) {\n        this.removeInput(\"AT\", !0);\n        this.removeInput(\"ORDINAL\", !0);\n        a && (this.appendValueInput(\"AT\").setCheck(\"Number\"), $.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField($.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX));\n        $.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL && (this.removeInput(\"TAIL\", !0), this.appendDummyInput(\"TAIL\").appendField($.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL));\n        this.isAt_ = a;\n      }\n    },\n    CHARAT_EXTENSION$$module$build$src$blocks$text = function CHARAT_EXTENSION$$module$build$src$blocks$text() {\n      var _this4 = this;\n      this.getField(\"WHERE\").setValidator(function (a) {\n        a = \"FROM_START\" === a || \"FROM_END\" === a;\n        var b = this.getSourceBlock();\n        a !== b.isAt_ && b.updateAt_(a);\n      });\n      this.updateAt_(!0);\n      this.setTooltip(function () {\n        var a = _this4.getFieldValue(\"WHERE\");\n        var b = $.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;\n        (\"FROM_START\" === a || \"FROM_END\" === a) && (a = \"FROM_START\" === a ? $.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP : $.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP) && (b += \"  \" + a.replace(\"%1\", _this4.workspace.options.oneBasedIndex ? \"#1\" : \"#0\"));\n        return b;\n      });\n    };\n  $.register$$module$build$src$core$extensions(\"text_indexOf_tooltip\", INDEXOF_TOOLTIP_EXTENSION$$module$build$src$blocks$text);\n  $.register$$module$build$src$core$extensions(\"text_quotes\", QUOTES_EXTENSION$$module$build$src$blocks$text);\n  $.registerMutator$$module$build$src$core$extensions(\"text_join_mutator\", JOIN_MUTATOR_MIXIN$$module$build$src$blocks$text, JOIN_EXTENSION$$module$build$src$blocks$text);\n  $.registerMutator$$module$build$src$core$extensions(\"text_charAt_mutator\", CHARAT_MUTATOR_MIXIN$$module$build$src$blocks$text, CHARAT_EXTENSION$$module$build$src$blocks$text);\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$text);\n  var module$build$src$blocks$text = {\n    blocks: blocks$$module$build$src$blocks$text\n  };\n  var blocks$$module$build$src$blocks$procedures = {},\n    PROCEDURE_DEF_COMMON$$module$build$src$blocks$procedures = {\n      setStatements_: function setStatements_(a) {\n        this.hasStatements_ !== a && (a ? (this.appendStatementInput(\"STACK\").appendField($.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO), this.getInput(\"RETURN\") && this.moveInputBefore(\"STACK\", \"RETURN\")) : this.removeInput(\"STACK\", !0), this.hasStatements_ = a);\n      },\n      updateParams_: function updateParams_() {\n        var a = \"\";\n        this.arguments_.length && (a = $.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS + \" \" + this.arguments_.join(\", \"));\n        $.disable$$module$build$src$core$events$utils();\n        try {\n          this.setFieldValue(a, \"PARAMS\");\n        } finally {\n          $.enable$$module$build$src$core$events$utils();\n        }\n      },\n      mutationToDom: function mutationToDom(a) {\n        var b = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n        a && b.setAttribute(\"name\", this.getFieldValue(\"NAME\"));\n        for (var c = 0; c < this.argumentVarModels_.length; c++) {\n          var d = $.createElement$$module$build$src$core$utils$xml(\"arg\"),\n            e = this.argumentVarModels_[c];\n          d.setAttribute(\"name\", e.name);\n          d.setAttribute(\"varid\", e.getId());\n          a && this.paramIds_ && d.setAttribute(\"paramId\", this.paramIds_[c]);\n          b.appendChild(d);\n        }\n        this.hasStatements_ || b.setAttribute(\"statements\", \"false\");\n        return b;\n      },\n      domToMutation: function domToMutation(a) {\n        this.arguments_ = [];\n        this.argumentVarModels_ = [];\n        for (var c = 0, d; d = a.childNodes[c]; c++) if (\"arg\" === d.nodeName.toLowerCase()) {\n          var b = d;\n          var e = b.getAttribute(\"name\");\n          b = b.getAttribute(\"varid\") || b.getAttribute(\"varId\");\n          this.arguments_.push(e);\n          b = $.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace, b, e, \"\");\n          null !== b ? this.argumentVarModels_.push(b) : console.log(\"Failed to create a variable named \\\"\".concat(e, \"\\\", ignoring.\"));\n        }\n        this.updateParams_();\n        $.mutateCallers$$module$build$src$core$procedures(this);\n        this.setStatements_(\"false\" !== a.getAttribute(\"statements\"));\n      },\n      saveExtraState: function saveExtraState() {\n        if (!this.argumentVarModels_.length && this.hasStatements_) return null;\n        var a = Object.create(null);\n        if (this.argumentVarModels_.length) {\n          a.params = [];\n          for (var b = 0; b < this.argumentVarModels_.length; b++) a.params.push({\n            name: this.argumentVarModels_[b].name,\n            id: this.argumentVarModels_[b].getId()\n          });\n        }\n        this.hasStatements_ || (a.hasStatements = !1);\n        return a;\n      },\n      loadExtraState: function loadExtraState(a) {\n        this.arguments_ = [];\n        this.argumentVarModels_ = [];\n        if (a.params) for (var c = 0; c < a.params.length; c++) {\n          var b = a.params[c];\n          b = $.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace, b.id, b.name, \"\");\n          this.arguments_.push(b.name);\n          this.argumentVarModels_.push(b);\n        }\n        this.updateParams_();\n        $.mutateCallers$$module$build$src$core$procedures(this);\n        this.setStatements_(!1 === a.hasStatements ? !1 : !0);\n      },\n      decompose: function decompose(a) {\n        var b = $.createElement$$module$build$src$core$utils$xml(\"block\");\n        b.setAttribute(\"type\", \"procedures_mutatorcontainer\");\n        var c = $.createElement$$module$build$src$core$utils$xml(\"statement\");\n        c.setAttribute(\"name\", \"STACK\");\n        b.appendChild(c);\n        for (var e = 0; e < this.arguments_.length; e++) {\n          var f = $.createElement$$module$build$src$core$utils$xml(\"block\");\n          f.setAttribute(\"type\", \"procedures_mutatorarg\");\n          var d = $.createElement$$module$build$src$core$utils$xml(\"field\");\n          d.setAttribute(\"name\", \"NAME\");\n          var g = $.createTextNode$$module$build$src$core$utils$xml(this.arguments_[e]);\n          d.appendChild(g);\n          f.appendChild(d);\n          d = $.createElement$$module$build$src$core$utils$xml(\"next\");\n          f.appendChild(d);\n          c.appendChild(f);\n          c = d;\n        }\n        a = $.domToBlock$$module$build$src$core$xml(b, a);\n        \"procedures_defreturn\" === this.type ? a.setFieldValue(this.hasStatements_, \"STATEMENTS\") : a.removeInput(\"STATEMENT_INPUT\");\n        $.mutateCallers$$module$build$src$core$procedures(this);\n        return a;\n      },\n      compose: function compose(a) {\n        this.arguments_ = [];\n        this.paramIds_ = [];\n        this.argumentVarModels_ = [];\n        var b = a.getInputTargetBlock(\"STACK\");\n        for (; b && !b.isInsertionMarker();) {\n          var c = b.getFieldValue(\"NAME\");\n          this.arguments_.push(c);\n          c = this.workspace.getVariable(c, \"\");\n          this.argumentVarModels_.push(c);\n          this.paramIds_.push(b.id);\n          b = b.nextConnection && b.nextConnection.targetBlock();\n        }\n        this.updateParams_();\n        $.mutateCallers$$module$build$src$core$procedures(this);\n        a = a.getFieldValue(\"STATEMENTS\");\n        if (null !== a && (a = \"TRUE\" === a, this.hasStatements_ !== a)) if (a) {\n          this.setStatements_(!0);\n          var d;\n          null == (d = this.statementConnection_) || d.reconnect(this, \"STACK\");\n          this.statementConnection_ = null;\n        } else {\n          d = this.getInput(\"STACK\").connection;\n          if (this.statementConnection_ = d.targetConnection) d = d.targetBlock(), d.unplug(), d.bumpNeighbours();\n          this.setStatements_(!1);\n        }\n      },\n      getVars: function getVars() {\n        return this.arguments_;\n      },\n      getVarModels: function getVarModels() {\n        return this.argumentVarModels_;\n      },\n      renameVarById: function renameVarById(a, b) {\n        var c = this.workspace.getVariableById(a);\n        if (\"\" === c.type) {\n          c = c.name;\n          b = this.workspace.getVariableById(b);\n          var d = !1;\n          for (var e = 0; e < this.argumentVarModels_.length; e++) this.argumentVarModels_[e].getId() === a && (this.arguments_[e] = b.name, this.argumentVarModels_[e] = b, d = !0);\n          d && (this.displayRenamedVar_(c, b.name), $.mutateCallers$$module$build$src$core$procedures(this));\n        }\n      },\n      updateVarName: function updateVarName(a) {\n        var b = a.name;\n        var c = !1,\n          d;\n        for (var e = 0; e < this.argumentVarModels_.length; e++) this.argumentVarModels_[e].getId() === a.getId() && (d = this.arguments_[e], this.arguments_[e] = b, c = !0);\n        c && (this.displayRenamedVar_(d, b), $.mutateCallers$$module$build$src$core$procedures(this));\n      },\n      displayRenamedVar_: function displayRenamedVar_(a, b) {\n        this.updateParams_();\n        var c = this.getIcon($.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);\n        if (c && c.bubbleIsVisible()) {\n          c = c.getWorkspace().getAllBlocks(!1);\n          for (var d = 0, e; e = c[d]; d++) \"procedures_mutatorarg\" === e.type && $.Names$$module$build$src$core$names.equals(a, e.getFieldValue(\"NAME\")) && e.setFieldValue(b, \"NAME\");\n        }\n      },\n      customContextMenu: function customContextMenu(a) {\n        if (!this.isInFlyout) {\n          var b = this.getFieldValue(\"NAME\"),\n            c = {\n              type: this.callType_,\n              extraState: {\n                name: b,\n                params: this.arguments_\n              }\n            };\n          a.push({\n            enabled: !0,\n            text: $.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace(\"%1\", b),\n            callback: $.callbackFactory$$module$build$src$core$contextmenu(this, c)\n          });\n          if (!this.isCollapsed()) for (b = 0; b < this.argumentVarModels_.length; b++) {\n            c = this.argumentVarModels_[b];\n            var d = {\n              type: \"variables_get\",\n              fields: {\n                VAR: {\n                  name: c.name,\n                  id: c.getId(),\n                  type: c.type\n                }\n              }\n            };\n            a.push({\n              enabled: !0,\n              text: $.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace(\"%1\", c.name),\n              callback: $.callbackFactory$$module$build$src$core$contextmenu(this, d)\n            });\n          }\n        }\n      }\n    };\n  blocks$$module$build$src$blocks$procedures.procedures_defnoreturn = Object.assign({}, PROCEDURE_DEF_COMMON$$module$build$src$blocks$procedures, {\n    init: function init() {\n      var a = $.findLegalName$$module$build$src$core$procedures(\"\", this);\n      a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_input\",\n        text: a\n      });\n      a.setValidator($.rename$$module$build$src$core$procedures);\n      a.setSpellcheck(!1);\n      this.appendDummyInput().appendField($.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(a, \"NAME\").appendField(\"\", \"PARAMS\");\n      this.setMutator(new $.MutatorIcon$$module$build$src$core$icons$mutator_icon([\"procedures_mutatorarg\"], this));\n      (this.workspace.options.comments || this.workspace.options.parentWorkspace && this.workspace.options.parentWorkspace.options.comments) && $.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT && this.setCommentText($.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip($.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP);\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.setStatements_(!0);\n      this.statementConnection_ = null;\n    },\n    getProcedureDef: function getProcedureDef() {\n      return [this.getFieldValue(\"NAME\"), this.arguments_, !1];\n    },\n    callType_: \"procedures_callnoreturn\"\n  });\n  blocks$$module$build$src$blocks$procedures.procedures_defreturn = Object.assign({}, PROCEDURE_DEF_COMMON$$module$build$src$blocks$procedures, {\n    init: function init() {\n      var a = $.findLegalName$$module$build$src$core$procedures(\"\", this);\n      a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_input\",\n        text: a\n      });\n      a.setValidator($.rename$$module$build$src$core$procedures);\n      a.setSpellcheck(!1);\n      this.appendDummyInput().appendField($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(a, \"NAME\").appendField(\"\", \"PARAMS\");\n      this.appendValueInput(\"RETURN\").setAlign($.Align$$module$build$src$core$inputs$input.RIGHT).appendField($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN);\n      this.setMutator(new $.MutatorIcon$$module$build$src$core$icons$mutator_icon([\"procedures_mutatorarg\"], this));\n      (this.workspace.options.comments || this.workspace.options.parentWorkspace && this.workspace.options.parentWorkspace.options.comments) && $.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT && this.setCommentText($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP);\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.setStatements_(!0);\n      this.statementConnection_ = null;\n    },\n    getProcedureDef: function getProcedureDef() {\n      return [this.getFieldValue(\"NAME\"), this.arguments_, !0];\n    },\n    callType_: \"procedures_callreturn\"\n  });\n  var PROCEDURES_MUTATORCONTAINER$$module$build$src$blocks$procedures = {\n    init: function init() {\n      this.appendDummyInput().appendField($.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE);\n      this.appendStatementInput(\"STACK\");\n      this.appendDummyInput(\"STATEMENT_INPUT\").appendField($.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField($.fromJson$$module$build$src$core$field_registry({\n        type: \"field_checkbox\",\n        checked: !0\n      }), \"STATEMENTS\");\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip($.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  blocks$$module$build$src$blocks$procedures.procedures_mutatorcontainer = PROCEDURES_MUTATORCONTAINER$$module$build$src$blocks$procedures;\n  var PROCEDURES_MUTATORARGUMENT$$module$build$src$blocks$procedures = {\n    init: function init() {\n      var a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_input\",\n        text: $.DEFAULT_ARG$$module$build$src$core$procedures\n      });\n      a.setValidator(this.validator_);\n      a.oldShowEditorFn_ = a.showEditor_;\n      a.showEditor_ = function () {\n        this.createdVariables_ = [];\n        this.oldShowEditorFn_();\n      };\n      this.appendDummyInput().appendField($.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(a, \"NAME\");\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip($.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP);\n      this.contextMenu = !1;\n      a.onFinishEditing_ = this.deleteIntermediateVars_;\n      a.createdVariables_ = [];\n      a.onFinishEditing_(\"x\");\n    },\n    validator_: function validator_(a) {\n      var b = this.getSourceBlock();\n      var c = b.workspace.getRootWorkspace();\n      a = a.replace(/[\\s\\xa0]+/g, \" \").replace(/^ | $/g, \"\");\n      if (!a) return null;\n      var d = (b.workspace.targetWorkspace || b.workspace).getAllBlocks(!1),\n        e = a.toLowerCase();\n      for (var f = 0; f < d.length; f++) {\n        if (d[f].id === this.getSourceBlock().id) continue;\n        var g = d[f].getFieldValue(\"NAME\");\n        if (g && g.toLowerCase() === e) return null;\n      }\n      if (b.isInFlyout) return a;\n      (b = c.getVariable(a, \"\")) && b.name !== a && c.renameVariableById(b.getId(), a);\n      b || (b = c.createVariable(a, \"\")) && this.createdVariables_ && this.createdVariables_.push(b);\n      return a;\n    },\n    deleteIntermediateVars_: function deleteIntermediateVars_(a) {\n      var b = this.getSourceBlock().workspace.getRootWorkspace();\n      if (b) for (var c = 0; c < this.createdVariables_.length; c++) {\n        var d = this.createdVariables_[c];\n        d.name !== a && b.deleteVariableById(d.getId());\n      }\n    }\n  };\n  blocks$$module$build$src$blocks$procedures.procedures_mutatorarg = PROCEDURES_MUTATORARGUMENT$$module$build$src$blocks$procedures;\n  var PROCEDURE_CALL_COMMON$$module$build$src$blocks$procedures = {\n    getProcedureCall: function getProcedureCall() {\n      return this.getFieldValue(\"NAME\");\n    },\n    renameProcedure: function renameProcedure(a, b) {\n      $.Names$$module$build$src$core$names.equals(a, this.getProcedureCall()) && (this.setFieldValue(b, \"NAME\"), this.setTooltip((this.outputConnection ? $.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP : $.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace(\"%1\", b)));\n    },\n    setProcedureParameters_: function setProcedureParameters_(a, b) {\n      var c = $.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(), this.workspace);\n      (c = (c = c && c.getIcon($.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)) && c.bubbleIsVisible()) ? this.setCollapsed(!1) : (this.quarkConnections_ = {}, this.quarkIds_ = null);\n      if (a.join(\"\\n\") === this.arguments_.join(\"\\n\")) this.quarkIds_ = b;else {\n        if (b.length !== a.length) throw RangeError(\"paramNames and paramIds must be the same length.\");\n        this.quarkIds_ || (this.quarkConnections_ = {}, this.quarkIds_ = []);\n        for (var e = 0; e < this.arguments_.length; e++) {\n          var d = this.getInput(\"ARG\" + e);\n          d && (d = d.connection.targetConnection, this.quarkConnections_[this.quarkIds_[e]] = d, c && d && -1 === b.indexOf(this.quarkIds_[e]) && (d.disconnect(), d.getSourceBlock().bumpNeighbours()));\n        }\n        this.arguments_ = [].concat(a);\n        this.argumentVarModels_ = [];\n        for (a = 0; a < this.arguments_.length; a++) c = $.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace, null, this.arguments_[a], \"\"), this.argumentVarModels_.push(c);\n        this.updateShape_();\n        if (this.quarkIds_ = b) for (b = 0; b < this.arguments_.length; b++) if (a = this.quarkIds_[b], a in this.quarkConnections_) {\n          var _e = void 0;\n          (null == (_e = this.quarkConnections_[a]) ? 0 : _e.reconnect(this, \"ARG\" + b)) || delete this.quarkConnections_[a];\n        }\n      }\n    },\n    updateShape_: function updateShape_() {\n      for (var a = 0; a < this.arguments_.length; a++) {\n        var b = this.getField(\"ARGNAME\" + a);\n        if (b) {\n          $.disable$$module$build$src$core$events$utils();\n          try {\n            b.setValue(this.arguments_[a]);\n          } finally {\n            $.enable$$module$build$src$core$events$utils();\n          }\n        } else b = $.fromJson$$module$build$src$core$field_registry({\n          type: \"field_label\",\n          text: this.arguments_[a]\n        }), this.appendValueInput(\"ARG\" + a).setAlign($.Align$$module$build$src$core$inputs$input.RIGHT).appendField(b, \"ARGNAME\" + a).init();\n      }\n      for (a = this.arguments_.length; this.getInput(\"ARG\" + a); a++) this.removeInput(\"ARG\" + a);\n      if (a = this.getInput(\"TOPROW\")) this.arguments_.length ? this.getField(\"WITH\") || (a.appendField($.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS, \"WITH\"), a.init()) : this.getField(\"WITH\") && a.removeField(\"WITH\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n      a.setAttribute(\"name\", this.getProcedureCall());\n      for (var b = 0; b < this.arguments_.length; b++) {\n        var c = $.createElement$$module$build$src$core$utils$xml(\"arg\");\n        c.setAttribute(\"name\", this.arguments_[b]);\n        a.appendChild(c);\n      }\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = a.getAttribute(\"name\");\n      this.renameProcedure(this.getProcedureCall(), b);\n      b = [];\n      var c = [];\n      for (var d = 0, e; e = a.childNodes[d]; d++) \"arg\" === e.nodeName.toLowerCase() && (b.push(e.getAttribute(\"name\")), c.push(e.getAttribute(\"paramId\")));\n      this.setProcedureParameters_(b, c);\n    },\n    saveExtraState: function saveExtraState() {\n      var a = Object.create(null);\n      a.name = this.getProcedureCall();\n      this.arguments_.length && (a.params = this.arguments_);\n      return a;\n    },\n    loadExtraState: function loadExtraState(a) {\n      this.renameProcedure(this.getProcedureCall(), a.name);\n      if (a = a.params) {\n        var b = [];\n        b.length = a.length;\n        b.fill(null);\n        this.setProcedureParameters_(a, b);\n      }\n    },\n    getVars: function getVars() {\n      return this.arguments_;\n    },\n    getVarModels: function getVarModels() {\n      return this.argumentVarModels_;\n    },\n    onchange: function onchange(a) {\n      if (this.workspace && !this.workspace.isFlyout && a.recordUndo) if (a.type === $.CREATE$$module$build$src$core$events$utils && -1 !== a.ids.indexOf(this.id)) {\n        var b = this.getProcedureCall();\n        b = $.getDefinition$$module$build$src$core$procedures(b, this.workspace);\n        !b || b.type === this.defType_ && JSON.stringify(b.getVars()) === JSON.stringify(this.arguments_) || (b = null);\n        if (!b) {\n          $.setGroup$$module$build$src$core$events$utils(a.group);\n          a = $.createElement$$module$build$src$core$utils$xml(\"xml\");\n          b = $.createElement$$module$build$src$core$utils$xml(\"block\");\n          b.setAttribute(\"type\", this.defType_);\n          var c = this.getRelativeToSurfaceXY(),\n            d = c.y + 2 * $.config$$module$build$src$core$config.snapRadius;\n          b.setAttribute(\"x\", \"\".concat(c.x + $.config$$module$build$src$core$config.snapRadius * (this.RTL ? -1 : 1)));\n          b.setAttribute(\"y\", \"\".concat(d));\n          c = this.mutationToDom();\n          b.appendChild(c);\n          c = $.createElement$$module$build$src$core$utils$xml(\"field\");\n          c.setAttribute(\"name\", \"NAME\");\n          d = this.getProcedureCall();\n          var e = $.findLegalName$$module$build$src$core$procedures(d, this);\n          d !== e && this.renameProcedure(d, e);\n          c.appendChild($.createTextNode$$module$build$src$core$utils$xml(d));\n          b.appendChild(c);\n          a.appendChild(b);\n          $.domToWorkspace$$module$build$src$core$xml(a, this.workspace);\n          $.setGroup$$module$build$src$core$events$utils(!1);\n        }\n      } else a.type === $.DELETE$$module$build$src$core$events$utils ? (b = this.getProcedureCall(), $.getDefinition$$module$build$src$core$procedures(b, this.workspace) || ($.setGroup$$module$build$src$core$events$utils(a.group), this.dispose(!0), $.setGroup$$module$build$src$core$events$utils(!1))) : a.type === $.CHANGE$$module$build$src$core$events$utils && \"disabled\" === a.element && (b = this.getProcedureCall(), (b = $.getDefinition$$module$build$src$core$procedures(b, this.workspace)) && b.id === a.blockId && ((b = $.getGroup$$module$build$src$core$events$utils()) && console.log(\"Saw an existing group while responding to a definition change\"), $.setGroup$$module$build$src$core$events$utils(a.group), a.newValue ? (this.previousEnabledState_ = this.isEnabled(), this.setEnabled(!1)) : this.setEnabled(this.previousEnabledState_), $.setGroup$$module$build$src$core$events$utils(b)));\n    },\n    customContextMenu: function customContextMenu(a) {\n      if (this.workspace.isMovable()) {\n        var b = this.getProcedureCall(),\n          c = this.workspace;\n        a.push({\n          enabled: !0,\n          text: $.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,\n          callback: function callback() {\n            var d = $.getDefinition$$module$build$src$core$procedures(b, c);\n            d && (c.centerOnBlock(d.id), d.select());\n          }\n        });\n      }\n    }\n  };\n  blocks$$module$build$src$blocks$procedures.procedures_callnoreturn = Object.assign({}, PROCEDURE_CALL_COMMON$$module$build$src$blocks$procedures, {\n    init: function init() {\n      this.appendDummyInput(\"TOPROW\").appendField(\"\", \"NAME\");\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n      this.previousEnabledState_ = !0;\n    },\n    defType_: \"procedures_defnoreturn\"\n  });\n  blocks$$module$build$src$blocks$procedures.procedures_callreturn = Object.assign({}, PROCEDURE_CALL_COMMON$$module$build$src$blocks$procedures, {\n    init: function init() {\n      this.appendDummyInput(\"TOPROW\").appendField(\"\", \"NAME\");\n      this.setOutput(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n      this.previousEnabledState_ = !0;\n    },\n    defType_: \"procedures_defreturn\"\n  });\n  var PROCEDURES_IFRETURN$$module$build$src$blocks$procedures = {\n    init: function init() {\n      this.appendValueInput(\"CONDITION\").setCheck(\"Boolean\").appendField($.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF);\n      this.appendValueInput(\"VALUE\").appendField($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN);\n      this.setInputsInline(!0);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip($.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP);\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL);\n      this.hasReturnValue_ = !0;\n    },\n    mutationToDom: function mutationToDom() {\n      var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n      a.setAttribute(\"value\", String(Number(this.hasReturnValue_)));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.hasReturnValue_ = \"1\" === a.getAttribute(\"value\");\n      this.hasReturnValue_ || (this.removeInput(\"VALUE\"), this.appendDummyInput(\"VALUE\").appendField($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN));\n    },\n    onchange: function onchange(a) {\n      if (!(this.workspace.isDragging && this.workspace.isDragging() || a.type !== $.MOVE$$module$build$src$core$events$utils)) {\n        var b = !1,\n          c = this;\n        do {\n          if (-1 !== this.FUNCTION_TYPES.indexOf(c.type)) {\n            b = !0;\n            break;\n          }\n          c = c.getSurroundParent();\n        } while (c);\n        b ? (\"procedures_defnoreturn\" === c.type && this.hasReturnValue_ ? (this.removeInput(\"VALUE\"), this.appendDummyInput(\"VALUE\").appendField($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN), this.hasReturnValue_ = !1) : \"procedures_defreturn\" !== c.type || this.hasReturnValue_ || (this.removeInput(\"VALUE\"), this.appendValueInput(\"VALUE\").appendField($.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN), this.hasReturnValue_ = !0), this.setWarningText(null)) : this.setWarningText($.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING);\n        this.isInFlyout || (c = $.getGroup$$module$build$src$core$events$utils(), $.setGroup$$module$build$src$core$events$utils(a.group), this.setEnabled(b), $.setGroup$$module$build$src$core$events$utils(c));\n      }\n    },\n    FUNCTION_TYPES: [\"procedures_defnoreturn\", \"procedures_defreturn\"]\n  };\n  blocks$$module$build$src$blocks$procedures.procedures_ifreturn = PROCEDURES_IFRETURN$$module$build$src$blocks$procedures;\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$procedures);\n  var module$build$src$blocks$procedures = {\n    blocks: blocks$$module$build$src$blocks$procedures\n  };\n  var blocks$$module$build$src$blocks$math = $.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{\n      type: \"math_number\",\n      message0: \"%1\",\n      args0: [{\n        type: \"field_number\",\n        name: \"NUM\",\n        value: 0\n      }],\n      output: \"Number\",\n      helpUrl: \"%{BKY_MATH_NUMBER_HELPURL}\",\n      style: \"math_blocks\",\n      tooltip: \"%{BKY_MATH_NUMBER_TOOLTIP}\",\n      extensions: [\"parent_tooltip_when_inline\"]\n    }, {\n      type: \"math_arithmetic\",\n      message0: \"%1 %2 %3\",\n      args0: [{\n        type: \"input_value\",\n        name: \"A\",\n        check: \"Number\"\n      }, {\n        type: \"field_dropdown\",\n        name: \"OP\",\n        options: [[\"%{BKY_MATH_ADDITION_SYMBOL}\", \"ADD\"], [\"%{BKY_MATH_SUBTRACTION_SYMBOL}\", \"MINUS\"], [\"%{BKY_MATH_MULTIPLICATION_SYMBOL}\", \"MULTIPLY\"], [\"%{BKY_MATH_DIVISION_SYMBOL}\", \"DIVIDE\"], [\"%{BKY_MATH_POWER_SYMBOL}\", \"POWER\"]]\n      }, {\n        type: \"input_value\",\n        name: \"B\",\n        check: \"Number\"\n      }],\n      inputsInline: !0,\n      output: \"Number\",\n      style: \"math_blocks\",\n      helpUrl: \"%{BKY_MATH_ARITHMETIC_HELPURL}\",\n      extensions: [\"math_op_tooltip\"]\n    }, {\n      type: \"math_single\",\n      message0: \"%1 %2\",\n      args0: [{\n        type: \"field_dropdown\",\n        name: \"OP\",\n        options: [[\"%{BKY_MATH_SINGLE_OP_ROOT}\", \"ROOT\"], [\"%{BKY_MATH_SINGLE_OP_ABSOLUTE}\", \"ABS\"], [\"-\", \"NEG\"], [\"ln\", \"LN\"], [\"log10\", \"LOG10\"], [\"e^\", \"EXP\"], [\"10^\", \"POW10\"]]\n      }, {\n        type: \"input_value\",\n        name: \"NUM\",\n        check: \"Number\"\n      }],\n      output: \"Number\",\n      style: \"math_blocks\",\n      helpUrl: \"%{BKY_MATH_SINGLE_HELPURL}\",\n      extensions: [\"math_op_tooltip\"]\n    }, {\n      type: \"math_trig\",\n      message0: \"%1 %2\",\n      args0: [{\n        type: \"field_dropdown\",\n        name: \"OP\",\n        options: [[\"%{BKY_MATH_TRIG_SIN}\", \"SIN\"], [\"%{BKY_MATH_TRIG_COS}\", \"COS\"], [\"%{BKY_MATH_TRIG_TAN}\", \"TAN\"], [\"%{BKY_MATH_TRIG_ASIN}\", \"ASIN\"], [\"%{BKY_MATH_TRIG_ACOS}\", \"ACOS\"], [\"%{BKY_MATH_TRIG_ATAN}\", \"ATAN\"]]\n      }, {\n        type: \"input_value\",\n        name: \"NUM\",\n        check: \"Number\"\n      }],\n      output: \"Number\",\n      style: \"math_blocks\",\n      helpUrl: \"%{BKY_MATH_TRIG_HELPURL}\",\n      extensions: [\"math_op_tooltip\"]\n    }, {\n      type: \"math_constant\",\n      message0: \"%1\",\n      args0: [{\n        type: \"field_dropdown\",\n        name: \"CONSTANT\",\n        options: [[\"\\u03C0\", \"PI\"], [\"e\", \"E\"], [\"\\u03C6\", \"GOLDEN_RATIO\"], [\"sqrt(2)\", \"SQRT2\"], [\"sqrt(\\xBD)\", \"SQRT1_2\"], [\"\\u221E\", \"INFINITY\"]]\n      }],\n      output: \"Number\",\n      style: \"math_blocks\",\n      tooltip: \"%{BKY_MATH_CONSTANT_TOOLTIP}\",\n      helpUrl: \"%{BKY_MATH_CONSTANT_HELPURL}\"\n    }, {\n      type: \"math_number_property\",\n      message0: \"%1 %2\",\n      args0: [{\n        type: \"input_value\",\n        name: \"NUMBER_TO_CHECK\",\n        check: \"Number\"\n      }, {\n        type: \"field_dropdown\",\n        name: \"PROPERTY\",\n        options: [[\"%{BKY_MATH_IS_EVEN}\", \"EVEN\"], [\"%{BKY_MATH_IS_ODD}\", \"ODD\"], [\"%{BKY_MATH_IS_PRIME}\", \"PRIME\"], [\"%{BKY_MATH_IS_WHOLE}\", \"WHOLE\"], [\"%{BKY_MATH_IS_POSITIVE}\", \"POSITIVE\"], [\"%{BKY_MATH_IS_NEGATIVE}\", \"NEGATIVE\"], [\"%{BKY_MATH_IS_DIVISIBLE_BY}\", \"DIVISIBLE_BY\"]]\n      }],\n      inputsInline: !0,\n      output: \"Boolean\",\n      style: \"math_blocks\",\n      tooltip: \"%{BKY_MATH_IS_TOOLTIP}\",\n      mutator: \"math_is_divisibleby_mutator\"\n    }, {\n      type: \"math_change\",\n      message0: \"%{BKY_MATH_CHANGE_TITLE}\",\n      args0: [{\n        type: \"field_variable\",\n        name: \"VAR\",\n        variable: \"%{BKY_MATH_CHANGE_TITLE_ITEM}\"\n      }, {\n        type: \"input_value\",\n        name: \"DELTA\",\n        check: \"Number\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"variable_blocks\",\n      helpUrl: \"%{BKY_MATH_CHANGE_HELPURL}\",\n      extensions: [\"math_change_tooltip\"]\n    }, {\n      type: \"math_round\",\n      message0: \"%1 %2\",\n      args0: [{\n        type: \"field_dropdown\",\n        name: \"OP\",\n        options: [[\"%{BKY_MATH_ROUND_OPERATOR_ROUND}\", \"ROUND\"], [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}\", \"ROUNDUP\"], [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}\", \"ROUNDDOWN\"]]\n      }, {\n        type: \"input_value\",\n        name: \"NUM\",\n        check: \"Number\"\n      }],\n      output: \"Number\",\n      style: \"math_blocks\",\n      helpUrl: \"%{BKY_MATH_ROUND_HELPURL}\",\n      tooltip: \"%{BKY_MATH_ROUND_TOOLTIP}\"\n    }, {\n      type: \"math_on_list\",\n      message0: \"%1 %2\",\n      args0: [{\n        type: \"field_dropdown\",\n        name: \"OP\",\n        options: [[\"%{BKY_MATH_ONLIST_OPERATOR_SUM}\", \"SUM\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MIN}\", \"MIN\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MAX}\", \"MAX\"], [\"%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}\", \"AVERAGE\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}\", \"MEDIAN\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MODE}\", \"MODE\"], [\"%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}\", \"STD_DEV\"], [\"%{BKY_MATH_ONLIST_OPERATOR_RANDOM}\", \"RANDOM\"]]\n      }, {\n        type: \"input_value\",\n        name: \"LIST\",\n        check: \"Array\"\n      }],\n      output: \"Number\",\n      style: \"math_blocks\",\n      helpUrl: \"%{BKY_MATH_ONLIST_HELPURL}\",\n      mutator: \"math_modes_of_list_mutator\",\n      extensions: [\"math_op_tooltip\"]\n    }, {\n      type: \"math_modulo\",\n      message0: \"%{BKY_MATH_MODULO_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"DIVIDEND\",\n        check: \"Number\"\n      }, {\n        type: \"input_value\",\n        name: \"DIVISOR\",\n        check: \"Number\"\n      }],\n      inputsInline: !0,\n      output: \"Number\",\n      style: \"math_blocks\",\n      tooltip: \"%{BKY_MATH_MODULO_TOOLTIP}\",\n      helpUrl: \"%{BKY_MATH_MODULO_HELPURL}\"\n    }, {\n      type: \"math_constrain\",\n      message0: \"%{BKY_MATH_CONSTRAIN_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: \"Number\"\n      }, {\n        type: \"input_value\",\n        name: \"LOW\",\n        check: \"Number\"\n      }, {\n        type: \"input_value\",\n        name: \"HIGH\",\n        check: \"Number\"\n      }],\n      inputsInline: !0,\n      output: \"Number\",\n      style: \"math_blocks\",\n      tooltip: \"%{BKY_MATH_CONSTRAIN_TOOLTIP}\",\n      helpUrl: \"%{BKY_MATH_CONSTRAIN_HELPURL}\"\n    }, {\n      type: \"math_random_int\",\n      message0: \"%{BKY_MATH_RANDOM_INT_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"FROM\",\n        check: \"Number\"\n      }, {\n        type: \"input_value\",\n        name: \"TO\",\n        check: \"Number\"\n      }],\n      inputsInline: !0,\n      output: \"Number\",\n      style: \"math_blocks\",\n      tooltip: \"%{BKY_MATH_RANDOM_INT_TOOLTIP}\",\n      helpUrl: \"%{BKY_MATH_RANDOM_INT_HELPURL}\"\n    }, {\n      type: \"math_random_float\",\n      message0: \"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}\",\n      output: \"Number\",\n      style: \"math_blocks\",\n      tooltip: \"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}\",\n      helpUrl: \"%{BKY_MATH_RANDOM_FLOAT_HELPURL}\"\n    }, {\n      type: \"math_atan2\",\n      message0: \"%{BKY_MATH_ATAN2_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"X\",\n        check: \"Number\"\n      }, {\n        type: \"input_value\",\n        name: \"Y\",\n        check: \"Number\"\n      }],\n      inputsInline: !0,\n      output: \"Number\",\n      style: \"math_blocks\",\n      tooltip: \"%{BKY_MATH_ATAN2_TOOLTIP}\",\n      helpUrl: \"%{BKY_MATH_ATAN2_HELPURL}\"\n    }]),\n    TOOLTIPS_BY_OP$$module$build$src$blocks$math = {\n      ADD: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}\",\n      MINUS: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}\",\n      MULTIPLY: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}\",\n      DIVIDE: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}\",\n      POWER: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}\",\n      ROOT: \"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}\",\n      ABS: \"%{BKY_MATH_SINGLE_TOOLTIP_ABS}\",\n      NEG: \"%{BKY_MATH_SINGLE_TOOLTIP_NEG}\",\n      LN: \"%{BKY_MATH_SINGLE_TOOLTIP_LN}\",\n      LOG10: \"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}\",\n      EXP: \"%{BKY_MATH_SINGLE_TOOLTIP_EXP}\",\n      POW10: \"%{BKY_MATH_SINGLE_TOOLTIP_POW10}\",\n      SIN: \"%{BKY_MATH_TRIG_TOOLTIP_SIN}\",\n      COS: \"%{BKY_MATH_TRIG_TOOLTIP_COS}\",\n      TAN: \"%{BKY_MATH_TRIG_TOOLTIP_TAN}\",\n      ASIN: \"%{BKY_MATH_TRIG_TOOLTIP_ASIN}\",\n      ACOS: \"%{BKY_MATH_TRIG_TOOLTIP_ACOS}\",\n      ATAN: \"%{BKY_MATH_TRIG_TOOLTIP_ATAN}\",\n      SUM: \"%{BKY_MATH_ONLIST_TOOLTIP_SUM}\",\n      MIN: \"%{BKY_MATH_ONLIST_TOOLTIP_MIN}\",\n      MAX: \"%{BKY_MATH_ONLIST_TOOLTIP_MAX}\",\n      AVERAGE: \"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}\",\n      MEDIAN: \"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}\",\n      MODE: \"%{BKY_MATH_ONLIST_TOOLTIP_MODE}\",\n      STD_DEV: \"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}\",\n      RANDOM: \"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}\"\n    };\n  $.register$$module$build$src$core$extensions(\"math_op_tooltip\", $.buildTooltipForDropdown$$module$build$src$core$extensions(\"OP\", TOOLTIPS_BY_OP$$module$build$src$blocks$math));\n  var IS_DIVISIBLEBY_MUTATOR_MIXIN$$module$build$src$blocks$math = {\n      mutationToDom: function mutationToDom() {\n        var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\"),\n          b = \"DIVISIBLE_BY\" === this.getFieldValue(\"PROPERTY\");\n        a.setAttribute(\"divisor_input\", String(b));\n        return a;\n      },\n      domToMutation: function domToMutation(a) {\n        a = \"true\" === a.getAttribute(\"divisor_input\");\n        this.updateShape_(a);\n      },\n      updateShape_: function updateShape_(a) {\n        var b = this.getInput(\"DIVISOR\");\n        a ? b || this.appendValueInput(\"DIVISOR\").setCheck(\"Number\") : b && this.removeInput(\"DIVISOR\");\n      }\n    },\n    IS_DIVISIBLE_MUTATOR_EXTENSION$$module$build$src$blocks$math = function IS_DIVISIBLE_MUTATOR_EXTENSION$$module$build$src$blocks$math() {\n      this.getField(\"PROPERTY\").setValidator(function (a) {\n        a = \"DIVISIBLE_BY\" === a;\n        this.getSourceBlock().updateShape_(a);\n      });\n    };\n  $.registerMutator$$module$build$src$core$extensions(\"math_is_divisibleby_mutator\", IS_DIVISIBLEBY_MUTATOR_MIXIN$$module$build$src$blocks$math, IS_DIVISIBLE_MUTATOR_EXTENSION$$module$build$src$blocks$math);\n  $.register$$module$build$src$core$extensions(\"math_change_tooltip\", $.buildTooltipWithFieldText$$module$build$src$core$extensions(\"%{BKY_MATH_CHANGE_TOOLTIP}\", \"VAR\"));\n  var LIST_MODES_MUTATOR_MIXIN$$module$build$src$blocks$math = {\n      updateType_: function updateType_(a) {\n        \"MODE\" === a ? this.outputConnection.setCheck(\"Array\") : this.outputConnection.setCheck(\"Number\");\n      },\n      mutationToDom: function mutationToDom() {\n        var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n        a.setAttribute(\"op\", this.getFieldValue(\"OP\"));\n        return a;\n      },\n      domToMutation: function domToMutation(a) {\n        a = a.getAttribute(\"op\");\n        if (null === a) throw new TypeError(\"xmlElement had no op attribute\");\n        this.updateType_(a);\n      }\n    },\n    LIST_MODES_MUTATOR_EXTENSION$$module$build$src$blocks$math = function LIST_MODES_MUTATOR_EXTENSION$$module$build$src$blocks$math() {\n      this.getField(\"OP\").setValidator(function (a) {\n        this.updateType_(a);\n      }.bind(this));\n    };\n  $.registerMutator$$module$build$src$core$extensions(\"math_modes_of_list_mutator\", LIST_MODES_MUTATOR_MIXIN$$module$build$src$blocks$math, LIST_MODES_MUTATOR_EXTENSION$$module$build$src$blocks$math);\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$math);\n  var module$build$src$blocks$math = {\n    blocks: blocks$$module$build$src$blocks$math\n  };\n  var blocks$$module$build$src$blocks$loops = $.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{\n      type: \"controls_repeat_ext\",\n      message0: \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"TIMES\",\n        check: \"Number\"\n      }],\n      message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n      args1: [{\n        type: \"input_statement\",\n        name: \"DO\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"loop_blocks\",\n      tooltip: \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n      helpUrl: \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n    }, {\n      type: \"controls_repeat\",\n      message0: \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n      args0: [{\n        type: \"field_number\",\n        name: \"TIMES\",\n        value: 10,\n        min: 0,\n        precision: 1\n      }],\n      message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n      args1: [{\n        type: \"input_statement\",\n        name: \"DO\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"loop_blocks\",\n      tooltip: \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n      helpUrl: \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n    }, {\n      type: \"controls_whileUntil\",\n      message0: \"%1 %2\",\n      args0: [{\n        type: \"field_dropdown\",\n        name: \"MODE\",\n        options: [[\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}\", \"WHILE\"], [\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}\", \"UNTIL\"]]\n      }, {\n        type: \"input_value\",\n        name: \"BOOL\",\n        check: \"Boolean\"\n      }],\n      message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n      args1: [{\n        type: \"input_statement\",\n        name: \"DO\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"loop_blocks\",\n      helpUrl: \"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}\",\n      extensions: [\"controls_whileUntil_tooltip\"]\n    }, {\n      type: \"controls_for\",\n      message0: \"%{BKY_CONTROLS_FOR_TITLE}\",\n      args0: [{\n        type: \"field_variable\",\n        name: \"VAR\",\n        variable: null\n      }, {\n        type: \"input_value\",\n        name: \"FROM\",\n        check: \"Number\",\n        align: \"RIGHT\"\n      }, {\n        type: \"input_value\",\n        name: \"TO\",\n        check: \"Number\",\n        align: \"RIGHT\"\n      }, {\n        type: \"input_value\",\n        name: \"BY\",\n        check: \"Number\",\n        align: \"RIGHT\"\n      }],\n      message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n      args1: [{\n        type: \"input_statement\",\n        name: \"DO\"\n      }],\n      inputsInline: !0,\n      previousStatement: null,\n      nextStatement: null,\n      style: \"loop_blocks\",\n      helpUrl: \"%{BKY_CONTROLS_FOR_HELPURL}\",\n      extensions: [\"contextMenu_newGetVariableBlock\", \"controls_for_tooltip\"]\n    }, {\n      type: \"controls_forEach\",\n      message0: \"%{BKY_CONTROLS_FOREACH_TITLE}\",\n      args0: [{\n        type: \"field_variable\",\n        name: \"VAR\",\n        variable: null\n      }, {\n        type: \"input_value\",\n        name: \"LIST\",\n        check: \"Array\"\n      }],\n      message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n      args1: [{\n        type: \"input_statement\",\n        name: \"DO\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"loop_blocks\",\n      helpUrl: \"%{BKY_CONTROLS_FOREACH_HELPURL}\",\n      extensions: [\"contextMenu_newGetVariableBlock\", \"controls_forEach_tooltip\"]\n    }, {\n      type: \"controls_flow_statements\",\n      message0: \"%1\",\n      args0: [{\n        type: \"field_dropdown\",\n        name: \"FLOW\",\n        options: [[\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}\", \"BREAK\"], [\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}\", \"CONTINUE\"]]\n      }],\n      previousStatement: null,\n      style: \"loop_blocks\",\n      helpUrl: \"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}\",\n      suppressPrefixSuffix: !0,\n      extensions: [\"controls_flow_tooltip\", \"controls_flow_in_loop_check\"]\n    }]),\n    WHILE_UNTIL_TOOLTIPS$$module$build$src$blocks$loops = {\n      WHILE: \"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}\",\n      UNTIL: \"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}\"\n    };\n  $.register$$module$build$src$core$extensions(\"controls_whileUntil_tooltip\", $.buildTooltipForDropdown$$module$build$src$core$extensions(\"MODE\", WHILE_UNTIL_TOOLTIPS$$module$build$src$blocks$loops));\n  var BREAK_CONTINUE_TOOLTIPS$$module$build$src$blocks$loops = {\n    BREAK: \"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}\",\n    CONTINUE: \"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}\"\n  };\n  $.register$$module$build$src$core$extensions(\"controls_flow_tooltip\", $.buildTooltipForDropdown$$module$build$src$core$extensions(\"FLOW\", BREAK_CONTINUE_TOOLTIPS$$module$build$src$blocks$loops));\n  var CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN$$module$build$src$blocks$loops = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = this.getField(\"VAR\"),\n          c = b.getVariable().name;\n        this.isCollapsed() || null === c || (b = {\n          type: \"variables_get\",\n          fields: {\n            VAR: b.saveState(!0)\n          }\n        }, a.push({\n          enabled: !0,\n          text: $.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace(\"%1\", c),\n          callback: $.callbackFactory$$module$build$src$core$contextmenu(this, b)\n        }));\n      }\n    }\n  };\n  $.registerMixin$$module$build$src$core$extensions(\"contextMenu_newGetVariableBlock\", CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN$$module$build$src$blocks$loops);\n  $.register$$module$build$src$core$extensions(\"controls_for_tooltip\", $.buildTooltipWithFieldText$$module$build$src$core$extensions(\"%{BKY_CONTROLS_FOR_TOOLTIP}\", \"VAR\"));\n  $.register$$module$build$src$core$extensions(\"controls_forEach_tooltip\", $.buildTooltipWithFieldText$$module$build$src$core$extensions(\"%{BKY_CONTROLS_FOREACH_TOOLTIP}\", \"VAR\"));\n  var loopTypes$$module$build$src$blocks$loops = new Set([\"controls_repeat\", \"controls_repeat_ext\", \"controls_forEach\", \"controls_for\", \"controls_whileUntil\"]),\n    CONTROL_FLOW_IN_LOOP_CHECK_MIXIN$$module$build$src$blocks$loops = {\n      getSurroundLoop: function getSurroundLoop() {\n        var a = this;\n        do {\n          if (loopTypes$$module$build$src$blocks$loops.has(a.type)) return a;\n          a = a.getSurroundParent();\n        } while (a);\n        return null;\n      },\n      onchange: function onchange(a) {\n        var b = this.workspace;\n        if (b.isDragging && !b.isDragging() && a.type === $.MOVE$$module$build$src$core$events$utils && (b = !!this.getSurroundLoop(), this.setWarningText(b ? null : $.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING), !this.isInFlyout)) {\n          var c = $.getGroup$$module$build$src$core$events$utils();\n          $.setGroup$$module$build$src$core$events$utils(a.group);\n          this.setEnabled(b);\n          $.setGroup$$module$build$src$core$events$utils(c);\n        }\n      }\n    };\n  $.registerMixin$$module$build$src$core$extensions(\"controls_flow_in_loop_check\", CONTROL_FLOW_IN_LOOP_CHECK_MIXIN$$module$build$src$blocks$loops);\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$loops);\n  var module$build$src$blocks$loops = {\n    blocks: blocks$$module$build$src$blocks$loops,\n    loopTypes: loopTypes$$module$build$src$blocks$loops\n  };\n  var blocks$$module$build$src$blocks$logic = $.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{\n      type: \"logic_boolean\",\n      message0: \"%1\",\n      args0: [{\n        type: \"field_dropdown\",\n        name: \"BOOL\",\n        options: [[\"%{BKY_LOGIC_BOOLEAN_TRUE}\", \"TRUE\"], [\"%{BKY_LOGIC_BOOLEAN_FALSE}\", \"FALSE\"]]\n      }],\n      output: \"Boolean\",\n      style: \"logic_blocks\",\n      tooltip: \"%{BKY_LOGIC_BOOLEAN_TOOLTIP}\",\n      helpUrl: \"%{BKY_LOGIC_BOOLEAN_HELPURL}\"\n    }, {\n      type: \"controls_if\",\n      message0: \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n      args0: [{\n        type: \"input_value\",\n        name: \"IF0\",\n        check: \"Boolean\"\n      }],\n      message1: \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n      args1: [{\n        type: \"input_statement\",\n        name: \"DO0\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"logic_blocks\",\n      helpUrl: \"%{BKY_CONTROLS_IF_HELPURL}\",\n      suppressPrefixSuffix: !0,\n      mutator: \"controls_if_mutator\",\n      extensions: [\"controls_if_tooltip\"]\n    }, {\n      type: \"controls_ifelse\",\n      message0: \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n      args0: [{\n        type: \"input_value\",\n        name: \"IF0\",\n        check: \"Boolean\"\n      }],\n      message1: \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n      args1: [{\n        type: \"input_statement\",\n        name: \"DO0\"\n      }],\n      message2: \"%{BKY_CONTROLS_IF_MSG_ELSE} %1\",\n      args2: [{\n        type: \"input_statement\",\n        name: \"ELSE\"\n      }],\n      previousStatement: null,\n      nextStatement: null,\n      style: \"logic_blocks\",\n      tooltip: \"%{BKYCONTROLS_IF_TOOLTIP_2}\",\n      helpUrl: \"%{BKY_CONTROLS_IF_HELPURL}\",\n      suppressPrefixSuffix: !0,\n      extensions: [\"controls_if_tooltip\"]\n    }, {\n      type: \"logic_compare\",\n      message0: \"%1 %2 %3\",\n      args0: [{\n        type: \"input_value\",\n        name: \"A\"\n      }, {\n        type: \"field_dropdown\",\n        name: \"OP\",\n        options: [[\"=\", \"EQ\"], [\"\\u2260\", \"NEQ\"], [\"\\u200F<\", \"LT\"], [\"\\u200F\\u2264\", \"LTE\"], [\"\\u200F>\", \"GT\"], [\"\\u200F\\u2265\", \"GTE\"]]\n      }, {\n        type: \"input_value\",\n        name: \"B\"\n      }],\n      inputsInline: !0,\n      output: \"Boolean\",\n      style: \"logic_blocks\",\n      helpUrl: \"%{BKY_LOGIC_COMPARE_HELPURL}\",\n      extensions: [\"logic_compare\", \"logic_op_tooltip\"]\n    }, {\n      type: \"logic_operation\",\n      message0: \"%1 %2 %3\",\n      args0: [{\n        type: \"input_value\",\n        name: \"A\",\n        check: \"Boolean\"\n      }, {\n        type: \"field_dropdown\",\n        name: \"OP\",\n        options: [[\"%{BKY_LOGIC_OPERATION_AND}\", \"AND\"], [\"%{BKY_LOGIC_OPERATION_OR}\", \"OR\"]]\n      }, {\n        type: \"input_value\",\n        name: \"B\",\n        check: \"Boolean\"\n      }],\n      inputsInline: !0,\n      output: \"Boolean\",\n      style: \"logic_blocks\",\n      helpUrl: \"%{BKY_LOGIC_OPERATION_HELPURL}\",\n      extensions: [\"logic_op_tooltip\"]\n    }, {\n      type: \"logic_negate\",\n      message0: \"%{BKY_LOGIC_NEGATE_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"BOOL\",\n        check: \"Boolean\"\n      }],\n      output: \"Boolean\",\n      style: \"logic_blocks\",\n      tooltip: \"%{BKY_LOGIC_NEGATE_TOOLTIP}\",\n      helpUrl: \"%{BKY_LOGIC_NEGATE_HELPURL}\"\n    }, {\n      type: \"logic_null\",\n      message0: \"%{BKY_LOGIC_NULL}\",\n      output: null,\n      style: \"logic_blocks\",\n      tooltip: \"%{BKY_LOGIC_NULL_TOOLTIP}\",\n      helpUrl: \"%{BKY_LOGIC_NULL_HELPURL}\"\n    }, {\n      type: \"logic_ternary\",\n      message0: \"%{BKY_LOGIC_TERNARY_CONDITION} %1\",\n      args0: [{\n        type: \"input_value\",\n        name: \"IF\",\n        check: \"Boolean\"\n      }],\n      message1: \"%{BKY_LOGIC_TERNARY_IF_TRUE} %1\",\n      args1: [{\n        type: \"input_value\",\n        name: \"THEN\"\n      }],\n      message2: \"%{BKY_LOGIC_TERNARY_IF_FALSE} %1\",\n      args2: [{\n        type: \"input_value\",\n        name: \"ELSE\"\n      }],\n      output: null,\n      style: \"logic_blocks\",\n      tooltip: \"%{BKY_LOGIC_TERNARY_TOOLTIP}\",\n      helpUrl: \"%{BKY_LOGIC_TERNARY_HELPURL}\",\n      extensions: [\"logic_ternary\"]\n    }, {\n      type: \"controls_if_if\",\n      message0: \"%{BKY_CONTROLS_IF_IF_TITLE_IF}\",\n      nextStatement: null,\n      enableContextMenu: !1,\n      style: \"logic_blocks\",\n      tooltip: \"%{BKY_CONTROLS_IF_IF_TOOLTIP}\"\n    }, {\n      type: \"controls_if_elseif\",\n      message0: \"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}\",\n      previousStatement: null,\n      nextStatement: null,\n      enableContextMenu: !1,\n      style: \"logic_blocks\",\n      tooltip: \"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}\"\n    }, {\n      type: \"controls_if_else\",\n      message0: \"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}\",\n      previousStatement: null,\n      enableContextMenu: !1,\n      style: \"logic_blocks\",\n      tooltip: \"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}\"\n    }]),\n    TOOLTIPS_BY_OP$$module$build$src$blocks$logic = {\n      EQ: \"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}\",\n      NEQ: \"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}\",\n      LT: \"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}\",\n      LTE: \"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}\",\n      GT: \"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}\",\n      GTE: \"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}\",\n      AND: \"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}\",\n      OR: \"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}\"\n    };\n  $.register$$module$build$src$core$extensions(\"logic_op_tooltip\", $.buildTooltipForDropdown$$module$build$src$core$extensions(\"OP\", TOOLTIPS_BY_OP$$module$build$src$blocks$logic));\n  var CONTROLS_IF_MUTATOR_MIXIN$$module$build$src$blocks$logic = {\n    elseifCount_: 0,\n    elseCount_: 0,\n    mutationToDom: function mutationToDom() {\n      if (!this.elseifCount_ && !this.elseCount_) return null;\n      var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n      this.elseifCount_ && a.setAttribute(\"elseif\", String(this.elseifCount_));\n      this.elseCount_ && a.setAttribute(\"else\", \"1\");\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.elseifCount_ = parseInt(a.getAttribute(\"elseif\"), 10) || 0;\n      this.elseCount_ = parseInt(a.getAttribute(\"else\"), 10) || 0;\n      this.rebuildShape_();\n    },\n    saveExtraState: function saveExtraState() {\n      if (!this.elseifCount_ && !this.elseCount_) return null;\n      var a = Object.create(null);\n      this.elseifCount_ && (a.elseIfCount = this.elseifCount_);\n      this.elseCount_ && (a.hasElse = !0);\n      return a;\n    },\n    loadExtraState: function loadExtraState(a) {\n      this.elseifCount_ = a.elseIfCount || 0;\n      this.elseCount_ = a.hasElse ? 1 : 0;\n      this.updateShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"controls_if_if\");\n      b.initSvg();\n      var c = b.nextConnection;\n      for (var d = 1; d <= this.elseifCount_; d++) {\n        var e = a.newBlock(\"controls_if_elseif\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n      this.elseCount_ && (a = a.newBlock(\"controls_if_else\"), a.initSvg(), c.connect(a.previousConnection));\n      return b;\n    },\n    compose: function compose(a) {\n      a = a.nextConnection.targetBlock();\n      this.elseCount_ = this.elseifCount_ = 0;\n      var b = [null],\n        c = [null];\n      var d = null;\n      for (; a;) {\n        if (!a.isInsertionMarker()) switch (a.type) {\n          case \"controls_if_elseif\":\n            this.elseifCount_++;\n            b.push(a.valueConnection_);\n            c.push(a.statementConnection_);\n            break;\n          case \"controls_if_else\":\n            this.elseCount_++;\n            d = a.statementConnection_;\n            break;\n          default:\n            throw TypeError(\"Unknown block type: \" + a.type);\n        }\n        a = a.getNextBlock();\n      }\n      this.updateShape_();\n      this.reconnectChildBlocks_(b, c, d);\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.nextConnection.targetBlock();\n      var b = 1;\n      for (; a;) {\n        if (!a.isInsertionMarker()) switch (a.type) {\n          case \"controls_if_elseif\":\n            var c = this.getInput(\"IF\" + b);\n            var d = this.getInput(\"DO\" + b);\n            a.valueConnection_ = c && c.connection.targetConnection;\n            a.statementConnection_ = d && d.connection.targetConnection;\n            b++;\n            break;\n          case \"controls_if_else\":\n            c = this.getInput(\"ELSE\");\n            a.statementConnection_ = c && c.connection.targetConnection;\n            break;\n          default:\n            throw TypeError(\"Unknown block type: \" + a.type);\n        }\n        a = a.getNextBlock();\n      }\n    },\n    rebuildShape_: function rebuildShape_() {\n      var a = [null],\n        b = [null];\n      var c = null;\n      this.getInput(\"ELSE\") && (c = this.getInput(\"ELSE\").connection.targetConnection);\n      for (var d = 1; this.getInput(\"IF\" + d); d++) {\n        var e = this.getInput(\"IF\" + d),\n          f = this.getInput(\"DO\" + d);\n        a.push(e.connection.targetConnection);\n        b.push(f.connection.targetConnection);\n      }\n      this.updateShape_();\n      this.reconnectChildBlocks_(a, b, c);\n    },\n    updateShape_: function updateShape_() {\n      this.getInput(\"ELSE\") && this.removeInput(\"ELSE\");\n      for (var a = 1; this.getInput(\"IF\" + a); a++) this.removeInput(\"IF\" + a), this.removeInput(\"DO\" + a);\n      for (a = 1; a <= this.elseifCount_; a++) this.appendValueInput(\"IF\" + a).setCheck(\"Boolean\").appendField($.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF), this.appendStatementInput(\"DO\" + a).appendField($.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);\n      this.elseCount_ && this.appendStatementInput(\"ELSE\").appendField($.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE);\n    },\n    reconnectChildBlocks_: function reconnectChildBlocks_(a, b, c) {\n      for (var d = 1; d <= this.elseifCount_; d++) {\n        var e = void 0;\n        null == (e = a[d]) || e.reconnect(this, \"IF\" + d);\n        var f = void 0;\n        null == (f = b[d]) || f.reconnect(this, \"DO\" + d);\n      }\n      null == c || c.reconnect(this, \"ELSE\");\n    }\n  };\n  $.registerMutator$$module$build$src$core$extensions(\"controls_if_mutator\", CONTROLS_IF_MUTATOR_MIXIN$$module$build$src$blocks$logic, null, [\"controls_if_elseif\", \"controls_if_else\"]);\n  var CONTROLS_IF_TOOLTIP_EXTENSION$$module$build$src$blocks$logic = function CONTROLS_IF_TOOLTIP_EXTENSION$$module$build$src$blocks$logic() {\n    this.setTooltip(function () {\n      if (this.elseifCount_ || this.elseCount_) {\n        if (!this.elseifCount_ && this.elseCount_) return $.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;\n        if (this.elseifCount_ && !this.elseCount_) return $.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;\n        if (this.elseifCount_ && this.elseCount_) return $.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4;\n      } else return $.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;\n      return \"\";\n    }.bind(this));\n  };\n  $.register$$module$build$src$core$extensions(\"controls_if_tooltip\", CONTROLS_IF_TOOLTIP_EXTENSION$$module$build$src$blocks$logic);\n  var LOGIC_COMPARE_ONCHANGE_MIXIN$$module$build$src$blocks$logic = {\n      onchange: function onchange(a) {\n        this.prevBlocks_ || (this.prevBlocks_ = [null, null]);\n        var b = this.getInputTargetBlock(\"A\");\n        var c = this.getInputTargetBlock(\"B\");\n        b && c && !this.workspace.connectionChecker.doTypeChecks(b.outputConnection, c.outputConnection) && ($.setGroup$$module$build$src$core$events$utils(a.group), a = this.prevBlocks_[0], a !== b && (b.unplug(), !a || a.isDisposed() || a.isShadow() || this.getInput(\"A\").connection.connect(a.outputConnection)), b = this.prevBlocks_[1], b !== c && (c.unplug(), !b || b.isDisposed() || b.isShadow() || this.getInput(\"B\").connection.connect(b.outputConnection)), this.bumpNeighbours(), $.setGroup$$module$build$src$core$events$utils(!1));\n        this.prevBlocks_[0] = this.getInputTargetBlock(\"A\");\n        this.prevBlocks_[1] = this.getInputTargetBlock(\"B\");\n      }\n    },\n    LOGIC_COMPARE_EXTENSION$$module$build$src$blocks$logic = function LOGIC_COMPARE_EXTENSION$$module$build$src$blocks$logic() {\n      this.mixin(LOGIC_COMPARE_ONCHANGE_MIXIN$$module$build$src$blocks$logic);\n    };\n  $.register$$module$build$src$core$extensions(\"logic_compare\", LOGIC_COMPARE_EXTENSION$$module$build$src$blocks$logic);\n  var LOGIC_TERNARY_ONCHANGE_MIXIN$$module$build$src$blocks$logic = {\n    prevParentConnection_: null,\n    onchange: function onchange(a) {\n      var b = this.getInputTargetBlock(\"THEN\"),\n        c = this.getInputTargetBlock(\"ELSE\"),\n        d = this.outputConnection.targetConnection;\n      if ((b || c) && d) for (var e = 0; 2 > e; e++) {\n        var f = 1 === e ? b : c;\n        f && !f.workspace.connectionChecker.doTypeChecks(f.outputConnection, d) && ($.setGroup$$module$build$src$core$events$utils(a.group), d === this.prevParentConnection_ ? (this.unplug(), d.getSourceBlock().bumpNeighbours()) : (f.unplug(), f.bumpNeighbours()), $.setGroup$$module$build$src$core$events$utils(!1));\n      }\n      this.prevParentConnection_ = d;\n    }\n  };\n  $.registerMixin$$module$build$src$core$extensions(\"logic_ternary\", LOGIC_TERNARY_ONCHANGE_MIXIN$$module$build$src$blocks$logic);\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$logic);\n  var module$build$src$blocks$logic = {\n    blocks: blocks$$module$build$src$blocks$logic\n  };\n  var blocks$$module$build$src$blocks$lists = $.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{\n      type: \"lists_create_empty\",\n      message0: \"%{BKY_LISTS_CREATE_EMPTY_TITLE}\",\n      output: \"Array\",\n      style: \"list_blocks\",\n      tooltip: \"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}\",\n      helpUrl: \"%{BKY_LISTS_CREATE_EMPTY_HELPURL}\"\n    }, {\n      type: \"lists_repeat\",\n      message0: \"%{BKY_LISTS_REPEAT_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"ITEM\"\n      }, {\n        type: \"input_value\",\n        name: \"NUM\",\n        check: \"Number\"\n      }],\n      output: \"Array\",\n      style: \"list_blocks\",\n      tooltip: \"%{BKY_LISTS_REPEAT_TOOLTIP}\",\n      helpUrl: \"%{BKY_LISTS_REPEAT_HELPURL}\"\n    }, {\n      type: \"lists_reverse\",\n      message0: \"%{BKY_LISTS_REVERSE_MESSAGE0}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"LIST\",\n        check: \"Array\"\n      }],\n      output: \"Array\",\n      inputsInline: !0,\n      style: \"list_blocks\",\n      tooltip: \"%{BKY_LISTS_REVERSE_TOOLTIP}\",\n      helpUrl: \"%{BKY_LISTS_REVERSE_HELPURL}\"\n    }, {\n      type: \"lists_isEmpty\",\n      message0: \"%{BKY_LISTS_ISEMPTY_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: [\"String\", \"Array\"]\n      }],\n      output: \"Boolean\",\n      style: \"list_blocks\",\n      tooltip: \"%{BKY_LISTS_ISEMPTY_TOOLTIP}\",\n      helpUrl: \"%{BKY_LISTS_ISEMPTY_HELPURL}\"\n    }, {\n      type: \"lists_length\",\n      message0: \"%{BKY_LISTS_LENGTH_TITLE}\",\n      args0: [{\n        type: \"input_value\",\n        name: \"VALUE\",\n        check: [\"String\", \"Array\"]\n      }],\n      output: \"Number\",\n      style: \"list_blocks\",\n      tooltip: \"%{BKY_LISTS_LENGTH_TOOLTIP}\",\n      helpUrl: \"%{BKY_LISTS_LENGTH_HELPURL}\"\n    }]),\n    LISTS_CREATE_WITH$$module$build$src$blocks$lists = {\n      init: function init() {\n        this.setHelpUrl($.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL);\n        this.setStyle(\"list_blocks\");\n        this.itemCount_ = 3;\n        this.updateShape_();\n        this.setOutput(!0, \"Array\");\n        this.setMutator(new $.MutatorIcon$$module$build$src$core$icons$mutator_icon([\"lists_create_with_item\"], this));\n        this.setTooltip($.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP);\n      },\n      mutationToDom: function mutationToDom() {\n        var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n        a.setAttribute(\"items\", String(this.itemCount_));\n        return a;\n      },\n      domToMutation: function domToMutation(a) {\n        a = a.getAttribute(\"items\");\n        if (!a) throw new TypeError(\"element did not have items\");\n        this.itemCount_ = parseInt(a, 10);\n        this.updateShape_();\n      },\n      saveExtraState: function saveExtraState() {\n        return {\n          itemCount: this.itemCount_\n        };\n      },\n      loadExtraState: function loadExtraState(a) {\n        this.itemCount_ = a.itemCount;\n        this.updateShape_();\n      },\n      decompose: function decompose(a) {\n        var b = a.newBlock(\"lists_create_with_container\");\n        b.initSvg();\n        var c = b.getInput(\"STACK\").connection;\n        for (var d = 0; d < this.itemCount_; d++) {\n          var e = a.newBlock(\"lists_create_with_item\");\n          e.initSvg();\n          if (!e.previousConnection) throw Error(\"itemBlock has no previousConnection\");\n          c.connect(e.previousConnection);\n          c = e.nextConnection;\n        }\n        return b;\n      },\n      compose: function compose(a) {\n        var b = a.getInputTargetBlock(\"STACK\");\n        for (a = []; b;) b.isInsertionMarker() || a.push(b.valueConnection_), b = b.getNextBlock();\n        for (b = 0; b < this.itemCount_; b++) {\n          var c = this.getInput(\"ADD\" + b).connection.targetConnection;\n          c && -1 === a.indexOf(c) && c.disconnect();\n        }\n        this.itemCount_ = a.length;\n        this.updateShape_();\n        for (b = 0; b < this.itemCount_; b++) {\n          var _c2 = void 0;\n          null == (_c2 = a[b]) || _c2.reconnect(this, \"ADD\" + b);\n        }\n      },\n      saveConnections: function saveConnections(a) {\n        a = a.getInputTargetBlock(\"STACK\");\n        var b = 0;\n        for (; a;) {\n          if (a.isInsertionMarker()) {\n            a = a.getNextBlock();\n            continue;\n          }\n          var c = this.getInput(\"ADD\" + b);\n          var d = void 0;\n          a.valueConnection_ = null == (d = c) ? void 0 : d.connection.targetConnection;\n          a = a.getNextBlock();\n          b++;\n        }\n      },\n      updateShape_: function updateShape_() {\n        this.itemCount_ && this.getInput(\"EMPTY\") ? this.removeInput(\"EMPTY\") : this.itemCount_ || this.getInput(\"EMPTY\") || this.appendDummyInput(\"EMPTY\").appendField($.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);\n        for (var a = 0; a < this.itemCount_; a++) if (!this.getInput(\"ADD\" + a)) {\n          var b = this.appendValueInput(\"ADD\" + a).setAlign($.Align$$module$build$src$core$inputs$align.RIGHT);\n          0 === a && b.appendField($.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH);\n        }\n        for (a = this.itemCount_; this.getInput(\"ADD\" + a); a++) this.removeInput(\"ADD\" + a);\n      }\n    };\n  blocks$$module$build$src$blocks$lists.lists_create_with = LISTS_CREATE_WITH$$module$build$src$blocks$lists;\n  var LISTS_CREATE_WITH_CONTAINER$$module$build$src$blocks$lists = {\n    init: function init() {\n      this.setStyle(\"list_blocks\");\n      this.appendDummyInput().appendField($.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);\n      this.appendStatementInput(\"STACK\");\n      this.setTooltip($.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  blocks$$module$build$src$blocks$lists.lists_create_with_container = LISTS_CREATE_WITH_CONTAINER$$module$build$src$blocks$lists;\n  var LISTS_CREATE_WITH_ITEM$$module$build$src$blocks$lists = {\n    init: function init() {\n      this.setStyle(\"list_blocks\");\n      this.appendDummyInput().appendField($.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setTooltip($.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  blocks$$module$build$src$blocks$lists.lists_create_with_item = LISTS_CREATE_WITH_ITEM$$module$build$src$blocks$lists;\n  var LISTS_INDEXOF$$module$build$src$blocks$lists = {\n    init: function init() {\n      var _this5 = this;\n      var a = [[$.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST, \"FIRST\"], [$.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST, \"LAST\"]];\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.setOutput(!0, \"Number\");\n      this.appendValueInput(\"VALUE\").setCheck(\"Array\").appendField($.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST);\n      a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: a\n      });\n      if (!a) throw Error(\"field_dropdown not found\");\n      this.appendValueInput(\"FIND\").appendField(a, \"END\");\n      this.setInputsInline(!0);\n      this.setTooltip(function () {\n        return $.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace(\"%1\", _this5.workspace.options.oneBasedIndex ? \"0\" : \"-1\");\n      });\n    }\n  };\n  blocks$$module$build$src$blocks$lists.lists_indexOf = LISTS_INDEXOF$$module$build$src$blocks$lists;\n  var LISTS_GETINDEX$$module$build$src$blocks$lists = {\n    init: function init() {\n      var _this6 = this;\n      var a = [[$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET, \"GET\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE, \"GET_REMOVE\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE, \"REMOVE\"]];\n      this.WHERE_OPTIONS = [[$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START, \"FROM_START\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END, \"FROM_END\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST, \"FIRST\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST, \"LAST\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM, \"RANDOM\"]];\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL);\n      this.setStyle(\"list_blocks\");\n      a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: a\n      });\n      a.setValidator(function (b) {\n        b = \"REMOVE\" === b;\n        this.getSourceBlock().updateStatement_(b);\n      });\n      this.appendValueInput(\"VALUE\").setCheck(\"Array\").appendField($.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST);\n      this.appendDummyInput().appendField(a, \"MODE\").appendField(\"\", \"SPACE\");\n      this.appendDummyInput(\"AT\");\n      $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL && this.appendDummyInput(\"TAIL\").appendField($.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0);\n      this.updateAt_(!0);\n      this.setTooltip(function () {\n        var b = _this6.getFieldValue(\"MODE\"),\n          c = _this6.getFieldValue(\"WHERE\");\n        var d = \"\";\n        switch (b + \" \" + c) {\n          case \"GET FROM_START\":\n          case \"GET FROM_END\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;\n            break;\n          case \"GET FIRST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;\n            break;\n          case \"GET LAST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;\n            break;\n          case \"GET RANDOM\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;\n            break;\n          case \"GET_REMOVE FROM_START\":\n          case \"GET_REMOVE FROM_END\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;\n            break;\n          case \"GET_REMOVE FIRST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;\n            break;\n          case \"GET_REMOVE LAST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;\n            break;\n          case \"GET_REMOVE RANDOM\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;\n            break;\n          case \"REMOVE FROM_START\":\n          case \"REMOVE FROM_END\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;\n            break;\n          case \"REMOVE FIRST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;\n            break;\n          case \"REMOVE LAST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;\n            break;\n          case \"REMOVE RANDOM\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM;\n        }\n        if (\"FROM_START\" === c || \"FROM_END\" === c) d += \"  \" + (\"FROM_START\" === c ? $.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP : $.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace(\"%1\", _this6.workspace.options.oneBasedIndex ? \"#1\" : \"#0\");\n        return d;\n      });\n    },\n    mutationToDom: function mutationToDom() {\n      var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n      a.setAttribute(\"statement\", String(!this.outputConnection));\n      var b = this.getInput(\"AT\") instanceof $.ValueInput$$module$build$src$core$inputs$value_input;\n      a.setAttribute(\"at\", String(b));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" === a.getAttribute(\"statement\");\n      this.updateStatement_(b);\n      a = \"false\" !== a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    saveExtraState: function saveExtraState() {\n      return this.outputConnection ? null : {\n        isStatement: !0\n      };\n    },\n    loadExtraState: function loadExtraState(a) {\n      a.isStatement ? this.updateStatement_(!0) : \"string\" === typeof a && this.domToMutation($.textToDom$$module$build$src$core$utils$xml(a));\n    },\n    updateStatement_: function updateStatement_(a) {\n      a !== !this.outputConnection && (this.unplug(!0, !0), a ? (this.setOutput(!1), this.setPreviousStatement(!0), this.setNextStatement(!0)) : (this.setPreviousStatement(!1), this.setNextStatement(!1), this.setOutput(!0)));\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\");\n      this.removeInput(\"ORDINAL\", !0);\n      a ? (this.appendValueInput(\"AT\").setCheck(\"Number\"), $.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField($.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\");\n      var b = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: this.WHERE_OPTIONS\n      });\n      b.setValidator(function (c) {\n        var d = \"FROM_START\" === c || \"FROM_END\" === c;\n        if (d !== a) {\n          var e = this.getSourceBlock();\n          e.updateAt_(d);\n          e.setFieldValue(c, \"WHERE\");\n          return null;\n        }\n      });\n      this.getInput(\"AT\").appendField(b, \"WHERE\");\n      $.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL && this.moveInputBefore(\"TAIL\", null);\n    }\n  };\n  blocks$$module$build$src$blocks$lists.lists_getIndex = LISTS_GETINDEX$$module$build$src$blocks$lists;\n  var LISTS_SETINDEX$$module$build$src$blocks$lists = {\n    init: function init() {\n      var _this7 = this;\n      var a = [[$.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET, \"SET\"], [$.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT, \"INSERT\"]];\n      this.WHERE_OPTIONS = [[$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START, \"FROM_START\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END, \"FROM_END\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST, \"FIRST\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST, \"LAST\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM, \"RANDOM\"]];\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"LIST\").setCheck(\"Array\").appendField($.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST);\n      a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: a\n      });\n      this.appendDummyInput().appendField(a, \"MODE\").appendField(\"\", \"SPACE\");\n      this.appendDummyInput(\"AT\");\n      this.appendValueInput(\"TO\").appendField($.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO);\n      this.setInputsInline(!0);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setTooltip($.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP);\n      this.updateAt_(!0);\n      this.setTooltip(function () {\n        var b = _this7.getFieldValue(\"MODE\"),\n          c = _this7.getFieldValue(\"WHERE\");\n        var d = \"\";\n        switch (b + \" \" + c) {\n          case \"SET FROM_START\":\n          case \"SET FROM_END\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;\n            break;\n          case \"SET FIRST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;\n            break;\n          case \"SET LAST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;\n            break;\n          case \"SET RANDOM\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;\n            break;\n          case \"INSERT FROM_START\":\n          case \"INSERT FROM_END\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;\n            break;\n          case \"INSERT FIRST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;\n            break;\n          case \"INSERT LAST\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;\n            break;\n          case \"INSERT RANDOM\":\n            d = $.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM;\n        }\n        if (\"FROM_START\" === c || \"FROM_END\" === c) d += \"  \" + $.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace(\"%1\", _this7.workspace.options.oneBasedIndex ? \"#1\" : \"#0\");\n        return d;\n      });\n    },\n    mutationToDom: function mutationToDom() {\n      var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\"),\n        b = this.getInput(\"AT\") instanceof $.ValueInput$$module$build$src$core$inputs$value_input;\n      a.setAttribute(\"at\", String(b));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"false\" !== a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    saveExtraState: function saveExtraState() {\n      return null;\n    },\n    loadExtraState: function loadExtraState() {},\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\");\n      this.removeInput(\"ORDINAL\", !0);\n      a ? (this.appendValueInput(\"AT\").setCheck(\"Number\"), $.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField($.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\");\n      var b = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: this.WHERE_OPTIONS\n      });\n      b.setValidator(function (c) {\n        var d = \"FROM_START\" === c || \"FROM_END\" === c;\n        if (d !== a) {\n          var e = this.getSourceBlock();\n          e.updateAt_(d);\n          e.setFieldValue(c, \"WHERE\");\n          return null;\n        }\n      });\n      this.moveInputBefore(\"AT\", \"TO\");\n      this.getInput(\"ORDINAL\") && this.moveInputBefore(\"ORDINAL\", \"TO\");\n      this.getInput(\"AT\").appendField(b, \"WHERE\");\n    }\n  };\n  blocks$$module$build$src$blocks$lists.lists_setIndex = LISTS_SETINDEX$$module$build$src$blocks$lists;\n  var LISTS_GETSUBLIST$$module$build$src$blocks$lists = {\n    init: function init() {\n      this.WHERE_OPTIONS_1 = [[$.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START, \"FROM_START\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END, \"FROM_END\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST, \"FIRST\"]];\n      this.WHERE_OPTIONS_2 = [[$.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START, \"FROM_START\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END, \"FROM_END\"], [$.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST, \"LAST\"]];\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"LIST\").setCheck(\"Array\").appendField($.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);\n      this.appendDummyInput(\"AT1\");\n      this.appendDummyInput(\"AT2\");\n      $.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL && this.appendDummyInput(\"TAIL\").appendField($.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"Array\");\n      this.updateAt_(1, !0);\n      this.updateAt_(2, !0);\n      this.setTooltip($.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n      var b = this.getInput(\"AT1\") instanceof $.ValueInput$$module$build$src$core$inputs$value_input;\n      a.setAttribute(\"at1\", String(b));\n      b = this.getInput(\"AT2\") instanceof $.ValueInput$$module$build$src$core$inputs$value_input;\n      a.setAttribute(\"at2\", String(b));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" === a.getAttribute(\"at1\");\n      a = \"true\" === a.getAttribute(\"at2\");\n      this.updateAt_(1, b);\n      this.updateAt_(2, a);\n    },\n    saveExtraState: function saveExtraState() {\n      return null;\n    },\n    loadExtraState: function loadExtraState() {},\n    updateAt_: function updateAt_(a, b) {\n      this.removeInput(\"AT\" + a);\n      this.removeInput(\"ORDINAL\" + a, !0);\n      b ? (this.appendValueInput(\"AT\" + a).setCheck(\"Number\"), $.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\" + a).appendField($.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\" + a);\n      var c = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: this[\"WHERE_OPTIONS_\" + a]\n      });\n      c.setValidator(function (d) {\n        var e = \"FROM_START\" === d || \"FROM_END\" === d;\n        if (e !== b) {\n          var f = this.getSourceBlock();\n          f.updateAt_(a, e);\n          f.setFieldValue(d, \"WHERE\" + a);\n          return null;\n        }\n      });\n      this.getInput(\"AT\" + a).appendField(c, \"WHERE\" + a);\n      1 === a && (this.moveInputBefore(\"AT1\", \"AT2\"), this.getInput(\"ORDINAL1\") && this.moveInputBefore(\"ORDINAL1\", \"AT2\"));\n      $.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL && this.moveInputBefore(\"TAIL\", null);\n    }\n  };\n  blocks$$module$build$src$blocks$lists.lists_getSublist = LISTS_GETSUBLIST$$module$build$src$blocks$lists;\n  blocks$$module$build$src$blocks$lists.lists_sort = {\n    init: function init() {\n      this.jsonInit({\n        message0: \"%{BKY_LISTS_SORT_TITLE}\",\n        args0: [{\n          type: \"field_dropdown\",\n          name: \"TYPE\",\n          options: [[\"%{BKY_LISTS_SORT_TYPE_NUMERIC}\", \"NUMERIC\"], [\"%{BKY_LISTS_SORT_TYPE_TEXT}\", \"TEXT\"], [\"%{BKY_LISTS_SORT_TYPE_IGNORECASE}\", \"IGNORE_CASE\"]]\n        }, {\n          type: \"field_dropdown\",\n          name: \"DIRECTION\",\n          options: [[\"%{BKY_LISTS_SORT_ORDER_ASCENDING}\", \"1\"], [\"%{BKY_LISTS_SORT_ORDER_DESCENDING}\", \"-1\"]]\n        }, {\n          type: \"input_value\",\n          name: \"LIST\",\n          check: \"Array\"\n        }],\n        output: \"Array\",\n        style: \"list_blocks\",\n        tooltip: \"%{BKY_LISTS_SORT_TOOLTIP}\",\n        helpUrl: \"%{BKY_LISTS_SORT_HELPURL}\"\n      });\n    }\n  };\n  blocks$$module$build$src$blocks$lists.lists_split = {\n    init: function init() {\n      var _this8 = this;\n      var a = $.fromJson$$module$build$src$core$field_registry({\n        type: \"field_dropdown\",\n        options: [[$.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT, \"SPLIT\"], [$.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST, \"JOIN\"]]\n      });\n      if (!a) throw Error(\"field_dropdown not found\");\n      a.setValidator(function (b) {\n        _this8.updateType_(b);\n      });\n      this.setHelpUrl($.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"INPUT\").setCheck(\"String\").appendField(a, \"MODE\");\n      this.appendValueInput(\"DELIM\").setCheck(\"String\").appendField($.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"Array\");\n      this.setTooltip(function () {\n        var b = _this8.getFieldValue(\"MODE\");\n        if (\"SPLIT\" === b) return $.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;\n        if (\"JOIN\" === b) return $.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;\n        throw Error(\"Unknown mode: \" + b);\n      });\n    },\n    updateType_: function updateType_(a) {\n      if (this.getFieldValue(\"MODE\") !== a) {\n        var b = this.getInput(\"INPUT\").connection;\n        b.setShadowDom(null);\n        var c = b.targetBlock();\n        c && (b.disconnect(), c.isShadow() ? c.dispose(!1) : this.bumpNeighbours());\n      }\n      \"SPLIT\" === a ? (this.outputConnection.setCheck(\"Array\"), this.getInput(\"INPUT\").setCheck(\"String\")) : (this.outputConnection.setCheck(\"String\"), this.getInput(\"INPUT\").setCheck(\"Array\"));\n    },\n    mutationToDom: function mutationToDom() {\n      var a = $.createElement$$module$build$src$core$utils$xml(\"mutation\");\n      a.setAttribute(\"mode\", this.getFieldValue(\"MODE\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"mode\"));\n    },\n    saveExtraState: function saveExtraState() {\n      return null;\n    },\n    loadExtraState: function loadExtraState() {}\n  };\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$lists);\n  var module$build$src$blocks$lists = {\n    blocks: blocks$$module$build$src$blocks$lists\n  };\n  var blocks$$module$build$src$blocks$colour = $.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{\n    type: \"colour_picker\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_colour\",\n      name: \"COLOUR\",\n      colour: \"#ff0000\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_PICKER_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_PICKER_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"colour_random\",\n    message0: \"%{BKY_COLOUR_RANDOM_TITLE}\",\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_RANDOM_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_RANDOM_TOOLTIP}\"\n  }, {\n    type: \"colour_rgb\",\n    message0: \"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"RED\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"GREEN\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"BLUE\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_RGB_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_RGB_TOOLTIP}\"\n  }, {\n    type: \"colour_blend\",\n    message0: \"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"COLOUR1\",\n      check: \"Colour\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"COLOUR2\",\n      check: \"Colour\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"RATIO\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_BLEND_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_BLEND_TOOLTIP}\"\n  }]);\n  $.defineBlocks$$module$build$src$core$common(blocks$$module$build$src$blocks$colour);\n  var module$build$src$blocks$colour = {\n    blocks: blocks$$module$build$src$blocks$colour\n  };\n  var blocks$$module$build$src$blocks$blocks = Object.assign({}, blocks$$module$build$src$blocks$colour, blocks$$module$build$src$blocks$lists, blocks$$module$build$src$blocks$logic, blocks$$module$build$src$blocks$loops, blocks$$module$build$src$blocks$math, blocks$$module$build$src$blocks$procedures, blocks$$module$build$src$blocks$variables, blocks$$module$build$src$blocks$variables_dynamic),\n    module$build$src$blocks$blocks = {\n      blocks: blocks$$module$build$src$blocks$blocks,\n      colour: module$build$src$blocks$colour,\n      lists: module$build$src$blocks$lists,\n      loops: module$build$src$blocks$loops,\n      math: module$build$src$blocks$math,\n      procedures: module$build$src$blocks$procedures,\n      texts: module$build$src$blocks$text,\n      variables: module$build$src$blocks$variables,\n      variablesDynamic: module$build$src$blocks$variables_dynamic\n    };\n  module$build$src$blocks$blocks.__namespace__ = $;\n  return module$build$src$blocks$blocks;\n});","map":{"version":3,"names":["blocks$$module$build$src$blocks$variables_dynamic","$","createBlockDefinitionsFromJsonArray$$module$build$src$core$common","type","message0","args0","name","variable","output","style","helpUrl","tooltip","extensions","previousStatement","nextStatement","CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN$$module$build$src$blocks$variables_dynamic","customContextMenu","a","isInFlyout","b","c","Msg$$module$build$src$core$msg","VARIABLES_GET_CREATE_SET","VARIABLES_SET_CREATE_GET","d","getField","fields","VAR","saveState","push","enabled","workspace","remainingCapacity","text","replace","getText","callback","callbackFactory$$module$build$src$core$contextmenu","RENAME_VARIABLE","renameOptionCallbackFactory$$module$build$src$blocks$variables_dynamic","DELETE_VARIABLE","deleteOptionCallbackFactory$$module$build$src$blocks$variables_dynamic","unshift","onchange","getFieldValue","getVariable$$module$build$src$core$variables","outputConnection","setCheck","getInput","connection","getVariable","renameVariable$$module$build$src$core$variables","deleteVariableById","getId","refreshToolboxSelection","registerMixin$$module$build$src$core$extensions","defineBlocks$$module$build$src$core$common","module$build$src$blocks$variables_dynamic","blocks","blocks$$module$build$src$blocks$variables","CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN$$module$build$src$blocks$variables","renameOptionCallbackFactory$$module$build$src$blocks$variables","deleteOptionCallbackFactory$$module$build$src$blocks$variables","module$build$src$blocks$variables","blocks$$module$build$src$blocks$text","src","width","height","alt","mutator","enableContextMenu","check","options","inputsInline","GET_SUBSTRING_BLOCK$$module$build$src$blocks$text","init","WHERE_OPTIONS_1","TEXT_GET_SUBSTRING_START_FROM_START","TEXT_GET_SUBSTRING_START_FROM_END","TEXT_GET_SUBSTRING_START_FIRST","WHERE_OPTIONS_2","TEXT_GET_SUBSTRING_END_FROM_START","TEXT_GET_SUBSTRING_END_FROM_END","TEXT_GET_SUBSTRING_END_LAST","setHelpUrl","TEXT_GET_SUBSTRING_HELPURL","setStyle","appendValueInput","appendField","TEXT_GET_SUBSTRING_INPUT_IN_TEXT","appendDummyInput","TEXT_GET_SUBSTRING_TAIL","setInputsInline","setOutput","updateAt_","setTooltip","TEXT_GET_SUBSTRING_TOOLTIP","mutationToDom","createElement$$module$build$src$core$utils$xml","ValueInput$$module$build$src$core$inputs$value_input","setAttribute","concat","domToMutation","getAttribute","removeInput","ORDINAL_NUMBER_SUFFIX","fromJson$$module$build$src$core$field_registry","setValidator","e","f","getSourceBlock","setFieldValue","moveInputBefore","text_getSubstring","text_changeCase","TEXT_CHANGECASE_OPERATOR_UPPERCASE","TEXT_CHANGECASE_OPERATOR_LOWERCASE","TEXT_CHANGECASE_OPERATOR_TITLECASE","TEXT_CHANGECASE_HELPURL","TEXT_CHANGECASE_TOOLTIP","text_trim","TEXT_TRIM_OPERATOR_BOTH","TEXT_TRIM_OPERATOR_LEFT","TEXT_TRIM_OPERATOR_RIGHT","TEXT_TRIM_HELPURL","TEXT_TRIM_TOOLTIP","text_print","jsonInit","TEXT_PRINT_TITLE","TEXT_PRINT_TOOLTIP","TEXT_PRINT_HELPURL","PROMPT_COMMON$$module$build$src$blocks$text","updateType_","text_prompt_ext","Object","assign","_this","TEXT_PROMPT_TYPE_TEXT","TEXT_PROMPT_TYPE_NUMBER","TEXT_PROMPT_HELPURL","TEXT_PROMPT_TOOLTIP_TEXT","TEXT_PROMPT_TOOLTIP_NUMBER","TEXT_PROMPT_BLOCK$$module$build$src$blocks$text","_this2","mixin","QUOTE_IMAGE_MIXIN$$module$build$src$blocks$text","newQuote_","text_prompt","text_count","TEXT_COUNT_MESSAGE0","TEXT_COUNT_TOOLTIP","TEXT_COUNT_HELPURL","text_replace","TEXT_REPLACE_MESSAGE0","TEXT_REPLACE_TOOLTIP","TEXT_REPLACE_HELPURL","text_reverse","TEXT_REVERSE_MESSAGE0","TEXT_REVERSE_TOOLTIP","TEXT_REVERSE_HELPURL","QUOTE_IMAGE_LEFT_DATAURI","QUOTE_IMAGE_RIGHT_DATAURI","QUOTE_IMAGE_WIDTH","QUOTE_IMAGE_HEIGHT","quoteField_","inputList","fieldRow","insertFieldAt","console","warn","toDevString","RTL","QUOTES_EXTENSION$$module$build$src$blocks$text","JOIN_MUTATOR_MIXIN$$module$build$src$blocks$text","itemCount_","parseInt","updateShape_","saveExtraState","itemCount","loadExtraState","decompose","newBlock","initSvg","connect","previousConnection","nextConnection","compose","getInputTargetBlock","isInsertionMarker","valueConnection_","getNextBlock","targetConnection","indexOf","disconnect","length","reconnect","saveConnections","setAlign","Align$$module$build$src$core$inputs$align","RIGHT","TEXT_JOIN_TITLE_CREATEWITH","JOIN_EXTENSION$$module$build$src$blocks$text","setMutator","MutatorIcon$$module$build$src$core$icons$mutator_icon","register$$module$build$src$core$extensions","buildTooltipWithFieldText$$module$build$src$core$extensions","INDEXOF_TOOLTIP_EXTENSION$$module$build$src$blocks$text","_this3","TEXT_INDEXOF_TOOLTIP","oneBasedIndex","CHARAT_MUTATOR_MIXIN$$module$build$src$blocks$text","isAt_","TEXT_CHARAT_TAIL","CHARAT_EXTENSION$$module$build$src$blocks$text","_this4","TEXT_CHARAT_TOOLTIP","LISTS_INDEX_FROM_START_TOOLTIP","LISTS_INDEX_FROM_END_TOOLTIP","registerMutator$$module$build$src$core$extensions","module$build$src$blocks$text","blocks$$module$build$src$blocks$procedures","PROCEDURE_DEF_COMMON$$module$build$src$blocks$procedures","setStatements_","hasStatements_","appendStatementInput","PROCEDURES_DEFNORETURN_DO","updateParams_","arguments_","PROCEDURES_BEFORE_PARAMS","join","disable$$module$build$src$core$events$utils","enable$$module$build$src$core$events$utils","argumentVarModels_","paramIds_","appendChild","childNodes","nodeName","toLowerCase","getOrCreateVariablePackage$$module$build$src$core$variables","log","mutateCallers$$module$build$src$core$procedures","create","params","id","hasStatements","g","createTextNode$$module$build$src$core$utils$xml","domToBlock$$module$build$src$core$xml","targetBlock","statementConnection_","unplug","bumpNeighbours","getVars","getVarModels","renameVarById","getVariableById","displayRenamedVar_","updateVarName","getIcon","TYPE","bubbleIsVisible","getWorkspace","getAllBlocks","Names$$module$build$src$core$names","equals","callType_","extraState","PROCEDURES_CREATE_DO","isCollapsed","procedures_defnoreturn","findLegalName$$module$build$src$core$procedures","rename$$module$build$src$core$procedures","setSpellcheck","PROCEDURES_DEFNORETURN_TITLE","comments","parentWorkspace","PROCEDURES_DEFNORETURN_COMMENT","setCommentText","PROCEDURES_DEFNORETURN_TOOLTIP","PROCEDURES_DEFNORETURN_HELPURL","getProcedureDef","procedures_defreturn","PROCEDURES_DEFRETURN_TITLE","Align$$module$build$src$core$inputs$input","PROCEDURES_DEFRETURN_RETURN","PROCEDURES_DEFRETURN_COMMENT","PROCEDURES_DEFRETURN_TOOLTIP","PROCEDURES_DEFRETURN_HELPURL","PROCEDURES_MUTATORCONTAINER$$module$build$src$blocks$procedures","PROCEDURES_MUTATORCONTAINER_TITLE","PROCEDURES_ALLOW_STATEMENTS","checked","PROCEDURES_MUTATORCONTAINER_TOOLTIP","contextMenu","procedures_mutatorcontainer","PROCEDURES_MUTATORARGUMENT$$module$build$src$blocks$procedures","DEFAULT_ARG$$module$build$src$core$procedures","validator_","oldShowEditorFn_","showEditor_","createdVariables_","PROCEDURES_MUTATORARG_TITLE","setPreviousStatement","setNextStatement","PROCEDURES_MUTATORARG_TOOLTIP","onFinishEditing_","deleteIntermediateVars_","getRootWorkspace","targetWorkspace","renameVariableById","createVariable","procedures_mutatorarg","PROCEDURE_CALL_COMMON$$module$build$src$blocks$procedures","getProcedureCall","renameProcedure","PROCEDURES_CALLRETURN_TOOLTIP","PROCEDURES_CALLNORETURN_TOOLTIP","setProcedureParameters_","getDefinition$$module$build$src$core$procedures","setCollapsed","quarkConnections_","quarkIds_","RangeError","setValue","PROCEDURES_CALL_BEFORE_PARAMS","removeField","fill","isFlyout","recordUndo","CREATE$$module$build$src$core$events$utils","ids","defType_","JSON","stringify","setGroup$$module$build$src$core$events$utils","group","getRelativeToSurfaceXY","y","config$$module$build$src$core$config","snapRadius","x","domToWorkspace$$module$build$src$core$xml","DELETE$$module$build$src$core$events$utils","dispose","CHANGE$$module$build$src$core$events$utils","element","blockId","getGroup$$module$build$src$core$events$utils","newValue","previousEnabledState_","isEnabled","setEnabled","isMovable","PROCEDURES_HIGHLIGHT_DEF","centerOnBlock","select","procedures_callnoreturn","PROCEDURES_CALLNORETURN_HELPURL","procedures_callreturn","PROCEDURES_CALLRETURN_HELPURL","PROCEDURES_IFRETURN$$module$build$src$blocks$procedures","CONTROLS_IF_MSG_IF","PROCEDURES_IFRETURN_TOOLTIP","PROCEDURES_IFRETURN_HELPURL","hasReturnValue_","String","Number","isDragging","MOVE$$module$build$src$core$events$utils","FUNCTION_TYPES","getSurroundParent","setWarningText","PROCEDURES_IFRETURN_WARNING","procedures_ifreturn","module$build$src$blocks$procedures","blocks$$module$build$src$blocks$math","value","TOOLTIPS_BY_OP$$module$build$src$blocks$math","ADD","MINUS","MULTIPLY","DIVIDE","POWER","ROOT","ABS","NEG","LN","LOG10","EXP","POW10","SIN","COS","TAN","ASIN","ACOS","ATAN","SUM","MIN","MAX","AVERAGE","MEDIAN","MODE","STD_DEV","RANDOM","buildTooltipForDropdown$$module$build$src$core$extensions","IS_DIVISIBLEBY_MUTATOR_MIXIN$$module$build$src$blocks$math","IS_DIVISIBLE_MUTATOR_EXTENSION$$module$build$src$blocks$math","LIST_MODES_MUTATOR_MIXIN$$module$build$src$blocks$math","TypeError","LIST_MODES_MUTATOR_EXTENSION$$module$build$src$blocks$math","bind","module$build$src$blocks$math","blocks$$module$build$src$blocks$loops","message1","args1","min","precision","align","suppressPrefixSuffix","WHILE_UNTIL_TOOLTIPS$$module$build$src$blocks$loops","WHILE","UNTIL","BREAK_CONTINUE_TOOLTIPS$$module$build$src$blocks$loops","BREAK","CONTINUE","CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN$$module$build$src$blocks$loops","loopTypes$$module$build$src$blocks$loops","Set","CONTROL_FLOW_IN_LOOP_CHECK_MIXIN$$module$build$src$blocks$loops","getSurroundLoop","has","CONTROLS_FLOW_STATEMENTS_WARNING","module$build$src$blocks$loops","loopTypes","blocks$$module$build$src$blocks$logic","message2","args2","TOOLTIPS_BY_OP$$module$build$src$blocks$logic","EQ","NEQ","LT","LTE","GT","GTE","AND","OR","CONTROLS_IF_MUTATOR_MIXIN$$module$build$src$blocks$logic","elseifCount_","elseCount_","rebuildShape_","elseIfCount","hasElse","reconnectChildBlocks_","CONTROLS_IF_MSG_ELSEIF","CONTROLS_IF_MSG_THEN","CONTROLS_IF_MSG_ELSE","CONTROLS_IF_TOOLTIP_EXTENSION$$module$build$src$blocks$logic","CONTROLS_IF_TOOLTIP_2","CONTROLS_IF_TOOLTIP_3","CONTROLS_IF_TOOLTIP_4","CONTROLS_IF_TOOLTIP_1","LOGIC_COMPARE_ONCHANGE_MIXIN$$module$build$src$blocks$logic","prevBlocks_","connectionChecker","doTypeChecks","isDisposed","isShadow","LOGIC_COMPARE_EXTENSION$$module$build$src$blocks$logic","LOGIC_TERNARY_ONCHANGE_MIXIN$$module$build$src$blocks$logic","prevParentConnection_","module$build$src$blocks$logic","blocks$$module$build$src$blocks$lists","LISTS_CREATE_WITH$$module$build$src$blocks$lists","LISTS_CREATE_WITH_HELPURL","LISTS_CREATE_WITH_TOOLTIP","Error","LISTS_CREATE_EMPTY_TITLE","LISTS_CREATE_WITH_INPUT_WITH","lists_create_with","LISTS_CREATE_WITH_CONTAINER$$module$build$src$blocks$lists","LISTS_CREATE_WITH_CONTAINER_TITLE_ADD","LISTS_CREATE_WITH_CONTAINER_TOOLTIP","lists_create_with_container","LISTS_CREATE_WITH_ITEM$$module$build$src$blocks$lists","LISTS_CREATE_WITH_ITEM_TITLE","LISTS_CREATE_WITH_ITEM_TOOLTIP","lists_create_with_item","LISTS_INDEXOF$$module$build$src$blocks$lists","_this5","LISTS_INDEX_OF_FIRST","LISTS_INDEX_OF_LAST","LISTS_INDEX_OF_HELPURL","LISTS_INDEX_OF_INPUT_IN_LIST","LISTS_INDEX_OF_TOOLTIP","lists_indexOf","LISTS_GETINDEX$$module$build$src$blocks$lists","_this6","LISTS_GET_INDEX_GET","LISTS_GET_INDEX_GET_REMOVE","LISTS_GET_INDEX_REMOVE","WHERE_OPTIONS","LISTS_GET_INDEX_FROM_START","LISTS_GET_INDEX_FROM_END","LISTS_GET_INDEX_FIRST","LISTS_GET_INDEX_LAST","LISTS_GET_INDEX_RANDOM","LISTS_GET_INDEX_HELPURL","updateStatement_","LISTS_GET_INDEX_INPUT_IN_LIST","LISTS_GET_INDEX_TAIL","LISTS_GET_INDEX_TOOLTIP_GET_FROM","LISTS_GET_INDEX_TOOLTIP_GET_FIRST","LISTS_GET_INDEX_TOOLTIP_GET_LAST","LISTS_GET_INDEX_TOOLTIP_GET_RANDOM","LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM","LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST","LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST","LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM","LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM","LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST","LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST","LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM","isStatement","textToDom$$module$build$src$core$utils$xml","lists_getIndex","LISTS_SETINDEX$$module$build$src$blocks$lists","_this7","LISTS_SET_INDEX_SET","LISTS_SET_INDEX_INSERT","LISTS_SET_INDEX_HELPURL","LISTS_SET_INDEX_INPUT_IN_LIST","LISTS_SET_INDEX_INPUT_TO","LISTS_SET_INDEX_TOOLTIP","LISTS_SET_INDEX_TOOLTIP_SET_FROM","LISTS_SET_INDEX_TOOLTIP_SET_FIRST","LISTS_SET_INDEX_TOOLTIP_SET_LAST","LISTS_SET_INDEX_TOOLTIP_SET_RANDOM","LISTS_SET_INDEX_TOOLTIP_INSERT_FROM","LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST","LISTS_SET_INDEX_TOOLTIP_INSERT_LAST","LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM","lists_setIndex","LISTS_GETSUBLIST$$module$build$src$blocks$lists","LISTS_GET_SUBLIST_START_FROM_START","LISTS_GET_SUBLIST_START_FROM_END","LISTS_GET_SUBLIST_START_FIRST","LISTS_GET_SUBLIST_END_FROM_START","LISTS_GET_SUBLIST_END_FROM_END","LISTS_GET_SUBLIST_END_LAST","LISTS_GET_SUBLIST_HELPURL","LISTS_GET_SUBLIST_INPUT_IN_LIST","LISTS_GET_SUBLIST_TAIL","LISTS_GET_SUBLIST_TOOLTIP","lists_getSublist","lists_sort","lists_split","_this8","LISTS_SPLIT_LIST_FROM_TEXT","LISTS_SPLIT_TEXT_FROM_LIST","LISTS_SPLIT_HELPURL","LISTS_SPLIT_WITH_DELIMITER","LISTS_SPLIT_TOOLTIP_SPLIT","LISTS_SPLIT_TOOLTIP_JOIN","setShadowDom","module$build$src$blocks$lists","blocks$$module$build$src$blocks$colour","colour","module$build$src$blocks$colour","blocks$$module$build$src$blocks$blocks","module$build$src$blocks$blocks","lists","loops","math","procedures","texts","variables","variablesDynamic"],"sources":["/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/variables_dynamic.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/variables.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/text.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/procedures.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/math.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/loops.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/logic.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/lists.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/colour.ts","/Users/michaelbryant/Desktop/Littlearn/littlearn-web/node_modules/blockly/blocks/blocks.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.variablesDynamic\n\nimport * as ContextMenu from '../core/contextmenu.js';\nimport * as Extensions from '../core/extensions.js';\nimport * as Variables from '../core/variables.js';\nimport {Abstract as AbstractEvent} from '../core/events/events_abstract.js';\nimport type {Block} from '../core/block.js';\nimport type {\n  ContextMenuOption,\n  LegacyContextMenuOption,\n} from '../core/contextmenu_registry.js';\nimport {FieldVariable} from '../core/field_variable.js';\nimport {Msg} from '../core/msg.js';\nimport type {WorkspaceSvg} from '../core/workspace_svg.js';\nimport {\n  createBlockDefinitionsFromJsonArray,\n  defineBlocks,\n} from '../core/common.js';\nimport '../core/field_label.js';\n\n/**\n * A dictionary of the block definitions provided by this module.\n */\nexport const blocks = createBlockDefinitionsFromJsonArray([\n  // Block for variable getter.\n  {\n    'type': 'variables_get_dynamic',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_VARIABLES_DEFAULT_NAME}',\n      },\n    ],\n    'output': null,\n    'style': 'variable_dynamic_blocks',\n    'helpUrl': '%{BKY_VARIABLES_GET_HELPURL}',\n    'tooltip': '%{BKY_VARIABLES_GET_TOOLTIP}',\n    'extensions': ['contextMenu_variableDynamicSetterGetter'],\n  },\n  // Block for variable setter.\n  {\n    'type': 'variables_set_dynamic',\n    'message0': '%{BKY_VARIABLES_SET}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_VARIABLES_DEFAULT_NAME}',\n      },\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'variable_dynamic_blocks',\n    'tooltip': '%{BKY_VARIABLES_SET_TOOLTIP}',\n    'helpUrl': '%{BKY_VARIABLES_SET_HELPURL}',\n    'extensions': ['contextMenu_variableDynamicSetterGetter'],\n  },\n]);\n\n/** Type of a block that has CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN */\ntype VariableBlock = Block & VariableMixin;\ninterface VariableMixin extends VariableMixinType {}\ntype VariableMixinType =\n  typeof CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN;\n\n/**\n * Mixin to add context menu items to create getter/setter blocks for this\n * setter/getter.\n * Used by blocks 'variables_set_dynamic' and 'variables_get_dynamic'.\n */\nconst CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n  /**\n   * Add menu option to create getter/setter block for this setter/getter.\n   *\n   * @param options List of menu options to add to.\n   */\n  customContextMenu: function (\n    this: VariableBlock,\n    options: Array<ContextMenuOption | LegacyContextMenuOption>,\n  ) {\n    // Getter blocks have the option to create a setter block, and vice versa.\n    if (!this.isInFlyout) {\n      let oppositeType;\n      let contextMenuMsg;\n      if (this.type === 'variables_get_dynamic') {\n        oppositeType = 'variables_set_dynamic';\n        contextMenuMsg = Msg['VARIABLES_GET_CREATE_SET'];\n      } else {\n        oppositeType = 'variables_get_dynamic';\n        contextMenuMsg = Msg['VARIABLES_SET_CREATE_GET'];\n      }\n\n      const varField = this.getField('VAR')!;\n      const newVarBlockState = {\n        type: oppositeType,\n        fields: {VAR: varField.saveState(true)},\n      };\n\n      options.push({\n        enabled: this.workspace.remainingCapacity() > 0,\n        text: contextMenuMsg.replace('%1', varField.getText()),\n        callback: ContextMenu.callbackFactory(this, newVarBlockState),\n      });\n    } else {\n      if (\n        this.type === 'variables_get_dynamic' ||\n        this.type === 'variables_get_reporter_dynamic'\n      ) {\n        const renameOption = {\n          text: Msg['RENAME_VARIABLE'],\n          enabled: true,\n          callback: renameOptionCallbackFactory(this),\n        };\n        const name = this.getField('VAR')!.getText();\n        const deleteOption = {\n          text: Msg['DELETE_VARIABLE'].replace('%1', name),\n          enabled: true,\n          callback: deleteOptionCallbackFactory(this),\n        };\n        options.unshift(renameOption);\n        options.unshift(deleteOption);\n      }\n    }\n  },\n  /**\n   * Called whenever anything on the workspace changes.\n   * Set the connection type for this block.\n   *\n   * @param _e Change event.\n   */\n  onchange: function (this: VariableBlock, _e: AbstractEvent) {\n    const id = this.getFieldValue('VAR');\n    const variableModel = Variables.getVariable(this.workspace, id)!;\n    if (this.type === 'variables_get_dynamic') {\n      this.outputConnection!.setCheck(variableModel.type);\n    } else {\n      this.getInput('VALUE')!.connection!.setCheck(variableModel.type);\n    }\n  },\n};\n\n/**\n * Factory for callbacks for rename variable dropdown menu option\n * associated with a variable getter block.\n *\n * @param block The block with the variable to rename.\n * @returns A function that renames the variable.\n */\nconst renameOptionCallbackFactory = function (block: VariableBlock) {\n  return function () {\n    const workspace = block.workspace;\n    const variableField = block.getField('VAR') as FieldVariable;\n    const variable = variableField.getVariable()!;\n    Variables.renameVariable(workspace, variable);\n  };\n};\n\n/**\n * Factory for callbacks for delete variable dropdown menu option\n * associated with a variable getter block.\n *\n * @param block The block with the variable to delete.\n * @returns A function that deletes the variable.\n */\nconst deleteOptionCallbackFactory = function (block: VariableBlock) {\n  return function () {\n    const workspace = block.workspace;\n    const variableField = block.getField('VAR') as FieldVariable;\n    const variable = variableField.getVariable()!;\n    workspace.deleteVariableById(variable.getId());\n    (workspace as WorkspaceSvg).refreshToolboxSelection();\n  };\n};\n\nExtensions.registerMixin(\n  'contextMenu_variableDynamicSetterGetter',\n  CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN,\n);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.variables\n\nimport * as ContextMenu from '../core/contextmenu.js';\nimport * as Extensions from '../core/extensions.js';\nimport * as Variables from '../core/variables.js';\nimport type {Block} from '../core/block.js';\nimport type {\n  ContextMenuOption,\n  LegacyContextMenuOption,\n} from '../core/contextmenu_registry.js';\nimport {FieldVariable} from '../core/field_variable.js';\nimport {Msg} from '../core/msg.js';\nimport type {WorkspaceSvg} from '../core/workspace_svg.js';\nimport {\n  createBlockDefinitionsFromJsonArray,\n  defineBlocks,\n} from '../core/common.js';\nimport '../core/field_label.js';\n\n/**\n * A dictionary of the block definitions provided by this module.\n */\nexport const blocks = createBlockDefinitionsFromJsonArray([\n  // Block for variable getter.\n  {\n    'type': 'variables_get',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_VARIABLES_DEFAULT_NAME}',\n      },\n    ],\n    'output': null,\n    'style': 'variable_blocks',\n    'helpUrl': '%{BKY_VARIABLES_GET_HELPURL}',\n    'tooltip': '%{BKY_VARIABLES_GET_TOOLTIP}',\n    'extensions': ['contextMenu_variableSetterGetter'],\n  },\n  // Block for variable setter.\n  {\n    'type': 'variables_set',\n    'message0': '%{BKY_VARIABLES_SET}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_VARIABLES_DEFAULT_NAME}',\n      },\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'variable_blocks',\n    'tooltip': '%{BKY_VARIABLES_SET_TOOLTIP}',\n    'helpUrl': '%{BKY_VARIABLES_SET_HELPURL}',\n    'extensions': ['contextMenu_variableSetterGetter'],\n  },\n]);\n\n/** Type of a block that has CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN */\ntype VariableBlock = Block & VariableMixin;\ninterface VariableMixin extends VariableMixinType {}\ntype VariableMixinType =\n  typeof CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN;\n\n/**\n * Mixin to add context menu items to create getter/setter blocks for this\n * setter/getter.\n * Used by blocks 'variables_set' and 'variables_get'.\n */\nconst CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n  /**\n   * Add menu option to create getter/setter block for this setter/getter.\n   *\n   * @param options List of menu options to add to.\n   */\n  customContextMenu: function (\n    this: VariableBlock,\n    options: Array<ContextMenuOption | LegacyContextMenuOption>,\n  ) {\n    if (!this.isInFlyout) {\n      let oppositeType;\n      let contextMenuMsg;\n      // Getter blocks have the option to create a setter block, and vice versa.\n      if (this.type === 'variables_get') {\n        oppositeType = 'variables_set';\n        contextMenuMsg = Msg['VARIABLES_GET_CREATE_SET'];\n      } else {\n        oppositeType = 'variables_get';\n        contextMenuMsg = Msg['VARIABLES_SET_CREATE_GET'];\n      }\n\n      const varField = this.getField('VAR')!;\n      const newVarBlockState = {\n        type: oppositeType,\n        fields: {VAR: varField.saveState(true)},\n      };\n\n      options.push({\n        enabled: this.workspace.remainingCapacity() > 0,\n        text: contextMenuMsg.replace('%1', varField.getText()),\n        callback: ContextMenu.callbackFactory(this, newVarBlockState),\n      });\n      // Getter blocks have the option to rename or delete that variable.\n    } else {\n      if (\n        this.type === 'variables_get' ||\n        this.type === 'variables_get_reporter'\n      ) {\n        const renameOption = {\n          text: Msg['RENAME_VARIABLE'],\n          enabled: true,\n          callback: renameOptionCallbackFactory(this),\n        };\n        const name = this.getField('VAR')!.getText();\n        const deleteOption = {\n          text: Msg['DELETE_VARIABLE'].replace('%1', name),\n          enabled: true,\n          callback: deleteOptionCallbackFactory(this),\n        };\n        options.unshift(renameOption);\n        options.unshift(deleteOption);\n      }\n    }\n  },\n};\n\n/**\n * Factory for callbacks for rename variable dropdown menu option\n * associated with a variable getter block.\n *\n * @param block The block with the variable to rename.\n * @returns A function that renames the variable.\n */\nconst renameOptionCallbackFactory = function (\n  block: VariableBlock,\n): () => void {\n  return function () {\n    const workspace = block.workspace;\n    const variableField = block.getField('VAR') as FieldVariable;\n    const variable = variableField.getVariable()!;\n    Variables.renameVariable(workspace, variable);\n  };\n};\n\n/**\n * Factory for callbacks for delete variable dropdown menu option\n * associated with a variable getter block.\n *\n * @param block The block with the variable to delete.\n * @returns A function that deletes the variable.\n */\nconst deleteOptionCallbackFactory = function (\n  block: VariableBlock,\n): () => void {\n  return function () {\n    const workspace = block.workspace;\n    const variableField = block.getField('VAR') as FieldVariable;\n    const variable = variableField.getVariable()!;\n    workspace.deleteVariableById(variable.getId());\n    (workspace as WorkspaceSvg).refreshToolboxSelection();\n  };\n};\n\nExtensions.registerMixin(\n  'contextMenu_variableSetterGetter',\n  CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN,\n);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.texts\n\nimport * as Extensions from '../core/extensions.js';\nimport * as fieldRegistry from '../core/field_registry.js';\nimport * as xmlUtils from '../core/utils/xml.js';\nimport {Align} from '../core/inputs/align.js';\nimport type {Block} from '../core/block.js';\nimport type {BlockSvg} from '../core/block_svg.js';\nimport {Connection} from '../core/connection.js';\nimport {FieldImage} from '../core/field_image.js';\nimport {FieldDropdown} from '../core/field_dropdown.js';\nimport {FieldTextInput} from '../core/field_textinput.js';\nimport {Msg} from '../core/msg.js';\nimport {MutatorIcon} from '../core/icons/mutator_icon.js';\nimport type {Workspace} from '../core/workspace.js';\nimport {\n  createBlockDefinitionsFromJsonArray,\n  defineBlocks,\n} from '../core/common.js';\nimport '../core/field_multilineinput.js';\nimport '../core/field_variable.js';\nimport {ValueInput} from '../core/inputs/value_input.js';\n\n/**\n * A dictionary of the block definitions provided by this module.\n */\nexport const blocks = createBlockDefinitionsFromJsonArray([\n  // Block for text value\n  {\n    'type': 'text',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_input',\n        'name': 'TEXT',\n        'text': '',\n      },\n    ],\n    'output': 'String',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_TEXT_HELPURL}',\n    'tooltip': '%{BKY_TEXT_TEXT_TOOLTIP}',\n    'extensions': ['text_quotes', 'parent_tooltip_when_inline'],\n  },\n  {\n    'type': 'text_multiline',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_image',\n        'src':\n          'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpP' +\n          'U2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0' +\n          'U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjm' +\n          'RIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z88' +\n          '73zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5luj' +\n          'nYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiD' +\n          'MYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYX' +\n          'fwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4z' +\n          'wA5X2Z9AYnQrEAAAAASUVORK5CYII=',\n        'width': 12,\n        'height': 17,\n        'alt': '\\u00B6',\n      },\n      {\n        'type': 'field_multilinetext',\n        'name': 'TEXT',\n        'text': '',\n      },\n    ],\n    'output': 'String',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_TEXT_HELPURL}',\n    'tooltip': '%{BKY_TEXT_TEXT_TOOLTIP}',\n    'extensions': ['parent_tooltip_when_inline'],\n  },\n  {\n    'type': 'text_join',\n    'message0': '',\n    'output': 'String',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_JOIN_HELPURL}',\n    'tooltip': '%{BKY_TEXT_JOIN_TOOLTIP}',\n    'mutator': 'text_join_mutator',\n  },\n  {\n    'type': 'text_create_join_container',\n    'message0': '%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2',\n    'args0': [\n      {\n        'type': 'input_dummy',\n      },\n      {\n        'type': 'input_statement',\n        'name': 'STACK',\n      },\n    ],\n    'style': 'text_blocks',\n    'tooltip': '%{BKY_TEXT_CREATE_JOIN_TOOLTIP}',\n    'enableContextMenu': false,\n  },\n  {\n    'type': 'text_create_join_item',\n    'message0': '%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}',\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'text_blocks',\n    'tooltip': '%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}',\n    'enableContextMenu': false,\n  },\n  {\n    'type': 'text_append',\n    'message0': '%{BKY_TEXT_APPEND_TITLE}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_TEXT_APPEND_VARIABLE}',\n      },\n      {\n        'type': 'input_value',\n        'name': 'TEXT',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'text_blocks',\n    'extensions': ['text_append_tooltip'],\n  },\n  {\n    'type': 'text_length',\n    'message0': '%{BKY_TEXT_LENGTH_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': ['String', 'Array'],\n      },\n    ],\n    'output': 'Number',\n    'style': 'text_blocks',\n    'tooltip': '%{BKY_TEXT_LENGTH_TOOLTIP}',\n    'helpUrl': '%{BKY_TEXT_LENGTH_HELPURL}',\n  },\n  {\n    'type': 'text_isEmpty',\n    'message0': '%{BKY_TEXT_ISEMPTY_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': ['String', 'Array'],\n      },\n    ],\n    'output': 'Boolean',\n    'style': 'text_blocks',\n    'tooltip': '%{BKY_TEXT_ISEMPTY_TOOLTIP}',\n    'helpUrl': '%{BKY_TEXT_ISEMPTY_HELPURL}',\n  },\n  {\n    'type': 'text_indexOf',\n    'message0': '%{BKY_TEXT_INDEXOF_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': 'String',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'END',\n        'options': [\n          ['%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}', 'FIRST'],\n          ['%{BKY_TEXT_INDEXOF_OPERATOR_LAST}', 'LAST'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'FIND',\n        'check': 'String',\n      },\n    ],\n    'output': 'Number',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_INDEXOF_HELPURL}',\n    'inputsInline': true,\n    'extensions': ['text_indexOf_tooltip'],\n  },\n  {\n    'type': 'text_charAt',\n    'message0': '%{BKY_TEXT_CHARAT_TITLE}', // \"in text %1 %2\"\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': 'String',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'WHERE',\n        'options': [\n          ['%{BKY_TEXT_CHARAT_FROM_START}', 'FROM_START'],\n          ['%{BKY_TEXT_CHARAT_FROM_END}', 'FROM_END'],\n          ['%{BKY_TEXT_CHARAT_FIRST}', 'FIRST'],\n          ['%{BKY_TEXT_CHARAT_LAST}', 'LAST'],\n          ['%{BKY_TEXT_CHARAT_RANDOM}', 'RANDOM'],\n        ],\n      },\n    ],\n    'output': 'String',\n    'style': 'text_blocks',\n    'helpUrl': '%{BKY_TEXT_CHARAT_HELPURL}',\n    'inputsInline': true,\n    'mutator': 'text_charAt_mutator',\n  },\n]);\n\n/** Type of a 'text_get_substring' block. */\ntype GetSubstringBlock = Block & GetSubstringMixin;\ninterface GetSubstringMixin extends GetSubstringType {\n  WHERE_OPTIONS_1: Array<[string, string]>;\n  WHERE_OPTIONS_2: Array<[string, string]>;\n}\ntype GetSubstringType = typeof GET_SUBSTRING_BLOCK;\n\nconst GET_SUBSTRING_BLOCK = {\n  /**\n   * Block for getting substring.\n   */\n  init: function (this: GetSubstringBlock) {\n    this['WHERE_OPTIONS_1'] = [\n      [Msg['TEXT_GET_SUBSTRING_START_FROM_START'], 'FROM_START'],\n      [Msg['TEXT_GET_SUBSTRING_START_FROM_END'], 'FROM_END'],\n      [Msg['TEXT_GET_SUBSTRING_START_FIRST'], 'FIRST'],\n    ];\n    this['WHERE_OPTIONS_2'] = [\n      [Msg['TEXT_GET_SUBSTRING_END_FROM_START'], 'FROM_START'],\n      [Msg['TEXT_GET_SUBSTRING_END_FROM_END'], 'FROM_END'],\n      [Msg['TEXT_GET_SUBSTRING_END_LAST'], 'LAST'],\n    ];\n    this.setHelpUrl(Msg['TEXT_GET_SUBSTRING_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('STRING')\n      .setCheck('String')\n      .appendField(Msg['TEXT_GET_SUBSTRING_INPUT_IN_TEXT']);\n    this.appendDummyInput('AT1');\n    this.appendDummyInput('AT2');\n    if (Msg['TEXT_GET_SUBSTRING_TAIL']) {\n      this.appendDummyInput('TAIL').appendField(Msg['TEXT_GET_SUBSTRING_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true, 'String');\n    this.updateAt_(1, true);\n    this.updateAt_(2, true);\n    this.setTooltip(Msg['TEXT_GET_SUBSTRING_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent whether there are 'AT' inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: GetSubstringBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    const isAt1 = this.getInput('AT1') instanceof ValueInput;\n    container.setAttribute('at1', `${isAt1}`);\n    const isAt2 = this.getInput('AT2') instanceof ValueInput;\n    container.setAttribute('at2', `${isAt2}`);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: GetSubstringBlock, xmlElement: Element) {\n    const isAt1 = xmlElement.getAttribute('at1') === 'true';\n    const isAt2 = xmlElement.getAttribute('at2') === 'true';\n    this.updateAt_(1, isAt1);\n    this.updateAt_(2, isAt2);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Create or delete an input for a numeric index.\n   * This block has two such inputs, independent of each other.\n   *\n   * @internal\n   * @param n Which input to modify (either 1 or 2).\n   * @param isAt True if the input includes a value connection, false otherwise.\n   */\n  updateAt_: function (this: GetSubstringBlock, n: 1 | 2, isAt: boolean) {\n    // Create or delete an input for the numeric index.\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT' + n);\n    this.removeInput('ORDINAL' + n, true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT' + n).setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL' + n).appendField(\n          Msg['ORDINAL_NUMBER_SUFFIX'],\n        );\n      }\n    } else {\n      this.appendDummyInput('AT' + n);\n    }\n    // Move tail, if present, to end of block.\n    if (n === 2 && Msg['TEXT_GET_SUBSTRING_TAIL']) {\n      this.removeInput('TAIL', true);\n      this.appendDummyInput('TAIL').appendField(Msg['TEXT_GET_SUBSTRING_TAIL']);\n    }\n    const menu = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options:\n        this[('WHERE_OPTIONS_' + n) as 'WHERE_OPTIONS_1' | 'WHERE_OPTIONS_2'],\n    }) as FieldDropdown;\n    menu.setValidator(\n      /**\n       * @param value The input value.\n       * @returns Null if the field has been replaced; otherwise undefined.\n       */\n      function (this: FieldDropdown, value: any): null | undefined {\n        const newAt = value === 'FROM_START' || value === 'FROM_END';\n        // The 'isAt' variable is available due to this function being a\n        // closure.\n        if (newAt !== isAt) {\n          const block = this.getSourceBlock() as GetSubstringBlock;\n          block.updateAt_(n, newAt);\n          // This menu has been destroyed and replaced.\n          // Update the replacement.\n          block.setFieldValue(value, 'WHERE' + n);\n          return null;\n        }\n        return undefined;\n      },\n    );\n\n    this.getInput('AT' + n)!.appendField(menu, 'WHERE' + n);\n    if (n === 1) {\n      this.moveInputBefore('AT1', 'AT2');\n      if (this.getInput('ORDINAL1')) {\n        this.moveInputBefore('ORDINAL1', 'AT2');\n      }\n    }\n  },\n};\n\nblocks['text_getSubstring'] = GET_SUBSTRING_BLOCK;\n\nblocks['text_changeCase'] = {\n  /**\n   * Block for changing capitalization.\n   */\n  init: function (this: Block) {\n    const OPERATORS = [\n      [Msg['TEXT_CHANGECASE_OPERATOR_UPPERCASE'], 'UPPERCASE'],\n      [Msg['TEXT_CHANGECASE_OPERATOR_LOWERCASE'], 'LOWERCASE'],\n      [Msg['TEXT_CHANGECASE_OPERATOR_TITLECASE'], 'TITLECASE'],\n    ];\n    this.setHelpUrl(Msg['TEXT_CHANGECASE_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('TEXT')\n      .setCheck('String')\n      .appendField(\n        fieldRegistry.fromJson({\n          type: 'field_dropdown',\n          options: OPERATORS,\n        }) as FieldDropdown,\n        'CASE',\n      );\n    this.setOutput(true, 'String');\n    this.setTooltip(Msg['TEXT_CHANGECASE_TOOLTIP']);\n  },\n};\n\nblocks['text_trim'] = {\n  /**\n   * Block for trimming spaces.\n   */\n  init: function (this: Block) {\n    const OPERATORS = [\n      [Msg['TEXT_TRIM_OPERATOR_BOTH'], 'BOTH'],\n      [Msg['TEXT_TRIM_OPERATOR_LEFT'], 'LEFT'],\n      [Msg['TEXT_TRIM_OPERATOR_RIGHT'], 'RIGHT'],\n    ];\n    this.setHelpUrl(Msg['TEXT_TRIM_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('TEXT')\n      .setCheck('String')\n      .appendField(\n        fieldRegistry.fromJson({\n          type: 'field_dropdown',\n          options: OPERATORS,\n        }) as FieldDropdown,\n        'MODE',\n      );\n    this.setOutput(true, 'String');\n    this.setTooltip(Msg['TEXT_TRIM_TOOLTIP']);\n  },\n};\n\nblocks['text_print'] = {\n  /**\n   * Block for print statement.\n   */\n  init: function (this: Block) {\n    this.jsonInit({\n      'message0': Msg['TEXT_PRINT_TITLE'],\n      'args0': [\n        {\n          'type': 'input_value',\n          'name': 'TEXT',\n        },\n      ],\n      'previousStatement': null,\n      'nextStatement': null,\n      'style': 'text_blocks',\n      'tooltip': Msg['TEXT_PRINT_TOOLTIP'],\n      'helpUrl': Msg['TEXT_PRINT_HELPURL'],\n    });\n  },\n};\n\ntype PromptCommonBlock = Block & PromptCommonMixin;\ninterface PromptCommonMixin extends PromptCommonType {}\ntype PromptCommonType = typeof PROMPT_COMMON;\n\n/**\n * Common properties for the text_prompt_ext and text_prompt blocks\n * definitions.\n */\nconst PROMPT_COMMON = {\n  /**\n   * Modify this block to have the correct output type.\n   *\n   * @internal\n   * @param newOp The new output type. Should be either 'TEXT' or 'NUMBER'.\n   */\n  updateType_: function (this: PromptCommonBlock, newOp: string) {\n    this.outputConnection!.setCheck(newOp === 'NUMBER' ? 'Number' : 'String');\n  },\n  /**\n   * Create XML to represent the output type.\n   * Backwards compatible serialization implementation.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: PromptCommonBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('type', this.getFieldValue('TYPE'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the output type.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: PromptCommonBlock, xmlElement: Element) {\n    this.updateType_(xmlElement.getAttribute('type')!);\n  },\n};\n\nblocks['text_prompt_ext'] = {\n  ...PROMPT_COMMON,\n  /**\n   * Block for prompt function (external message).\n   */\n  init: function (this: PromptCommonBlock) {\n    const TYPES = [\n      [Msg['TEXT_PROMPT_TYPE_TEXT'], 'TEXT'],\n      [Msg['TEXT_PROMPT_TYPE_NUMBER'], 'NUMBER'],\n    ];\n    this.setHelpUrl(Msg['TEXT_PROMPT_HELPURL']);\n    this.setStyle('text_blocks');\n    const dropdown = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options: TYPES,\n    }) as FieldDropdown;\n    dropdown.setValidator((newOp: string) => {\n      this.updateType_(newOp);\n      return undefined; // FieldValidators can't be void.  Use option as-is.\n    });\n    this.appendValueInput('TEXT').appendField(dropdown, 'TYPE');\n    this.setOutput(true, 'String');\n    this.setTooltip(() => {\n      return this.getFieldValue('TYPE') === 'TEXT'\n        ? Msg['TEXT_PROMPT_TOOLTIP_TEXT']\n        : Msg['TEXT_PROMPT_TOOLTIP_NUMBER'];\n    });\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n};\n\ntype PromptBlock = Block & PromptCommonMixin & QuoteImageMixin;\n\nconst TEXT_PROMPT_BLOCK = {\n  ...PROMPT_COMMON,\n  /**\n   * Block for prompt function (internal message).\n   * The 'text_prompt_ext' block is preferred as it is more flexible.\n   */\n  init: function (this: PromptBlock) {\n    this.mixin(QUOTE_IMAGE_MIXIN);\n    const TYPES = [\n      [Msg['TEXT_PROMPT_TYPE_TEXT'], 'TEXT'],\n      [Msg['TEXT_PROMPT_TYPE_NUMBER'], 'NUMBER'],\n    ];\n\n    this.setHelpUrl(Msg['TEXT_PROMPT_HELPURL']);\n    this.setStyle('text_blocks');\n    const dropdown = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options: TYPES,\n    }) as FieldDropdown;\n    dropdown.setValidator((newOp: string) => {\n      this.updateType_(newOp);\n      return undefined; // FieldValidators can't be void.  Use option as-is.\n    });\n    this.appendDummyInput()\n      .appendField(dropdown, 'TYPE')\n      .appendField(this.newQuote_(true))\n      .appendField(\n        fieldRegistry.fromJson({\n          type: 'field_input',\n          text: '',\n        }) as FieldTextInput,\n        'TEXT',\n      )\n      .appendField(this.newQuote_(false));\n    this.setOutput(true, 'String');\n    this.setTooltip(() => {\n      return this.getFieldValue('TYPE') === 'TEXT'\n        ? Msg['TEXT_PROMPT_TOOLTIP_TEXT']\n        : Msg['TEXT_PROMPT_TOOLTIP_NUMBER'];\n    });\n  },\n};\n\nblocks['text_prompt'] = TEXT_PROMPT_BLOCK;\n\nblocks['text_count'] = {\n  /**\n   * Block for counting how many times one string appears within another string.\n   */\n  init: function (this: Block) {\n    this.jsonInit({\n      'message0': Msg['TEXT_COUNT_MESSAGE0'],\n      'args0': [\n        {\n          'type': 'input_value',\n          'name': 'SUB',\n          'check': 'String',\n        },\n        {\n          'type': 'input_value',\n          'name': 'TEXT',\n          'check': 'String',\n        },\n      ],\n      'output': 'Number',\n      'inputsInline': true,\n      'style': 'text_blocks',\n      'tooltip': Msg['TEXT_COUNT_TOOLTIP'],\n      'helpUrl': Msg['TEXT_COUNT_HELPURL'],\n    });\n  },\n};\n\nblocks['text_replace'] = {\n  /**\n   * Block for replacing one string with another in the text.\n   */\n  init: function (this: Block) {\n    this.jsonInit({\n      'message0': Msg['TEXT_REPLACE_MESSAGE0'],\n      'args0': [\n        {\n          'type': 'input_value',\n          'name': 'FROM',\n          'check': 'String',\n        },\n        {\n          'type': 'input_value',\n          'name': 'TO',\n          'check': 'String',\n        },\n        {\n          'type': 'input_value',\n          'name': 'TEXT',\n          'check': 'String',\n        },\n      ],\n      'output': 'String',\n      'inputsInline': true,\n      'style': 'text_blocks',\n      'tooltip': Msg['TEXT_REPLACE_TOOLTIP'],\n      'helpUrl': Msg['TEXT_REPLACE_HELPURL'],\n    });\n  },\n};\n\nblocks['text_reverse'] = {\n  /**\n   * Block for reversing a string.\n   */\n  init: function (this: Block) {\n    this.jsonInit({\n      'message0': Msg['TEXT_REVERSE_MESSAGE0'],\n      'args0': [\n        {\n          'type': 'input_value',\n          'name': 'TEXT',\n          'check': 'String',\n        },\n      ],\n      'output': 'String',\n      'inputsInline': true,\n      'style': 'text_blocks',\n      'tooltip': Msg['TEXT_REVERSE_TOOLTIP'],\n      'helpUrl': Msg['TEXT_REVERSE_HELPURL'],\n    });\n  },\n};\n\n/** Type of a block that has QUOTE_IMAGE_MIXIN */\ntype QuoteImageBlock = Block & QuoteImageMixin;\ninterface QuoteImageMixin extends QuoteImageMixinType {}\ntype QuoteImageMixinType = typeof QUOTE_IMAGE_MIXIN;\n\nconst QUOTE_IMAGE_MIXIN = {\n  /**\n   * Image data URI of an LTR opening double quote (same as RTL closing double\n   * quote).\n   */\n  QUOTE_IMAGE_LEFT_DATAURI:\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAA' +\n    'n0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY' +\n    '1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1' +\n    'HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMf' +\n    'z9AylsaRRgGzvZAAAAAElFTkSuQmCC',\n  /**\n   * Image data URI of an LTR closing double quote (same as RTL opening double\n   * quote).\n   */\n  QUOTE_IMAGE_RIGHT_DATAURI:\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAA' +\n    'qUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhg' +\n    'gONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvB' +\n    'O3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5Aos' +\n    'lLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==',\n  /**\n   * Pixel width of QUOTE_IMAGE_LEFT_DATAURI and QUOTE_IMAGE_RIGHT_DATAURI.\n   */\n  QUOTE_IMAGE_WIDTH: 12,\n  /**\n   * Pixel height of QUOTE_IMAGE_LEFT_DATAURI and QUOTE_IMAGE_RIGHT_DATAURI.\n   */\n  QUOTE_IMAGE_HEIGHT: 12,\n\n  /**\n   * Inserts appropriate quote images before and after the named field.\n   *\n   * @param fieldName The name of the field to wrap with quotes.\n   */\n  quoteField_: function (this: QuoteImageBlock, fieldName: string) {\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n      for (let j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (fieldName === field.name) {\n          input.insertFieldAt(j, this.newQuote_(true));\n          input.insertFieldAt(j + 2, this.newQuote_(false));\n          return;\n        }\n      }\n    }\n    console.warn(\n      'field named \"' + fieldName + '\" not found in ' + this.toDevString(),\n    );\n  },\n\n  /**\n   * A helper function that generates a FieldImage of an opening or\n   * closing double quote. The selected quote will be adapted for RTL blocks.\n   *\n   * @param open If the image should be open quote (“ in LTR).\n   *                       Otherwise, a closing quote is used (” in LTR).\n   * @returns The new field.\n   */\n  newQuote_: function (this: QuoteImageBlock, open: boolean): FieldImage {\n    const isLeft = this.RTL ? !open : open;\n    const dataUri = isLeft\n      ? this.QUOTE_IMAGE_LEFT_DATAURI\n      : this.QUOTE_IMAGE_RIGHT_DATAURI;\n    return fieldRegistry.fromJson({\n      type: 'field_image',\n      src: dataUri,\n      width: this.QUOTE_IMAGE_WIDTH,\n      height: this.QUOTE_IMAGE_HEIGHT,\n      alt: isLeft ? '\\u201C' : '\\u201D',\n    }) as FieldImage;\n  },\n};\n\n/**\n * Wraps TEXT field with images of double quote characters.\n */\nconst QUOTES_EXTENSION = function (this: QuoteImageBlock) {\n  this.mixin(QUOTE_IMAGE_MIXIN);\n  this.quoteField_('TEXT');\n};\n\n/** Type of a block that has TEXT_JOIN_MUTATOR_MIXIN */\ntype JoinMutatorBlock = BlockSvg & JoinMutatorMixin & QuoteImageMixin;\ninterface JoinMutatorMixin extends JoinMutatorMixinType {}\ntype JoinMutatorMixinType = typeof JOIN_MUTATOR_MIXIN;\n\n/** Type of a item block in the text_join_mutator bubble. */\ntype JoinItemBlock = BlockSvg & JoinItemMixin;\ninterface JoinItemMixin {\n  valueConnection_: Connection | null;\n}\n\n/**\n * Mixin for mutator functions in the 'text_join_mutator' extension.\n */\nconst JOIN_MUTATOR_MIXIN = {\n  itemCount_: 0,\n  /**\n   * Create XML to represent number of text inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: JoinMutatorBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('items', `${this.itemCount_}`);\n    return container;\n  },\n  /**\n   * Parse XML to restore the text inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: JoinMutatorBlock, xmlElement: Element) {\n    this.itemCount_ = parseInt(xmlElement.getAttribute('items')!, 10);\n    this.updateShape_();\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   *\n   * @returns The state of this block, ie the item count.\n   */\n  saveExtraState: function (this: JoinMutatorBlock): {itemCount: number} {\n    return {\n      'itemCount': this.itemCount_,\n    };\n  },\n  /**\n   * Applies the given state to this block.\n   *\n   * @param state The state to apply to this block, ie the item count.\n   */\n  loadExtraState: function (this: JoinMutatorBlock, state: {[x: string]: any}) {\n    this.itemCount_ = state['itemCount'];\n    this.updateShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   *\n   * @param workspace Mutator's workspace.\n   * @returns Root block in mutator.\n   */\n  decompose: function (this: JoinMutatorBlock, workspace: Workspace): Block {\n    const containerBlock = workspace.newBlock(\n      'text_create_join_container',\n    ) as BlockSvg;\n    containerBlock.initSvg();\n    let connection = containerBlock.getInput('STACK')!.connection!;\n    for (let i = 0; i < this.itemCount_; i++) {\n      const itemBlock = workspace.newBlock(\n        'text_create_join_item',\n      ) as JoinItemBlock;\n      itemBlock.initSvg();\n      connection.connect(itemBlock.previousConnection);\n      connection = itemBlock.nextConnection;\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   *\n   * @param containerBlock Root block in mutator.\n   */\n  compose: function (this: JoinMutatorBlock, containerBlock: Block) {\n    let itemBlock = containerBlock.getInputTargetBlock(\n      'STACK',\n    ) as JoinItemBlock;\n    // Count number of inputs.\n    const connections = [];\n    while (itemBlock) {\n      if (itemBlock.isInsertionMarker()) {\n        itemBlock = itemBlock.getNextBlock() as JoinItemBlock;\n        continue;\n      }\n      connections.push(itemBlock.valueConnection_);\n      itemBlock = itemBlock.getNextBlock() as JoinItemBlock;\n    }\n    // Disconnect any children that don't belong.\n    for (let i = 0; i < this.itemCount_; i++) {\n      const connection = this.getInput('ADD' + i)!.connection!.targetConnection;\n      if (connection && connections.indexOf(connection) === -1) {\n        connection.disconnect();\n      }\n    }\n    this.itemCount_ = connections.length;\n    this.updateShape_();\n    // Reconnect any child blocks.\n    for (let i = 0; i < this.itemCount_; i++) {\n      connections[i]?.reconnect(this, 'ADD' + i);\n    }\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   *\n   * @param containerBlock Root block in mutator.\n   */\n  saveConnections: function (this: JoinMutatorBlock, containerBlock: Block) {\n    let itemBlock = containerBlock.getInputTargetBlock('STACK');\n    let i = 0;\n    while (itemBlock) {\n      if (itemBlock.isInsertionMarker()) {\n        itemBlock = itemBlock.getNextBlock();\n        continue;\n      }\n      const input = this.getInput('ADD' + i);\n      (itemBlock as JoinItemBlock).valueConnection_ =\n        input && input.connection!.targetConnection;\n      itemBlock = itemBlock.getNextBlock();\n      i++;\n    }\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   *\n   */\n  updateShape_: function (this: JoinMutatorBlock) {\n    if (this.itemCount_ && this.getInput('EMPTY')) {\n      this.removeInput('EMPTY');\n    } else if (!this.itemCount_ && !this.getInput('EMPTY')) {\n      this.appendDummyInput('EMPTY')\n        .appendField(this.newQuote_(true))\n        .appendField(this.newQuote_(false));\n    }\n    // Add new inputs.\n    for (let i = 0; i < this.itemCount_; i++) {\n      if (!this.getInput('ADD' + i)) {\n        const input = this.appendValueInput('ADD' + i).setAlign(Align.RIGHT);\n        if (i === 0) {\n          input.appendField(Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n        }\n      }\n    }\n    // Remove deleted inputs.\n    for (let i = this.itemCount_; this.getInput('ADD' + i); i++) {\n      this.removeInput('ADD' + i);\n    }\n  },\n};\n\n/**\n * Performs final setup of a text_join block.\n */\nconst JOIN_EXTENSION = function (this: JoinMutatorBlock) {\n  // Add the quote mixin for the itemCount_ = 0 case.\n  this.mixin(QUOTE_IMAGE_MIXIN);\n  // Initialize the mutator values.\n  this.itemCount_ = 2;\n  this.updateShape_();\n  // Configure the mutator UI.\n  this.setMutator(new MutatorIcon(['text_create_join_item'], this));\n};\n\n// Update the tooltip of 'text_append' block to reference the variable.\nExtensions.register(\n  'text_append_tooltip',\n  Extensions.buildTooltipWithFieldText('%{BKY_TEXT_APPEND_TOOLTIP}', 'VAR'),\n);\n\n/**\n * Update the tooltip of 'text_append' block to reference the variable.\n */\nconst INDEXOF_TOOLTIP_EXTENSION = function (this: Block) {\n  this.setTooltip(() => {\n    return Msg['TEXT_INDEXOF_TOOLTIP'].replace(\n      '%1',\n      this.workspace.options.oneBasedIndex ? '0' : '-1',\n    );\n  });\n};\n\n/** Type of a block that has TEXT_CHARAT_MUTATOR_MIXIN */\ntype CharAtBlock = Block & CharAtMixin;\ninterface CharAtMixin extends CharAtMixinType {}\ntype CharAtMixinType = typeof CHARAT_MUTATOR_MIXIN;\n\n/**\n * Mixin for mutator functions in the 'text_charAt_mutator' extension.\n */\nconst CHARAT_MUTATOR_MIXIN = {\n  isAt_: false,\n  /**\n   * Create XML to represent whether there is an 'AT' input.\n   * Backwards compatible serialization implementation.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: CharAtBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('at', `${this.isAt_}`);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: CharAtBlock, xmlElement: Element) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'at' defaults to true.\n    const isAt = xmlElement.getAttribute('at') !== 'false';\n    this.updateAt_(isAt);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Create or delete an input for the numeric index.\n   *\n   * @internal\n   * @param isAt True if the input should exist.\n   */\n  updateAt_: function (this: CharAtBlock, isAt: boolean) {\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT', true);\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL').appendField(\n          Msg['ORDINAL_NUMBER_SUFFIX'],\n        );\n      }\n    }\n    if (Msg['TEXT_CHARAT_TAIL']) {\n      this.removeInput('TAIL', true);\n      this.appendDummyInput('TAIL').appendField(Msg['TEXT_CHARAT_TAIL']);\n    }\n\n    this.isAt_ = isAt;\n  },\n};\n\n/**\n * Does the initial mutator update of text_charAt and adds the tooltip\n */\nconst CHARAT_EXTENSION = function (this: CharAtBlock) {\n  const dropdown = this.getField('WHERE') as FieldDropdown;\n  dropdown.setValidator(function (this: FieldDropdown, value: any) {\n    const newAt = value === 'FROM_START' || value === 'FROM_END';\n    const block = this.getSourceBlock() as CharAtBlock;\n    if (newAt !== block.isAt_) {\n      block.updateAt_(newAt);\n    }\n    return undefined; // FieldValidators can't be void.  Use option as-is.\n  });\n  this.updateAt_(true);\n  this.setTooltip(() => {\n    const where = this.getFieldValue('WHERE');\n    let tooltip = Msg['TEXT_CHARAT_TOOLTIP'];\n    if (where === 'FROM_START' || where === 'FROM_END') {\n      const msg =\n        where === 'FROM_START'\n          ? Msg['LISTS_INDEX_FROM_START_TOOLTIP']\n          : Msg['LISTS_INDEX_FROM_END_TOOLTIP'];\n      if (msg) {\n        tooltip +=\n          '  ' +\n          msg.replace('%1', this.workspace.options.oneBasedIndex ? '#1' : '#0');\n      }\n    }\n    return tooltip;\n  });\n};\n\nExtensions.register('text_indexOf_tooltip', INDEXOF_TOOLTIP_EXTENSION);\n\nExtensions.register('text_quotes', QUOTES_EXTENSION);\n\nExtensions.registerMutator(\n  'text_join_mutator',\n  JOIN_MUTATOR_MIXIN,\n  JOIN_EXTENSION,\n);\n\nExtensions.registerMutator(\n  'text_charAt_mutator',\n  CHARAT_MUTATOR_MIXIN,\n  CHARAT_EXTENSION,\n);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.procedures\n\nimport * as ContextMenu from '../core/contextmenu.js';\nimport * as Events from '../core/events/events.js';\nimport * as Procedures from '../core/procedures.js';\nimport * as Variables from '../core/variables.js';\nimport * as Xml from '../core/xml.js';\nimport * as fieldRegistry from '../core/field_registry.js';\nimport * as xmlUtils from '../core/utils/xml.js';\nimport type {Abstract as AbstractEvent} from '../core/events/events_abstract.js';\nimport {Align} from '../core/inputs/input.js';\nimport type {Block} from '../core/block.js';\nimport type {BlockSvg} from '../core/block_svg.js';\nimport type {BlockCreate} from '../core/events/events_block_create.js';\nimport type {BlockChange} from '../core/events/events_block_change.js';\nimport type {BlockDefinition} from '../core/blocks.js';\nimport type {Connection} from '../core/connection.js';\nimport type {\n  ContextMenuOption,\n  LegacyContextMenuOption,\n} from '../core/contextmenu_registry.js';\nimport {FieldCheckbox} from '../core/field_checkbox.js';\nimport {FieldLabel} from '../core/field_label.js';\nimport {FieldTextInput} from '../core/field_textinput.js';\nimport {Msg} from '../core/msg.js';\nimport {MutatorIcon as Mutator} from '../core/icons/mutator_icon.js';\nimport {Names} from '../core/names.js';\nimport type {VariableModel} from '../core/variable_model.js';\nimport type {Workspace} from '../core/workspace.js';\nimport type {WorkspaceSvg} from '../core/workspace_svg.js';\nimport {config} from '../core/config.js';\nimport {defineBlocks} from '../core/common.js';\nimport '../core/icons/comment_icon.js';\nimport '../core/icons/warning_icon.js';\n\n/** A dictionary of the block definitions provided by this module. */\nexport const blocks: {[key: string]: BlockDefinition} = {};\n\n/** Type of a block using the PROCEDURE_DEF_COMMON mixin. */\ntype ProcedureBlock = Block & ProcedureMixin;\ninterface ProcedureMixin extends ProcedureMixinType {\n  arguments_: string[];\n  argumentVarModels_: VariableModel[];\n  callType_: string;\n  paramIds_: string[];\n  hasStatements_: boolean;\n  statementConnection_: Connection | null;\n}\ntype ProcedureMixinType = typeof PROCEDURE_DEF_COMMON;\n\n/** Extra state for serialising procedure blocks. */\ntype ProcedureExtraState = {\n  params?: Array<{name: string; id: string}>;\n  hasStatements: boolean;\n};\n\n/**\n * Common properties for the procedure_defnoreturn and\n * procedure_defreturn blocks.\n */\nconst PROCEDURE_DEF_COMMON = {\n  /**\n   * Add or remove the statement block from this function definition.\n   *\n   * @param hasStatements True if a statement block is needed.\n   */\n  setStatements_: function (this: ProcedureBlock, hasStatements: boolean) {\n    if (this.hasStatements_ === hasStatements) {\n      return;\n    }\n    if (hasStatements) {\n      this.appendStatementInput('STACK').appendField(\n        Msg['PROCEDURES_DEFNORETURN_DO'],\n      );\n      if (this.getInput('RETURN')) {\n        this.moveInputBefore('STACK', 'RETURN');\n      }\n    } else {\n      this.removeInput('STACK', true);\n    }\n    this.hasStatements_ = hasStatements;\n  },\n  /**\n   * Update the display of parameters for this procedure definition block.\n   *\n   * @internal\n   */\n  updateParams_: function (this: ProcedureBlock) {\n    // Merge the arguments into a human-readable list.\n    let paramString = '';\n    if (this.arguments_.length) {\n      paramString =\n        Msg['PROCEDURES_BEFORE_PARAMS'] + ' ' + this.arguments_.join(', ');\n    }\n    // The params field is deterministic based on the mutation,\n    // no need to fire a change event.\n    Events.disable();\n    try {\n      this.setFieldValue(paramString, 'PARAMS');\n    } finally {\n      Events.enable();\n    }\n  },\n  /**\n   * Create XML to represent the argument inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @param opt_paramIds If true include the IDs of the parameter\n   *     quarks.  Used by Procedures.mutateCallers for reconnection.\n   * @returns  XML storage element.\n   */\n  mutationToDom: function (\n    this: ProcedureBlock,\n    opt_paramIds: boolean,\n  ): Element {\n    const container = xmlUtils.createElement('mutation');\n    if (opt_paramIds) {\n      container.setAttribute('name', this.getFieldValue('NAME'));\n    }\n    for (let i = 0; i < this.argumentVarModels_.length; i++) {\n      const parameter = xmlUtils.createElement('arg');\n      const argModel = this.argumentVarModels_[i];\n      parameter.setAttribute('name', argModel.name);\n      parameter.setAttribute('varid', argModel.getId());\n      if (opt_paramIds && this.paramIds_) {\n        parameter.setAttribute('paramId', this.paramIds_[i]);\n      }\n      container.appendChild(parameter);\n    }\n\n    // Save whether the statement input is visible.\n    if (!this.hasStatements_) {\n      container.setAttribute('statements', 'false');\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the argument inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: ProcedureBlock, xmlElement: Element) {\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    for (let i = 0, childNode; (childNode = xmlElement.childNodes[i]); i++) {\n      if (childNode.nodeName.toLowerCase() === 'arg') {\n        const childElement = childNode as Element;\n        const varName = childElement.getAttribute('name')!;\n        const varId =\n          childElement.getAttribute('varid') ||\n          childElement.getAttribute('varId');\n        this.arguments_.push(varName);\n        const variable = Variables.getOrCreateVariablePackage(\n          this.workspace,\n          varId,\n          varName,\n          '',\n        );\n        if (variable !== null) {\n          this.argumentVarModels_.push(variable);\n        } else {\n          console.log(\n            `Failed to create a variable named \"${varName}\", ignoring.`,\n          );\n        }\n      }\n    }\n    this.updateParams_();\n    Procedures.mutateCallers(this);\n\n    // Show or hide the statement input.\n    this.setStatements_(xmlElement.getAttribute('statements') !== 'false');\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   *\n   * @returns The state of this block, eg the parameters and statements.\n   */\n  saveExtraState: function (this: ProcedureBlock): ProcedureExtraState | null {\n    if (!this.argumentVarModels_.length && this.hasStatements_) {\n      return null;\n    }\n    const state = Object.create(null);\n    if (this.argumentVarModels_.length) {\n      state['params'] = [];\n      for (let i = 0; i < this.argumentVarModels_.length; i++) {\n        state['params'].push({\n          // We don't need to serialize the name, but just in case we decide\n          // to separate params from variables.\n          'name': this.argumentVarModels_[i].name,\n          'id': this.argumentVarModels_[i].getId(),\n        });\n      }\n    }\n    if (!this.hasStatements_) {\n      state['hasStatements'] = false;\n    }\n    return state;\n  },\n  /**\n   * Applies the given state to this block.\n   *\n   * @param state The state to apply to this block, eg the parameters\n   *     and statements.\n   */\n  loadExtraState: function (this: ProcedureBlock, state: ProcedureExtraState) {\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    if (state['params']) {\n      for (let i = 0; i < state['params'].length; i++) {\n        const param = state['params'][i];\n        const variable = Variables.getOrCreateVariablePackage(\n          this.workspace,\n          param['id'],\n          param['name'],\n          '',\n        );\n        this.arguments_.push(variable.name);\n        this.argumentVarModels_.push(variable);\n      }\n    }\n    this.updateParams_();\n    Procedures.mutateCallers(this);\n    this.setStatements_(state['hasStatements'] === false ? false : true);\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   *\n   * @param  workspace Mutator's workspace.\n   * @returns Root block in mutator.\n   */\n  decompose: function (\n    this: ProcedureBlock,\n    workspace: Workspace,\n  ): ContainerBlock {\n    /*\n     * Creates the following XML:\n     * <block type=\"procedures_mutatorcontainer\">\n     *   <statement name=\"STACK\">\n     *     <block type=\"procedures_mutatorarg\">\n     *       <field name=\"NAME\">arg1_name</field>\n     *       <next>etc...</next>\n     *     </block>\n     *   </statement>\n     * </block>\n     */\n\n    const containerBlockNode = xmlUtils.createElement('block');\n    containerBlockNode.setAttribute('type', 'procedures_mutatorcontainer');\n    const statementNode = xmlUtils.createElement('statement');\n    statementNode.setAttribute('name', 'STACK');\n    containerBlockNode.appendChild(statementNode);\n\n    let node = statementNode;\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const argBlockNode = xmlUtils.createElement('block');\n      argBlockNode.setAttribute('type', 'procedures_mutatorarg');\n      const fieldNode = xmlUtils.createElement('field');\n      fieldNode.setAttribute('name', 'NAME');\n      const argumentName = xmlUtils.createTextNode(this.arguments_[i]);\n      fieldNode.appendChild(argumentName);\n      argBlockNode.appendChild(fieldNode);\n      const nextNode = xmlUtils.createElement('next');\n      argBlockNode.appendChild(nextNode);\n\n      node.appendChild(argBlockNode);\n      node = nextNode;\n    }\n\n    const containerBlock = Xml.domToBlock(\n      containerBlockNode,\n      workspace,\n    ) as ContainerBlock;\n\n    if (this.type === 'procedures_defreturn') {\n      containerBlock.setFieldValue(this.hasStatements_, 'STATEMENTS');\n    } else {\n      containerBlock.removeInput('STATEMENT_INPUT');\n    }\n\n    // Initialize procedure's callers with blank IDs.\n    Procedures.mutateCallers(this);\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   *\n   * @param containerBlock Root block in mutator.\n   */\n  compose: function (this: ProcedureBlock, containerBlock: ContainerBlock) {\n    // Parameter list.\n    this.arguments_ = [];\n    this.paramIds_ = [];\n    this.argumentVarModels_ = [];\n    let paramBlock = containerBlock.getInputTargetBlock('STACK');\n    while (paramBlock && !paramBlock.isInsertionMarker()) {\n      const varName = paramBlock.getFieldValue('NAME');\n      this.arguments_.push(varName);\n      const variable = this.workspace.getVariable(varName, '')!;\n      this.argumentVarModels_.push(variable);\n\n      this.paramIds_.push(paramBlock.id);\n      paramBlock =\n        paramBlock.nextConnection && paramBlock.nextConnection.targetBlock();\n    }\n    this.updateParams_();\n    Procedures.mutateCallers(this);\n\n    // Show/hide the statement input.\n    let hasStatements = containerBlock.getFieldValue('STATEMENTS');\n    if (hasStatements !== null) {\n      hasStatements = hasStatements === 'TRUE';\n      if (this.hasStatements_ !== hasStatements) {\n        if (hasStatements) {\n          this.setStatements_(true);\n          // Restore the stack, if one was saved.\n          this.statementConnection_?.reconnect(this, 'STACK');\n          this.statementConnection_ = null;\n        } else {\n          // Save the stack, then disconnect it.\n          const stackConnection = this.getInput('STACK')!.connection;\n          this.statementConnection_ = stackConnection!.targetConnection;\n          if (this.statementConnection_) {\n            const stackBlock = stackConnection!.targetBlock()!;\n            stackBlock.unplug();\n            stackBlock.bumpNeighbours();\n          }\n          this.setStatements_(false);\n        }\n      }\n    }\n  },\n  /**\n   * Return all variables referenced by this block.\n   *\n   * @returns List of variable names.\n   */\n  getVars: function (this: ProcedureBlock): string[] {\n    return this.arguments_;\n  },\n  /**\n   * Return all variables referenced by this block.\n   *\n   * @returns List of variable models.\n   */\n  getVarModels: function (this: ProcedureBlock): VariableModel[] {\n    return this.argumentVarModels_;\n  },\n  /**\n   * Notification that a variable is renaming.\n   * If the ID matches one of this block's variables, rename it.\n   *\n   * @param oldId ID of variable to rename.\n   * @param newId ID of new variable.  May be the same as oldId, but\n   *     with an updated name.  Guaranteed to be the same type as the\n   *     old variable.\n   */\n  renameVarById: function (\n    this: ProcedureBlock & BlockSvg,\n    oldId: string,\n    newId: string,\n  ) {\n    const oldVariable = this.workspace.getVariableById(oldId)!;\n    if (oldVariable.type !== '') {\n      // Procedure arguments always have the empty type.\n      return;\n    }\n    const oldName = oldVariable.name;\n    const newVar = this.workspace.getVariableById(newId)!;\n\n    let change = false;\n    for (let i = 0; i < this.argumentVarModels_.length; i++) {\n      if (this.argumentVarModels_[i].getId() === oldId) {\n        this.arguments_[i] = newVar.name;\n        this.argumentVarModels_[i] = newVar;\n        change = true;\n      }\n    }\n    if (change) {\n      this.displayRenamedVar_(oldName, newVar.name);\n      Procedures.mutateCallers(this);\n    }\n  },\n  /**\n   * Notification that a variable is renaming but keeping the same ID.  If the\n   * variable is in use on this block, rerender to show the new name.\n   *\n   * @param variable The variable being renamed.\n   */\n  updateVarName: function (\n    this: ProcedureBlock & BlockSvg,\n    variable: VariableModel,\n  ) {\n    const newName = variable.name;\n    let change = false;\n    let oldName;\n    for (let i = 0; i < this.argumentVarModels_.length; i++) {\n      if (this.argumentVarModels_[i].getId() === variable.getId()) {\n        oldName = this.arguments_[i];\n        this.arguments_[i] = newName;\n        change = true;\n      }\n    }\n    if (change) {\n      this.displayRenamedVar_(oldName as string, newName);\n      Procedures.mutateCallers(this);\n    }\n  },\n  /**\n   * Update the display to reflect a newly renamed argument.\n   *\n   * @internal\n   * @param oldName The old display name of the argument.\n   * @param newName The new display name of the argument.\n   */\n  displayRenamedVar_: function (\n    this: ProcedureBlock & BlockSvg,\n    oldName: string,\n    newName: string,\n  ) {\n    this.updateParams_();\n    // Update the mutator's variables if the mutator is open.\n    const mutator = this.getIcon(Mutator.TYPE);\n    if (mutator && mutator.bubbleIsVisible()) {\n      const blocks = mutator.getWorkspace()!.getAllBlocks(false);\n      for (let i = 0, block; (block = blocks[i]); i++) {\n        if (\n          block.type === 'procedures_mutatorarg' &&\n          Names.equals(oldName, block.getFieldValue('NAME'))\n        ) {\n          block.setFieldValue(newName, 'NAME');\n        }\n      }\n    }\n  },\n  /**\n   * Add custom menu options to this block's context menu.\n   *\n   * @param options List of menu options to add to.\n   */\n  customContextMenu: function (\n    this: ProcedureBlock,\n    options: Array<ContextMenuOption | LegacyContextMenuOption>,\n  ) {\n    if (this.isInFlyout) {\n      return;\n    }\n    // Add option to create caller.\n    const name = this.getFieldValue('NAME');\n    const callProcedureBlockState = {\n      type: (this as AnyDuringMigration).callType_,\n      extraState: {name: name, params: this.arguments_},\n    };\n    options.push({\n      enabled: true,\n      text: Msg['PROCEDURES_CREATE_DO'].replace('%1', name),\n      callback: ContextMenu.callbackFactory(this, callProcedureBlockState),\n    });\n\n    // Add options to create getters for each parameter.\n    if (!this.isCollapsed()) {\n      for (let i = 0; i < this.argumentVarModels_.length; i++) {\n        const argVar = this.argumentVarModels_[i];\n        const getVarBlockState = {\n          type: 'variables_get',\n          fields: {\n            VAR: {name: argVar.name, id: argVar.getId(), type: argVar.type},\n          },\n        };\n        options.push({\n          enabled: true,\n          text: Msg['VARIABLES_SET_CREATE_GET'].replace('%1', argVar.name),\n          callback: ContextMenu.callbackFactory(this, getVarBlockState),\n        });\n      }\n    }\n  },\n};\n\nblocks['procedures_defnoreturn'] = {\n  ...PROCEDURE_DEF_COMMON,\n  /**\n   * Block for defining a procedure with no return value.\n   */\n  init: function (this: ProcedureBlock & BlockSvg) {\n    const initName = Procedures.findLegalName('', this);\n    const nameField = fieldRegistry.fromJson({\n      type: 'field_input',\n      text: initName,\n    }) as FieldTextInput;\n    nameField!.setValidator(Procedures.rename);\n    nameField.setSpellcheck(false);\n    this.appendDummyInput()\n      .appendField(Msg['PROCEDURES_DEFNORETURN_TITLE'])\n      .appendField(nameField, 'NAME')\n      .appendField('', 'PARAMS');\n    this.setMutator(new Mutator(['procedures_mutatorarg'], this));\n    if (\n      (this.workspace.options.comments ||\n        (this.workspace.options.parentWorkspace &&\n          this.workspace.options.parentWorkspace.options.comments)) &&\n      Msg['PROCEDURES_DEFNORETURN_COMMENT']\n    ) {\n      this.setCommentText(Msg['PROCEDURES_DEFNORETURN_COMMENT']);\n    }\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_DEFNORETURN_TOOLTIP']);\n    this.setHelpUrl(Msg['PROCEDURES_DEFNORETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.setStatements_(true);\n    this.statementConnection_ = null;\n  },\n  /**\n   * Return the signature of this procedure definition.\n   *\n   * @returns Tuple containing three elements:\n   *     - the name of the defined procedure,\n   *     - a list of all its arguments,\n   *     - that it DOES NOT have a return value.\n   */\n  getProcedureDef: function (this: ProcedureBlock): [string, string[], false] {\n    return [this.getFieldValue('NAME'), this.arguments_, false];\n  },\n  callType_: 'procedures_callnoreturn',\n};\n\nblocks['procedures_defreturn'] = {\n  ...PROCEDURE_DEF_COMMON,\n  /**\n   * Block for defining a procedure with a return value.\n   */\n  init: function (this: ProcedureBlock & BlockSvg) {\n    const initName = Procedures.findLegalName('', this);\n    const nameField = fieldRegistry.fromJson({\n      type: 'field_input',\n      text: initName,\n    }) as FieldTextInput;\n    nameField.setValidator(Procedures.rename);\n    nameField.setSpellcheck(false);\n    this.appendDummyInput()\n      .appendField(Msg['PROCEDURES_DEFRETURN_TITLE'])\n      .appendField(nameField, 'NAME')\n      .appendField('', 'PARAMS');\n    this.appendValueInput('RETURN')\n      .setAlign(Align.RIGHT)\n      .appendField(Msg['PROCEDURES_DEFRETURN_RETURN']);\n    this.setMutator(new Mutator(['procedures_mutatorarg'], this));\n    if (\n      (this.workspace.options.comments ||\n        (this.workspace.options.parentWorkspace &&\n          this.workspace.options.parentWorkspace.options.comments)) &&\n      Msg['PROCEDURES_DEFRETURN_COMMENT']\n    ) {\n      this.setCommentText(Msg['PROCEDURES_DEFRETURN_COMMENT']);\n    }\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_DEFRETURN_TOOLTIP']);\n    this.setHelpUrl(Msg['PROCEDURES_DEFRETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.setStatements_(true);\n    this.statementConnection_ = null;\n  },\n  /**\n   * Return the signature of this procedure definition.\n   *\n   * @returns Tuple containing three elements:\n   *     - the name of the defined procedure,\n   *     - a list of all its arguments,\n   *     - that it DOES have a return value.\n   */\n  getProcedureDef: function (this: ProcedureBlock): [string, string[], true] {\n    return [this.getFieldValue('NAME'), this.arguments_, true];\n  },\n  callType_: 'procedures_callreturn',\n};\n\n/** Type of a procedures_mutatorcontainer block. */\ntype ContainerBlock = Block & ContainerMixin;\ninterface ContainerMixin extends ContainerMixinType {}\ntype ContainerMixinType = typeof PROCEDURES_MUTATORCONTAINER;\n\nconst PROCEDURES_MUTATORCONTAINER = {\n  /**\n   * Mutator block for procedure container.\n   */\n  init: function (this: ContainerBlock) {\n    this.appendDummyInput().appendField(\n      Msg['PROCEDURES_MUTATORCONTAINER_TITLE'],\n    );\n    this.appendStatementInput('STACK');\n    this.appendDummyInput('STATEMENT_INPUT')\n      .appendField(Msg['PROCEDURES_ALLOW_STATEMENTS'])\n      .appendField(\n        fieldRegistry.fromJson({\n          type: 'field_checkbox',\n          checked: true,\n        }) as FieldCheckbox,\n        'STATEMENTS',\n      );\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_MUTATORCONTAINER_TOOLTIP']);\n    this.contextMenu = false;\n  },\n};\nblocks['procedures_mutatorcontainer'] = PROCEDURES_MUTATORCONTAINER;\n\n/** Type of a procedures_mutatorarg block. */\ntype ArgumentBlock = Block & ArgumentMixin;\ninterface ArgumentMixin extends ArgumentMixinType {}\ntype ArgumentMixinType = typeof PROCEDURES_MUTATORARGUMENT;\n\n// TODO(#6920): This is kludgy.\ntype FieldTextInputForArgument = FieldTextInput & {\n  oldShowEditorFn_(_e?: Event, quietInput?: boolean): void;\n  createdVariables_: VariableModel[];\n};\n\nconst PROCEDURES_MUTATORARGUMENT = {\n  /**\n   * Mutator block for procedure argument.\n   */\n  init: function (this: ArgumentBlock) {\n    const field = fieldRegistry.fromJson({\n      type: 'field_input',\n      text: Procedures.DEFAULT_ARG,\n    }) as FieldTextInputForArgument;\n    field.setValidator(this.validator_);\n    // Hack: override showEditor to do just a little bit more work.\n    // We don't have a good place to hook into the start of a text edit.\n    field.oldShowEditorFn_ = (field as AnyDuringMigration).showEditor_;\n    const newShowEditorFn = function (this: typeof field) {\n      this.createdVariables_ = [];\n      this.oldShowEditorFn_();\n    };\n    (field as AnyDuringMigration).showEditor_ = newShowEditorFn;\n\n    this.appendDummyInput()\n      .appendField(Msg['PROCEDURES_MUTATORARG_TITLE'])\n      .appendField(field, 'NAME');\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_MUTATORARG_TOOLTIP']);\n    this.contextMenu = false;\n\n    // Create the default variable when we drag the block in from the flyout.\n    // Have to do this after installing the field on the block.\n    field.onFinishEditing_ = this.deleteIntermediateVars_;\n    // Create an empty list so onFinishEditing_ has something to look at, even\n    // though the editor was never opened.\n    field.createdVariables_ = [];\n    field.onFinishEditing_('x');\n  },\n\n  /**\n   * Obtain a valid name for the procedure argument. Create a variable if\n   * necessary.\n   * Merge runs of whitespace.  Strip leading and trailing whitespace.\n   * Beyond this, all names are legal.\n   *\n   * @internal\n   * @param varName User-supplied name.\n   * @returns Valid name, or null if a name was not specified.\n   */\n  validator_: function (\n    this: FieldTextInputForArgument,\n    varName: string,\n  ): string | null {\n    const sourceBlock = this.getSourceBlock()!;\n    const outerWs = sourceBlock!.workspace.getRootWorkspace()!;\n    varName = varName.replace(/[\\s\\xa0]+/g, ' ').replace(/^ | $/g, '');\n    if (!varName) {\n      return null;\n    }\n\n    // Prevents duplicate parameter names in functions\n    const workspace =\n      (sourceBlock.workspace as WorkspaceSvg).targetWorkspace ||\n      sourceBlock.workspace;\n    const blocks = workspace.getAllBlocks(false);\n    const caselessName = varName.toLowerCase();\n    for (let i = 0; i < blocks.length; i++) {\n      if (blocks[i].id === this.getSourceBlock()!.id) {\n        continue;\n      }\n      // Other blocks values may not be set yet when this is loaded.\n      const otherVar = blocks[i].getFieldValue('NAME');\n      if (otherVar && otherVar.toLowerCase() === caselessName) {\n        return null;\n      }\n    }\n\n    // Don't create variables for arg blocks that\n    // only exist in the mutator's flyout.\n    if (sourceBlock.isInFlyout) {\n      return varName;\n    }\n\n    let model = outerWs.getVariable(varName, '');\n    if (model && model.name !== varName) {\n      // Rename the variable (case change)\n      outerWs.renameVariableById(model.getId(), varName);\n    }\n    if (!model) {\n      model = outerWs.createVariable(varName, '');\n      if (model && this.createdVariables_) {\n        this.createdVariables_.push(model);\n      }\n    }\n    return varName;\n  },\n\n  /**\n   * Called when focusing away from the text field.\n   * Deletes all variables that were created as the user typed their intended\n   * variable name.\n   *\n   * @internal\n   * @param  newText The new variable name.\n   */\n  deleteIntermediateVars_: function (\n    this: FieldTextInputForArgument,\n    newText: string,\n  ) {\n    const outerWs = this.getSourceBlock()!.workspace.getRootWorkspace();\n    if (!outerWs) {\n      return;\n    }\n    for (let i = 0; i < this.createdVariables_.length; i++) {\n      const model = this.createdVariables_[i];\n      if (model.name !== newText) {\n        outerWs.deleteVariableById(model.getId());\n      }\n    }\n  },\n};\nblocks['procedures_mutatorarg'] = PROCEDURES_MUTATORARGUMENT;\n\n/** Type of a block using the PROCEDURE_CALL_COMMON mixin. */\ntype CallBlock = Block & CallMixin;\ninterface CallMixin extends CallMixinType {\n  argumentVarModels_: VariableModel[];\n  arguments_: string[];\n  defType_: string;\n  quarkIds_: string[] | null;\n  quarkConnections_: {[id: string]: Connection};\n  previousEnabledState_: boolean;\n}\ntype CallMixinType = typeof PROCEDURE_CALL_COMMON;\n\n/** Extra state for serialising call blocks. */\ntype CallExtraState = {\n  name: string;\n  params?: string[];\n};\n\n/**\n * Common properties for the procedure_callnoreturn and\n * procedure_callreturn blocks.\n */\nconst PROCEDURE_CALL_COMMON = {\n  /**\n   * Returns the name of the procedure this block calls.\n   *\n   * @returns Procedure name.\n   */\n  getProcedureCall: function (this: CallBlock): string {\n    // The NAME field is guaranteed to exist, null will never be returned.\n    return this.getFieldValue('NAME');\n  },\n  /**\n   * Notification that a procedure is renaming.\n   * If the name matches this block's procedure, rename it.\n   *\n   * @param oldName Previous name of procedure.\n   * @param newName Renamed procedure.\n   */\n  renameProcedure: function (\n    this: CallBlock,\n    oldName: string,\n    newName: string,\n  ) {\n    if (Names.equals(oldName, this.getProcedureCall())) {\n      this.setFieldValue(newName, 'NAME');\n      const baseMsg = this.outputConnection\n        ? Msg['PROCEDURES_CALLRETURN_TOOLTIP']\n        : Msg['PROCEDURES_CALLNORETURN_TOOLTIP'];\n      this.setTooltip(baseMsg.replace('%1', newName));\n    }\n  },\n  /**\n   * Notification that the procedure's parameters have changed.\n   *\n   * @internal\n   * @param paramNames New param names, e.g. ['x', 'y', 'z'].\n   * @param paramIds IDs of params (consistent for each parameter\n   *     through the life of a mutator, regardless of param renaming),\n   *     e.g. ['piua', 'f8b_', 'oi.o'].\n   */\n  setProcedureParameters_: function (\n    this: CallBlock,\n    paramNames: string[],\n    paramIds: string[],\n  ) {\n    // Data structures:\n    // this.arguments = ['x', 'y']\n    //     Existing param names.\n    // this.quarkConnections_ {piua: null, f8b_: Connection}\n    //     Look-up of paramIds to connections plugged into the call block.\n    // this.quarkIds_ = ['piua', 'f8b_']\n    //     Existing param IDs.\n    // Note that quarkConnections_ may include IDs that no longer exist, but\n    // which might reappear if a param is reattached in the mutator.\n    const defBlock = Procedures.getDefinition(\n      this.getProcedureCall(),\n      this.workspace,\n    );\n    const mutatorIcon = defBlock && defBlock.getIcon(Mutator.TYPE);\n    const mutatorOpen = mutatorIcon && mutatorIcon.bubbleIsVisible();\n    if (!mutatorOpen) {\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n    } else {\n      // fix #6091 - this call could cause an error when outside if-else\n      // expanding block while mutating prevents another error (ancient fix)\n      this.setCollapsed(false);\n    }\n    // Test arguments (arrays of strings) for changes. '\\n' is not a valid\n    // argument name character, so it is a valid delimiter here.\n    if (paramNames.join('\\n') === this.arguments_.join('\\n')) {\n      // No change.\n      this.quarkIds_ = paramIds;\n      return;\n    }\n    if (paramIds.length !== paramNames.length) {\n      throw RangeError('paramNames and paramIds must be the same length.');\n    }\n    if (!this.quarkIds_) {\n      // Initialize tracking for this block.\n      this.quarkConnections_ = {};\n      this.quarkIds_ = [];\n    }\n    // Update the quarkConnections_ with existing connections.\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const input = this.getInput('ARG' + i);\n      if (input) {\n        const connection = input.connection!.targetConnection!;\n        this.quarkConnections_[this.quarkIds_[i]] = connection;\n        if (\n          mutatorOpen &&\n          connection &&\n          paramIds.indexOf(this.quarkIds_[i]) === -1\n        ) {\n          // This connection should no longer be attached to this block.\n          connection.disconnect();\n          connection.getSourceBlock().bumpNeighbours();\n        }\n      }\n    }\n    // Rebuild the block's arguments.\n    this.arguments_ = ([] as string[]).concat(paramNames);\n    // And rebuild the argument model list.\n    this.argumentVarModels_ = [];\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const variable = Variables.getOrCreateVariablePackage(\n        this.workspace,\n        null,\n        this.arguments_[i],\n        '',\n      );\n      this.argumentVarModels_.push(variable);\n    }\n\n    this.updateShape_();\n    this.quarkIds_ = paramIds;\n    // Reconnect any child blocks.\n    if (this.quarkIds_) {\n      for (let i = 0; i < this.arguments_.length; i++) {\n        const quarkId: string = this.quarkIds_[i]; // TODO(#6920)\n        if (quarkId in this.quarkConnections_) {\n          // TODO(#6920): investigate claimed circular initialisers.\n          const connection: Connection = this.quarkConnections_[quarkId];\n          if (!connection?.reconnect(this, 'ARG' + i)) {\n            // Block no longer exists or has been attached elsewhere.\n            delete this.quarkConnections_[quarkId];\n          }\n        }\n      }\n    }\n  },\n  /**\n   * Modify this block to have the correct number of arguments.\n   *\n   * @internal\n   */\n  updateShape_: function (this: CallBlock) {\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const argField = this.getField('ARGNAME' + i);\n      if (argField) {\n        // Ensure argument name is up to date.\n        // The argument name field is deterministic based on the mutation,\n        // no need to fire a change event.\n        Events.disable();\n        try {\n          argField.setValue(this.arguments_[i]);\n        } finally {\n          Events.enable();\n        }\n      } else {\n        // Add new input.\n        const newField = fieldRegistry.fromJson({\n          type: 'field_label',\n          text: this.arguments_[i],\n        }) as FieldLabel;\n        const input = this.appendValueInput('ARG' + i)\n          .setAlign(Align.RIGHT)\n          .appendField(newField, 'ARGNAME' + i);\n        input.init();\n      }\n    }\n    // Remove deleted inputs.\n    for (let i = this.arguments_.length; this.getInput('ARG' + i); i++) {\n      this.removeInput('ARG' + i);\n    }\n    // Add 'with:' if there are parameters, remove otherwise.\n    const topRow = this.getInput('TOPROW');\n    if (topRow) {\n      if (this.arguments_.length) {\n        if (!this.getField('WITH')) {\n          topRow.appendField(Msg['PROCEDURES_CALL_BEFORE_PARAMS'], 'WITH');\n          topRow.init();\n        }\n      } else {\n        if (this.getField('WITH')) {\n          topRow.removeField('WITH');\n        }\n      }\n    }\n  },\n  /**\n   * Create XML to represent the (non-editable) name and arguments.\n   * Backwards compatible serialization implementation.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: CallBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('name', this.getProcedureCall());\n    for (let i = 0; i < this.arguments_.length; i++) {\n      const parameter = xmlUtils.createElement('arg');\n      parameter.setAttribute('name', this.arguments_[i]);\n      container.appendChild(parameter);\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the (non-editable) name and parameters.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: CallBlock, xmlElement: Element) {\n    const name = xmlElement.getAttribute('name')!;\n    this.renameProcedure(this.getProcedureCall(), name);\n    const args: string[] = [];\n    const paramIds = [];\n    for (let i = 0, childNode; (childNode = xmlElement.childNodes[i]); i++) {\n      if (childNode.nodeName.toLowerCase() === 'arg') {\n        args.push((childNode as Element).getAttribute('name')!);\n        paramIds.push((childNode as Element).getAttribute('paramId')!);\n      }\n    }\n    this.setProcedureParameters_(args, paramIds);\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   *\n   * @returns The state of this block, ie the params and procedure name.\n   */\n  saveExtraState: function (this: CallBlock): CallExtraState {\n    const state = Object.create(null);\n    state['name'] = this.getProcedureCall();\n    if (this.arguments_.length) {\n      state['params'] = this.arguments_;\n    }\n    return state;\n  },\n  /**\n   * Applies the given state to this block.\n   *\n   * @param state The state to apply to this block, ie the params and\n   *     procedure name.\n   */\n  loadExtraState: function (this: CallBlock, state: CallExtraState) {\n    this.renameProcedure(this.getProcedureCall(), state['name']);\n    const params = state['params'];\n    if (params) {\n      const ids: string[] = [];\n      ids.length = params.length;\n      ids.fill(null as unknown as string); // TODO(#6920)\n      this.setProcedureParameters_(params, ids);\n    }\n  },\n  /**\n   * Return all variables referenced by this block.\n   *\n   * @returns List of variable names.\n   */\n  getVars: function (this: CallBlock): string[] {\n    return this.arguments_;\n  },\n  /**\n   * Return all variables referenced by this block.\n   *\n   * @returns List of variable models.\n   */\n  getVarModels: function (this: CallBlock): VariableModel[] {\n    return this.argumentVarModels_;\n  },\n  /**\n   * Procedure calls cannot exist without the corresponding procedure\n   * definition.  Enforce this link whenever an event is fired.\n   *\n   * @param event Change event.\n   */\n  onchange: function (this: CallBlock, event: AbstractEvent) {\n    if (!this.workspace || this.workspace.isFlyout) {\n      // Block is deleted or is in a flyout.\n      return;\n    }\n    if (!event.recordUndo) {\n      // Events not generated by user. Skip handling.\n      return;\n    }\n    if (\n      event.type === Events.BLOCK_CREATE &&\n      (event as BlockCreate).ids!.indexOf(this.id) !== -1\n    ) {\n      // Look for the case where a procedure call was created (usually through\n      // paste) and there is no matching definition.  In this case, create\n      // an empty definition block with the correct signature.\n      const name = this.getProcedureCall();\n      let def = Procedures.getDefinition(name, this.workspace);\n      if (\n        def &&\n        (def.type !== this.defType_ ||\n          JSON.stringify(def.getVars()) !== JSON.stringify(this.arguments_))\n      ) {\n        // The signatures don't match.\n        def = null;\n      }\n      if (!def) {\n        Events.setGroup(event.group);\n        /**\n         * Create matching definition block.\n         * <xml xmlns=\"https://developers.google.com/blockly/xml\">\n         *   <block type=\"procedures_defreturn\" x=\"10\" y=\"20\">\n         *     <mutation name=\"test\">\n         *       <arg name=\"x\"></arg>\n         *     </mutation>\n         *     <field name=\"NAME\">test</field>\n         *   </block>\n         * </xml>\n         */\n        const xml = xmlUtils.createElement('xml');\n        const block = xmlUtils.createElement('block');\n        block.setAttribute('type', this.defType_);\n        const xy = this.getRelativeToSurfaceXY();\n        const x = xy.x + config.snapRadius * (this.RTL ? -1 : 1);\n        const y = xy.y + config.snapRadius * 2;\n        block.setAttribute('x', `${x}`);\n        block.setAttribute('y', `${y}`);\n        const mutation = this.mutationToDom();\n        block.appendChild(mutation);\n        const field = xmlUtils.createElement('field');\n        field.setAttribute('name', 'NAME');\n        const callName = this.getProcedureCall();\n        const newName = Procedures.findLegalName(callName, this);\n        if (callName !== newName) {\n          this.renameProcedure(callName, newName);\n        }\n        field.appendChild(xmlUtils.createTextNode(callName));\n        block.appendChild(field);\n        xml.appendChild(block);\n        Xml.domToWorkspace(xml, this.workspace);\n        Events.setGroup(false);\n      }\n    } else if (event.type === Events.BLOCK_DELETE) {\n      // Look for the case where a procedure definition has been deleted,\n      // leaving this block (a procedure call) orphaned.  In this case, delete\n      // the orphan.\n      const name = this.getProcedureCall();\n      const def = Procedures.getDefinition(name, this.workspace);\n      if (!def) {\n        Events.setGroup(event.group);\n        this.dispose(true);\n        Events.setGroup(false);\n      }\n    } else if (\n      event.type === Events.BLOCK_CHANGE &&\n      (event as BlockChange).element === 'disabled'\n    ) {\n      const blockChangeEvent = event as BlockChange;\n      const name = this.getProcedureCall();\n      const def = Procedures.getDefinition(name, this.workspace);\n      if (def && def.id === blockChangeEvent.blockId) {\n        // in most cases the old group should be ''\n        const oldGroup = Events.getGroup();\n        if (oldGroup) {\n          // This should only be possible programmatically and may indicate a\n          // problem with event grouping. If you see this message please\n          // investigate. If the use ends up being valid we may need to reorder\n          // events in the undo stack.\n          console.log(\n            'Saw an existing group while responding to a definition change',\n          );\n        }\n        Events.setGroup(event.group);\n        if (blockChangeEvent.newValue) {\n          this.previousEnabledState_ = this.isEnabled();\n          this.setEnabled(false);\n        } else {\n          this.setEnabled(this.previousEnabledState_);\n        }\n        Events.setGroup(oldGroup);\n      }\n    }\n  },\n  /**\n   * Add menu option to find the definition block for this call.\n   *\n   * @param options List of menu options to add to.\n   */\n  customContextMenu: function (\n    this: CallBlock,\n    options: Array<ContextMenuOption | LegacyContextMenuOption>,\n  ) {\n    if (!(this.workspace as WorkspaceSvg).isMovable()) {\n      // If we center on the block and the workspace isn't movable we could\n      // loose blocks at the edges of the workspace.\n      return;\n    }\n\n    const name = this.getProcedureCall();\n    const workspace = this.workspace;\n    options.push({\n      enabled: true,\n      text: Msg['PROCEDURES_HIGHLIGHT_DEF'],\n      callback: function () {\n        const def = Procedures.getDefinition(name, workspace);\n        if (def) {\n          (workspace as WorkspaceSvg).centerOnBlock(def.id);\n          (def as BlockSvg).select();\n        }\n      },\n    });\n  },\n};\n\nblocks['procedures_callnoreturn'] = {\n  ...PROCEDURE_CALL_COMMON,\n  /**\n   * Block for calling a procedure with no return value.\n   */\n  init: function (this: CallBlock) {\n    this.appendDummyInput('TOPROW').appendField('', 'NAME');\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    // Tooltip is set in renameProcedure.\n    this.setHelpUrl(Msg['PROCEDURES_CALLNORETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.quarkConnections_ = {};\n    this.quarkIds_ = null;\n    this.previousEnabledState_ = true;\n  },\n\n  defType_: 'procedures_defnoreturn',\n};\n\nblocks['procedures_callreturn'] = {\n  ...PROCEDURE_CALL_COMMON,\n  /**\n   * Block for calling a procedure with a return value.\n   */\n  init: function (this: CallBlock) {\n    this.appendDummyInput('TOPROW').appendField('', 'NAME');\n    this.setOutput(true);\n    this.setStyle('procedure_blocks');\n    // Tooltip is set in domToMutation.\n    this.setHelpUrl(Msg['PROCEDURES_CALLRETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.quarkConnections_ = {};\n    this.quarkIds_ = null;\n    this.previousEnabledState_ = true;\n  },\n\n  defType_: 'procedures_defreturn',\n};\n\n/** Type of a procedures_ifreturn block. */\ntype IfReturnBlock = Block & IfReturnMixin;\ninterface IfReturnMixin extends IfReturnMixinType {\n  hasReturnValue_: boolean;\n}\ntype IfReturnMixinType = typeof PROCEDURES_IFRETURN;\n\nconst PROCEDURES_IFRETURN = {\n  /**\n   * Block for conditionally returning a value from a procedure.\n   */\n  init: function (this: IfReturnBlock) {\n    this.appendValueInput('CONDITION')\n      .setCheck('Boolean')\n      .appendField(Msg['CONTROLS_IF_MSG_IF']);\n    this.appendValueInput('VALUE').appendField(\n      Msg['PROCEDURES_DEFRETURN_RETURN'],\n    );\n    this.setInputsInline(true);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Msg['PROCEDURES_IFRETURN_TOOLTIP']);\n    this.setHelpUrl(Msg['PROCEDURES_IFRETURN_HELPURL']);\n    this.hasReturnValue_ = true;\n  },\n  /**\n   * Create XML to represent whether this block has a return value.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: IfReturnBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('value', String(Number(this.hasReturnValue_)));\n    return container;\n  },\n  /**\n   * Parse XML to restore whether this block has a return value.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: IfReturnBlock, xmlElement: Element) {\n    const value = xmlElement.getAttribute('value');\n    this.hasReturnValue_ = value === '1';\n    if (!this.hasReturnValue_) {\n      this.removeInput('VALUE');\n      this.appendDummyInput('VALUE').appendField(\n        Msg['PROCEDURES_DEFRETURN_RETURN'],\n      );\n    }\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this block is already encoded in the\n  // block's position in the workspace.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Called whenever anything on the workspace changes.\n   * Add warning if this flow block is not nested inside a loop.\n   *\n   * @param e Move event.\n   */\n  onchange: function (this: IfReturnBlock, e: AbstractEvent) {\n    if (\n      ((this.workspace as WorkspaceSvg).isDragging &&\n        (this.workspace as WorkspaceSvg).isDragging()) ||\n      e.type !== Events.BLOCK_MOVE\n    ) {\n      return; // Don't change state at the start of a drag.\n    }\n    let legal = false;\n    // Is the block nested in a procedure?\n    let block = this; // eslint-disable-line @typescript-eslint/no-this-alias\n    do {\n      if (this.FUNCTION_TYPES.indexOf(block.type) !== -1) {\n        legal = true;\n        break;\n      }\n      block = block.getSurroundParent()!;\n    } while (block);\n    if (legal) {\n      // If needed, toggle whether this block has a return value.\n      if (block.type === 'procedures_defnoreturn' && this.hasReturnValue_) {\n        this.removeInput('VALUE');\n        this.appendDummyInput('VALUE').appendField(\n          Msg['PROCEDURES_DEFRETURN_RETURN'],\n        );\n        this.hasReturnValue_ = false;\n      } else if (\n        block.type === 'procedures_defreturn' &&\n        !this.hasReturnValue_\n      ) {\n        this.removeInput('VALUE');\n        this.appendValueInput('VALUE').appendField(\n          Msg['PROCEDURES_DEFRETURN_RETURN'],\n        );\n        this.hasReturnValue_ = true;\n      }\n      this.setWarningText(null);\n    } else {\n      this.setWarningText(Msg['PROCEDURES_IFRETURN_WARNING']);\n    }\n    if (!this.isInFlyout) {\n      const group = Events.getGroup();\n      // Makes it so the move and the disable event get undone together.\n      Events.setGroup(e.group);\n      this.setEnabled(legal);\n      Events.setGroup(group);\n    }\n  },\n  /**\n   * List of block types that are functions and thus do not need warnings.\n   * To add a new function type add this to your code:\n   * Blocks['procedures_ifreturn'].FUNCTION_TYPES.push('custom_func');\n   */\n  FUNCTION_TYPES: ['procedures_defnoreturn', 'procedures_defreturn'],\n};\nblocks['procedures_ifreturn'] = PROCEDURES_IFRETURN;\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.math\n\nimport * as Extensions from '../core/extensions.js';\nimport type {FieldDropdown} from '../core/field_dropdown.js';\nimport * as xmlUtils from '../core/utils/xml.js';\nimport type {Block} from '../core/block.js';\nimport {\n  createBlockDefinitionsFromJsonArray,\n  defineBlocks,\n} from '../core/common.js';\nimport '../core/field_dropdown.js';\nimport '../core/field_label.js';\nimport '../core/field_number.js';\nimport '../core/field_variable.js';\n\n/**\n * A dictionary of the block definitions provided by this module.\n */\nexport const blocks = createBlockDefinitionsFromJsonArray([\n  // Block for numeric value.\n  {\n    'type': 'math_number',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_number',\n        'name': 'NUM',\n        'value': 0,\n      },\n    ],\n    'output': 'Number',\n    'helpUrl': '%{BKY_MATH_NUMBER_HELPURL}',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_NUMBER_TOOLTIP}',\n    'extensions': ['parent_tooltip_when_inline'],\n  },\n\n  // Block for basic arithmetic operator.\n  {\n    'type': 'math_arithmetic',\n    'message0': '%1 %2 %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'A',\n        'check': 'Number',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_ADDITION_SYMBOL}', 'ADD'],\n          ['%{BKY_MATH_SUBTRACTION_SYMBOL}', 'MINUS'],\n          ['%{BKY_MATH_MULTIPLICATION_SYMBOL}', 'MULTIPLY'],\n          ['%{BKY_MATH_DIVISION_SYMBOL}', 'DIVIDE'],\n          ['%{BKY_MATH_POWER_SYMBOL}', 'POWER'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'B',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_ARITHMETIC_HELPURL}',\n    'extensions': ['math_op_tooltip'],\n  },\n\n  // Block for advanced math operators with single operand.\n  {\n    'type': 'math_single',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_SINGLE_OP_ROOT}', 'ROOT'],\n          ['%{BKY_MATH_SINGLE_OP_ABSOLUTE}', 'ABS'],\n          ['-', 'NEG'],\n          ['ln', 'LN'],\n          ['log10', 'LOG10'],\n          ['e^', 'EXP'],\n          ['10^', 'POW10'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'NUM',\n        'check': 'Number',\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_SINGLE_HELPURL}',\n    'extensions': ['math_op_tooltip'],\n  },\n\n  // Block for trigonometry operators.\n  {\n    'type': 'math_trig',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_TRIG_SIN}', 'SIN'],\n          ['%{BKY_MATH_TRIG_COS}', 'COS'],\n          ['%{BKY_MATH_TRIG_TAN}', 'TAN'],\n          ['%{BKY_MATH_TRIG_ASIN}', 'ASIN'],\n          ['%{BKY_MATH_TRIG_ACOS}', 'ACOS'],\n          ['%{BKY_MATH_TRIG_ATAN}', 'ATAN'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'NUM',\n        'check': 'Number',\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_TRIG_HELPURL}',\n    'extensions': ['math_op_tooltip'],\n  },\n\n  // Block for constants: PI, E, the Golden Ratio, sqrt(2), 1/sqrt(2), INFINITY.\n  {\n    'type': 'math_constant',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'CONSTANT',\n        'options': [\n          ['\\u03c0', 'PI'],\n          ['e', 'E'],\n          ['\\u03c6', 'GOLDEN_RATIO'],\n          ['sqrt(2)', 'SQRT2'],\n          ['sqrt(\\u00bd)', 'SQRT1_2'],\n          ['\\u221e', 'INFINITY'],\n        ],\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_CONSTANT_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_CONSTANT_HELPURL}',\n  },\n\n  // Block for checking if a number is even, odd, prime, whole, positive,\n  // negative or if it is divisible by certain number.\n  {\n    'type': 'math_number_property',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'NUMBER_TO_CHECK',\n        'check': 'Number',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'PROPERTY',\n        'options': [\n          ['%{BKY_MATH_IS_EVEN}', 'EVEN'],\n          ['%{BKY_MATH_IS_ODD}', 'ODD'],\n          ['%{BKY_MATH_IS_PRIME}', 'PRIME'],\n          ['%{BKY_MATH_IS_WHOLE}', 'WHOLE'],\n          ['%{BKY_MATH_IS_POSITIVE}', 'POSITIVE'],\n          ['%{BKY_MATH_IS_NEGATIVE}', 'NEGATIVE'],\n          ['%{BKY_MATH_IS_DIVISIBLE_BY}', 'DIVISIBLE_BY'],\n        ],\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Boolean',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_IS_TOOLTIP}',\n    'mutator': 'math_is_divisibleby_mutator',\n  },\n\n  // Block for adding to a variable in place.\n  {\n    'type': 'math_change',\n    'message0': '%{BKY_MATH_CHANGE_TITLE}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': '%{BKY_MATH_CHANGE_TITLE_ITEM}',\n      },\n      {\n        'type': 'input_value',\n        'name': 'DELTA',\n        'check': 'Number',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'variable_blocks',\n    'helpUrl': '%{BKY_MATH_CHANGE_HELPURL}',\n    'extensions': ['math_change_tooltip'],\n  },\n\n  // Block for rounding functions.\n  {\n    'type': 'math_round',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_ROUND_OPERATOR_ROUND}', 'ROUND'],\n          ['%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}', 'ROUNDUP'],\n          ['%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}', 'ROUNDDOWN'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'NUM',\n        'check': 'Number',\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_ROUND_HELPURL}',\n    'tooltip': '%{BKY_MATH_ROUND_TOOLTIP}',\n  },\n\n  // Block for evaluating a list of numbers to return sum, average, min, max,\n  // etc.  Some functions also work on text (min, max, mode, median).\n  {\n    'type': 'math_on_list',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_MATH_ONLIST_OPERATOR_SUM}', 'SUM'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_MIN}', 'MIN'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_MAX}', 'MAX'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}', 'AVERAGE'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}', 'MEDIAN'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_MODE}', 'MODE'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}', 'STD_DEV'],\n          ['%{BKY_MATH_ONLIST_OPERATOR_RANDOM}', 'RANDOM'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'LIST',\n        'check': 'Array',\n      },\n    ],\n    'output': 'Number',\n    'style': 'math_blocks',\n    'helpUrl': '%{BKY_MATH_ONLIST_HELPURL}',\n    'mutator': 'math_modes_of_list_mutator',\n    'extensions': ['math_op_tooltip'],\n  },\n\n  // Block for remainder of a division.\n  {\n    'type': 'math_modulo',\n    'message0': '%{BKY_MATH_MODULO_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'DIVIDEND',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'DIVISOR',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_MODULO_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_MODULO_HELPURL}',\n  },\n\n  // Block for constraining a number between two limits.\n  {\n    'type': 'math_constrain',\n    'message0': '%{BKY_MATH_CONSTRAIN_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'LOW',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'HIGH',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_CONSTRAIN_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_CONSTRAIN_HELPURL}',\n  },\n\n  // Block for random integer between [X] and [Y].\n  {\n    'type': 'math_random_int',\n    'message0': '%{BKY_MATH_RANDOM_INT_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'FROM',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'TO',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_RANDOM_INT_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_RANDOM_INT_HELPURL}',\n  },\n\n  // Block for random integer between [X] and [Y].\n  {\n    'type': 'math_random_float',\n    'message0': '%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}',\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_RANDOM_FLOAT_HELPURL}',\n  },\n\n  // Block for calculating atan2 of [X] and [Y].\n  {\n    'type': 'math_atan2',\n    'message0': '%{BKY_MATH_ATAN2_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'X',\n        'check': 'Number',\n      },\n      {\n        'type': 'input_value',\n        'name': 'Y',\n        'check': 'Number',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Number',\n    'style': 'math_blocks',\n    'tooltip': '%{BKY_MATH_ATAN2_TOOLTIP}',\n    'helpUrl': '%{BKY_MATH_ATAN2_HELPURL}',\n  },\n]);\n\n/**\n * Mapping of math block OP value to tooltip message for blocks\n * math_arithmetic, math_simple, math_trig, and math_on_lists.\n *\n * @see {Extensions#buildTooltipForDropdown}\n * @package\n * @readonly\n */\nconst TOOLTIPS_BY_OP = {\n  // math_arithmetic\n  'ADD': '%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}',\n  'MINUS': '%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}',\n  'MULTIPLY': '%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}',\n  'DIVIDE': '%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}',\n  'POWER': '%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}',\n\n  // math_simple\n  'ROOT': '%{BKY_MATH_SINGLE_TOOLTIP_ROOT}',\n  'ABS': '%{BKY_MATH_SINGLE_TOOLTIP_ABS}',\n  'NEG': '%{BKY_MATH_SINGLE_TOOLTIP_NEG}',\n  'LN': '%{BKY_MATH_SINGLE_TOOLTIP_LN}',\n  'LOG10': '%{BKY_MATH_SINGLE_TOOLTIP_LOG10}',\n  'EXP': '%{BKY_MATH_SINGLE_TOOLTIP_EXP}',\n  'POW10': '%{BKY_MATH_SINGLE_TOOLTIP_POW10}',\n\n  // math_trig\n  'SIN': '%{BKY_MATH_TRIG_TOOLTIP_SIN}',\n  'COS': '%{BKY_MATH_TRIG_TOOLTIP_COS}',\n  'TAN': '%{BKY_MATH_TRIG_TOOLTIP_TAN}',\n  'ASIN': '%{BKY_MATH_TRIG_TOOLTIP_ASIN}',\n  'ACOS': '%{BKY_MATH_TRIG_TOOLTIP_ACOS}',\n  'ATAN': '%{BKY_MATH_TRIG_TOOLTIP_ATAN}',\n\n  // math_on_lists\n  'SUM': '%{BKY_MATH_ONLIST_TOOLTIP_SUM}',\n  'MIN': '%{BKY_MATH_ONLIST_TOOLTIP_MIN}',\n  'MAX': '%{BKY_MATH_ONLIST_TOOLTIP_MAX}',\n  'AVERAGE': '%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}',\n  'MEDIAN': '%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}',\n  'MODE': '%{BKY_MATH_ONLIST_TOOLTIP_MODE}',\n  'STD_DEV': '%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}',\n  'RANDOM': '%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}',\n};\n\nExtensions.register(\n  'math_op_tooltip',\n  Extensions.buildTooltipForDropdown('OP', TOOLTIPS_BY_OP),\n);\n\n/** Type of a block that has IS_DIVISBLEBY_MUTATOR_MIXIN */\ntype DivisiblebyBlock = Block & DivisiblebyMixin;\ninterface DivisiblebyMixin extends DivisiblebyMixinType {}\ntype DivisiblebyMixinType = typeof IS_DIVISIBLEBY_MUTATOR_MIXIN;\n\n/**\n * Mixin for mutator functions in the 'math_is_divisibleby_mutator'\n * extension.\n *\n * @mixin\n * @augments Block\n * @package\n */\nconst IS_DIVISIBLEBY_MUTATOR_MIXIN = {\n  /**\n   * Create XML to represent whether the 'divisorInput' should be present.\n   * Backwards compatible serialization implementation.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: DivisiblebyBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    const divisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n    container.setAttribute('divisor_input', String(divisorInput));\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'divisorInput'.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: DivisiblebyBlock, xmlElement: Element) {\n    const divisorInput = xmlElement.getAttribute('divisor_input') === 'true';\n    this.updateShape_(divisorInput);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n\n  /**\n   * Modify this block to have (or not have) an input for 'is divisible by'.\n   *\n   * @param divisorInput True if this block has a divisor input.\n   */\n  updateShape_: function (this: DivisiblebyBlock, divisorInput: boolean) {\n    // Add or remove a Value Input.\n    const inputExists = this.getInput('DIVISOR');\n    if (divisorInput) {\n      if (!inputExists) {\n        this.appendValueInput('DIVISOR').setCheck('Number');\n      }\n    } else if (inputExists) {\n      this.removeInput('DIVISOR');\n    }\n  },\n};\n\n/**\n * 'math_is_divisibleby_mutator' extension to the 'math_property' block that\n * can update the block shape (add/remove divisor input) based on whether\n * property is \"divisible by\".\n */\nconst IS_DIVISIBLE_MUTATOR_EXTENSION = function (this: DivisiblebyBlock) {\n  this.getField('PROPERTY')!.setValidator(\n    /** @param option The selected dropdown option. */\n    function (this: FieldDropdown, option: string) {\n      const divisorInput = option === 'DIVISIBLE_BY';\n      (this.getSourceBlock() as DivisiblebyBlock).updateShape_(divisorInput);\n      return undefined; // FieldValidators can't be void.  Use option as-is.\n    },\n  );\n};\n\nExtensions.registerMutator(\n  'math_is_divisibleby_mutator',\n  IS_DIVISIBLEBY_MUTATOR_MIXIN,\n  IS_DIVISIBLE_MUTATOR_EXTENSION,\n);\n\n// Update the tooltip of 'math_change' block to reference the variable.\nExtensions.register(\n  'math_change_tooltip',\n  Extensions.buildTooltipWithFieldText('%{BKY_MATH_CHANGE_TOOLTIP}', 'VAR'),\n);\n\n/** Type of a block that has LIST_MODES_MUTATOR_MIXIN */\ntype ListModesBlock = Block & ListModesMixin;\ninterface ListModesMixin extends ListModesMixinType {}\ntype ListModesMixinType = typeof LIST_MODES_MUTATOR_MIXIN;\n\n/**\n * Mixin with mutator methods to support alternate output based if the\n * 'math_on_list' block uses the 'MODE' operation.\n */\nconst LIST_MODES_MUTATOR_MIXIN = {\n  /**\n   * Modify this block to have the correct output type.\n   *\n   * @param newOp Either 'MODE' or some op than returns a number.\n   */\n  updateType_: function (this: ListModesBlock, newOp: string) {\n    if (newOp === 'MODE') {\n      this.outputConnection!.setCheck('Array');\n    } else {\n      this.outputConnection!.setCheck('Number');\n    }\n  },\n  /**\n   * Create XML to represent the output type.\n   * Backwards compatible serialization implementation.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: ListModesBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('op', this.getFieldValue('OP'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the output type.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: ListModesBlock, xmlElement: Element) {\n    const op = xmlElement.getAttribute('op');\n    if (op === null) throw new TypeError('xmlElement had no op attribute');\n    this.updateType_(op);\n  },\n\n  // This block does not need JSO serialization hooks (saveExtraState and\n  // loadExtraState) because the state of this object is already encoded in the\n  // dropdown values.\n  // XML hooks are kept for backwards compatibility.\n};\n\n/**\n * Extension to 'math_on_list' blocks that allows support of\n * modes operation (outputs a list of numbers).\n */\nconst LIST_MODES_MUTATOR_EXTENSION = function (this: ListModesBlock) {\n  this.getField('OP')!.setValidator(\n    function (this: ListModesBlock, newOp: string) {\n      this.updateType_(newOp);\n      return undefined;\n    }.bind(this),\n  );\n};\n\nExtensions.registerMutator(\n  'math_modes_of_list_mutator',\n  LIST_MODES_MUTATOR_MIXIN,\n  LIST_MODES_MUTATOR_EXTENSION,\n);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.loops\n\nimport type {Abstract as AbstractEvent} from '../core/events/events_abstract.js';\nimport type {Block} from '../core/block.js';\nimport * as ContextMenu from '../core/contextmenu.js';\nimport type {\n  ContextMenuOption,\n  LegacyContextMenuOption,\n} from '../core/contextmenu_registry.js';\nimport * as Events from '../core/events/events.js';\nimport * as Extensions from '../core/extensions.js';\nimport {Msg} from '../core/msg.js';\nimport {\n  createBlockDefinitionsFromJsonArray,\n  defineBlocks,\n} from '../core/common.js';\nimport '../core/field_dropdown.js';\nimport '../core/field_label.js';\nimport '../core/field_number.js';\nimport '../core/field_variable.js';\nimport '../core/icons/warning_icon.js';\nimport {FieldVariable} from '../core/field_variable.js';\nimport {WorkspaceSvg} from '../core/workspace_svg.js';\n\n/**\n * A dictionary of the block definitions provided by this module.\n */\nexport const blocks = createBlockDefinitionsFromJsonArray([\n  // Block for repeat n times (external number).\n  {\n    'type': 'controls_repeat_ext',\n    'message0': '%{BKY_CONTROLS_REPEAT_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'TIMES',\n        'check': 'Number',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'tooltip': '%{BKY_CONTROLS_REPEAT_TOOLTIP}',\n    'helpUrl': '%{BKY_CONTROLS_REPEAT_HELPURL}',\n  },\n  // Block for repeat n times (internal number).\n  // The 'controls_repeat_ext' block is preferred as it is more flexible.\n  {\n    'type': 'controls_repeat',\n    'message0': '%{BKY_CONTROLS_REPEAT_TITLE}',\n    'args0': [\n      {\n        'type': 'field_number',\n        'name': 'TIMES',\n        'value': 10,\n        'min': 0,\n        'precision': 1,\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'tooltip': '%{BKY_CONTROLS_REPEAT_TOOLTIP}',\n    'helpUrl': '%{BKY_CONTROLS_REPEAT_HELPURL}',\n  },\n  // Block for 'do while/until' loop.\n  {\n    'type': 'controls_whileUntil',\n    'message0': '%1 %2',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'MODE',\n        'options': [\n          ['%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}', 'WHILE'],\n          ['%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}', 'UNTIL'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'BOOL',\n        'check': 'Boolean',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'helpUrl': '%{BKY_CONTROLS_WHILEUNTIL_HELPURL}',\n    'extensions': ['controls_whileUntil_tooltip'],\n  },\n  // Block for 'for' loop.\n  {\n    'type': 'controls_for',\n    'message0': '%{BKY_CONTROLS_FOR_TITLE}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': null,\n      },\n      {\n        'type': 'input_value',\n        'name': 'FROM',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'TO',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'BY',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO',\n      },\n    ],\n    'inputsInline': true,\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'helpUrl': '%{BKY_CONTROLS_FOR_HELPURL}',\n    'extensions': ['contextMenu_newGetVariableBlock', 'controls_for_tooltip'],\n  },\n  // Block for 'for each' loop.\n  {\n    'type': 'controls_forEach',\n    'message0': '%{BKY_CONTROLS_FOREACH_TITLE}',\n    'args0': [\n      {\n        'type': 'field_variable',\n        'name': 'VAR',\n        'variable': null,\n      },\n      {\n        'type': 'input_value',\n        'name': 'LIST',\n        'check': 'Array',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_REPEAT_INPUT_DO} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'loop_blocks',\n    'helpUrl': '%{BKY_CONTROLS_FOREACH_HELPURL}',\n    'extensions': [\n      'contextMenu_newGetVariableBlock',\n      'controls_forEach_tooltip',\n    ],\n  },\n  // Block for flow statements: continue, break.\n  {\n    'type': 'controls_flow_statements',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'FLOW',\n        'options': [\n          ['%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}', 'BREAK'],\n          ['%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}', 'CONTINUE'],\n        ],\n      },\n    ],\n    'previousStatement': null,\n    'style': 'loop_blocks',\n    'helpUrl': '%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}',\n    'suppressPrefixSuffix': true,\n    'extensions': ['controls_flow_tooltip', 'controls_flow_in_loop_check'],\n  },\n]);\n\n/**\n * Tooltips for the 'controls_whileUntil' block, keyed by MODE value.\n *\n * @see {Extensions#buildTooltipForDropdown}\n */\nconst WHILE_UNTIL_TOOLTIPS = {\n  'WHILE': '%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}',\n  'UNTIL': '%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}',\n};\n\nExtensions.register(\n  'controls_whileUntil_tooltip',\n  Extensions.buildTooltipForDropdown('MODE', WHILE_UNTIL_TOOLTIPS),\n);\n\n/**\n * Tooltips for the 'controls_flow_statements' block, keyed by FLOW value.\n *\n * @see {Extensions#buildTooltipForDropdown}\n */\nconst BREAK_CONTINUE_TOOLTIPS = {\n  'BREAK': '%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}',\n  'CONTINUE': '%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}',\n};\n\nExtensions.register(\n  'controls_flow_tooltip',\n  Extensions.buildTooltipForDropdown('FLOW', BREAK_CONTINUE_TOOLTIPS),\n);\n\n/** Type of a block that has CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN */\ntype CustomContextMenuBlock = Block & CustomContextMenuMixin;\ninterface CustomContextMenuMixin extends CustomContextMenuMixinType {}\ntype CustomContextMenuMixinType =\n  typeof CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN;\n\n/**\n * Mixin to add a context menu item to create a 'variables_get' block.\n * Used by blocks 'controls_for' and 'controls_forEach'.\n */\nconst CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN = {\n  /**\n   * Add context menu option to create getter block for the loop's variable.\n   * (customContextMenu support limited to web BlockSvg.)\n   *\n   * @param options List of menu options to add to.\n   */\n  customContextMenu: function (\n    this: CustomContextMenuBlock,\n    options: Array<ContextMenuOption | LegacyContextMenuOption>,\n  ) {\n    if (this.isInFlyout) {\n      return;\n    }\n    const varField = this.getField('VAR') as FieldVariable;\n    const variable = varField.getVariable()!;\n    const varName = variable.name;\n    if (!this.isCollapsed() && varName !== null) {\n      const getVarBlockState = {\n        type: 'variables_get',\n        fields: {VAR: varField.saveState(true)},\n      };\n\n      options.push({\n        enabled: true,\n        text: Msg['VARIABLES_SET_CREATE_GET'].replace('%1', varName),\n        callback: ContextMenu.callbackFactory(this, getVarBlockState),\n      });\n    }\n  },\n};\n\nExtensions.registerMixin(\n  'contextMenu_newGetVariableBlock',\n  CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN,\n);\n\nExtensions.register(\n  'controls_for_tooltip',\n  Extensions.buildTooltipWithFieldText('%{BKY_CONTROLS_FOR_TOOLTIP}', 'VAR'),\n);\n\nExtensions.register(\n  'controls_forEach_tooltip',\n  Extensions.buildTooltipWithFieldText(\n    '%{BKY_CONTROLS_FOREACH_TOOLTIP}',\n    'VAR',\n  ),\n);\n\n/**\n * List of block types that are loops and thus do not need warnings.\n * To add a new loop type add this to your code:\n *\n * // If using the Blockly npm package and es6 import syntax:\n * import {loops} from 'blockly/blocks';\n * loops.loopTypes.add('custom_loop');\n *\n * // Else if using Closure Compiler and goog.modules:\n * const {loopTypes} = goog.require('Blockly.libraryBlocks.loops');\n * loopTypes.add('custom_loop');\n *\n * // Else if using blockly_compressed + blockss_compressed.js in browser:\n * Blockly.libraryBlocks.loopTypes.add('custom_loop');\n */\nexport const loopTypes: Set<string> = new Set([\n  'controls_repeat',\n  'controls_repeat_ext',\n  'controls_forEach',\n  'controls_for',\n  'controls_whileUntil',\n]);\n\n/** Type of a block that has CONTROL_FLOW_IN_LOOP_CHECK_MIXIN */\ntype ControlFlowInLoopBlock = Block & ControlFlowInLoopMixin;\ninterface ControlFlowInLoopMixin extends ControlFlowInLoopMixinType {}\ntype ControlFlowInLoopMixinType = typeof CONTROL_FLOW_IN_LOOP_CHECK_MIXIN;\n\n/**\n * This mixin adds a check to make sure the 'controls_flow_statements' block\n * is contained in a loop. Otherwise a warning is added to the block.\n */\nconst CONTROL_FLOW_IN_LOOP_CHECK_MIXIN = {\n  /**\n   * Is this block enclosed (at any level) by a loop?\n   *\n   * @returns The nearest surrounding loop, or null if none.\n   */\n  getSurroundLoop: function (this: ControlFlowInLoopBlock): Block | null {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block: Block | null = this;\n    do {\n      if (loopTypes.has(block.type)) {\n        return block;\n      }\n      block = block.getSurroundParent();\n    } while (block);\n    return null;\n  },\n\n  /**\n   * Called whenever anything on the workspace changes.\n   * Add warning if this flow block is not nested inside a loop.\n   */\n  onchange: function (this: ControlFlowInLoopBlock, e: AbstractEvent) {\n    const ws = this.workspace as WorkspaceSvg;\n    // Don't change state if:\n    //   * It's at the start of a drag.\n    //   * It's not a move event.\n    if (!ws.isDragging || ws.isDragging() || e.type !== Events.BLOCK_MOVE) {\n      return;\n    }\n    const enabled = !!this.getSurroundLoop();\n    this.setWarningText(\n      enabled ? null : Msg['CONTROLS_FLOW_STATEMENTS_WARNING'],\n    );\n    if (!this.isInFlyout) {\n      const group = Events.getGroup();\n      // Makes it so the move and the disable event get undone together.\n      Events.setGroup(e.group);\n      this.setEnabled(enabled);\n      Events.setGroup(group);\n    }\n  },\n};\n\nExtensions.registerMixin(\n  'controls_flow_in_loop_check',\n  CONTROL_FLOW_IN_LOOP_CHECK_MIXIN,\n);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.logic\n\nimport * as Events from '../core/events/events.js';\nimport * as Extensions from '../core/extensions.js';\nimport * as xmlUtils from '../core/utils/xml.js';\nimport type {Abstract as AbstractEvent} from '../core/events/events_abstract.js';\nimport type {Block} from '../core/block.js';\nimport type {BlockSvg} from '../core/block_svg.js';\nimport type {Connection} from '../core/connection.js';\nimport {Msg} from '../core/msg.js';\nimport type {Workspace} from '../core/workspace.js';\nimport {\n  createBlockDefinitionsFromJsonArray,\n  defineBlocks,\n} from '../core/common.js';\nimport '../core/field_dropdown.js';\nimport '../core/field_label.js';\nimport '../core/icons/mutator_icon.js';\n\n/**\n * A dictionary of the block definitions provided by this module.\n */\nexport const blocks = createBlockDefinitionsFromJsonArray([\n  // Block for boolean data type: true and false.\n  {\n    'type': 'logic_boolean',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_dropdown',\n        'name': 'BOOL',\n        'options': [\n          ['%{BKY_LOGIC_BOOLEAN_TRUE}', 'TRUE'],\n          ['%{BKY_LOGIC_BOOLEAN_FALSE}', 'FALSE'],\n        ],\n      },\n    ],\n    'output': 'Boolean',\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_LOGIC_BOOLEAN_TOOLTIP}',\n    'helpUrl': '%{BKY_LOGIC_BOOLEAN_HELPURL}',\n  },\n  // Block for if/elseif/else condition.\n  {\n    'type': 'controls_if',\n    'message0': '%{BKY_CONTROLS_IF_MSG_IF} %1',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'IF0',\n        'check': 'Boolean',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_IF_MSG_THEN} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO0',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'logic_blocks',\n    'helpUrl': '%{BKY_CONTROLS_IF_HELPURL}',\n    'suppressPrefixSuffix': true,\n    'mutator': 'controls_if_mutator',\n    'extensions': ['controls_if_tooltip'],\n  },\n  // If/else block that does not use a mutator.\n  {\n    'type': 'controls_ifelse',\n    'message0': '%{BKY_CONTROLS_IF_MSG_IF} %1',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'IF0',\n        'check': 'Boolean',\n      },\n    ],\n    'message1': '%{BKY_CONTROLS_IF_MSG_THEN} %1',\n    'args1': [\n      {\n        'type': 'input_statement',\n        'name': 'DO0',\n      },\n    ],\n    'message2': '%{BKY_CONTROLS_IF_MSG_ELSE} %1',\n    'args2': [\n      {\n        'type': 'input_statement',\n        'name': 'ELSE',\n      },\n    ],\n    'previousStatement': null,\n    'nextStatement': null,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKYCONTROLS_IF_TOOLTIP_2}',\n    'helpUrl': '%{BKY_CONTROLS_IF_HELPURL}',\n    'suppressPrefixSuffix': true,\n    'extensions': ['controls_if_tooltip'],\n  },\n  // Block for comparison operator.\n  {\n    'type': 'logic_compare',\n    'message0': '%1 %2 %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'A',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['=', 'EQ'],\n          ['\\u2260', 'NEQ'],\n          ['\\u200F<', 'LT'],\n          ['\\u200F\\u2264', 'LTE'],\n          ['\\u200F>', 'GT'],\n          ['\\u200F\\u2265', 'GTE'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'B',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Boolean',\n    'style': 'logic_blocks',\n    'helpUrl': '%{BKY_LOGIC_COMPARE_HELPURL}',\n    'extensions': ['logic_compare', 'logic_op_tooltip'],\n  },\n  // Block for logical operations: 'and', 'or'.\n  {\n    'type': 'logic_operation',\n    'message0': '%1 %2 %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'A',\n        'check': 'Boolean',\n      },\n      {\n        'type': 'field_dropdown',\n        'name': 'OP',\n        'options': [\n          ['%{BKY_LOGIC_OPERATION_AND}', 'AND'],\n          ['%{BKY_LOGIC_OPERATION_OR}', 'OR'],\n        ],\n      },\n      {\n        'type': 'input_value',\n        'name': 'B',\n        'check': 'Boolean',\n      },\n    ],\n    'inputsInline': true,\n    'output': 'Boolean',\n    'style': 'logic_blocks',\n    'helpUrl': '%{BKY_LOGIC_OPERATION_HELPURL}',\n    'extensions': ['logic_op_tooltip'],\n  },\n  // Block for negation.\n  {\n    'type': 'logic_negate',\n    'message0': '%{BKY_LOGIC_NEGATE_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'BOOL',\n        'check': 'Boolean',\n      },\n    ],\n    'output': 'Boolean',\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_LOGIC_NEGATE_TOOLTIP}',\n    'helpUrl': '%{BKY_LOGIC_NEGATE_HELPURL}',\n  },\n  // Block for null data type.\n  {\n    'type': 'logic_null',\n    'message0': '%{BKY_LOGIC_NULL}',\n    'output': null,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_LOGIC_NULL_TOOLTIP}',\n    'helpUrl': '%{BKY_LOGIC_NULL_HELPURL}',\n  },\n  // Block for ternary operator.\n  {\n    'type': 'logic_ternary',\n    'message0': '%{BKY_LOGIC_TERNARY_CONDITION} %1',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'IF',\n        'check': 'Boolean',\n      },\n    ],\n    'message1': '%{BKY_LOGIC_TERNARY_IF_TRUE} %1',\n    'args1': [\n      {\n        'type': 'input_value',\n        'name': 'THEN',\n      },\n    ],\n    'message2': '%{BKY_LOGIC_TERNARY_IF_FALSE} %1',\n    'args2': [\n      {\n        'type': 'input_value',\n        'name': 'ELSE',\n      },\n    ],\n    'output': null,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_LOGIC_TERNARY_TOOLTIP}',\n    'helpUrl': '%{BKY_LOGIC_TERNARY_HELPURL}',\n    'extensions': ['logic_ternary'],\n  },\n  // Block representing the if statement in the controls_if mutator.\n  {\n    'type': 'controls_if_if',\n    'message0': '%{BKY_CONTROLS_IF_IF_TITLE_IF}',\n    'nextStatement': null,\n    'enableContextMenu': false,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_CONTROLS_IF_IF_TOOLTIP}',\n  },\n  // Block representing the else-if statement in the controls_if mutator.\n  {\n    'type': 'controls_if_elseif',\n    'message0': '%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}',\n    'previousStatement': null,\n    'nextStatement': null,\n    'enableContextMenu': false,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}',\n  },\n  // Block representing the else statement in the controls_if mutator.\n  {\n    'type': 'controls_if_else',\n    'message0': '%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}',\n    'previousStatement': null,\n    'enableContextMenu': false,\n    'style': 'logic_blocks',\n    'tooltip': '%{BKY_CONTROLS_IF_ELSE_TOOLTIP}',\n  },\n]);\n\n/**\n * Tooltip text, keyed by block OP value. Used by logic_compare and\n * logic_operation blocks.\n *\n * @see {Extensions#buildTooltipForDropdown}\n */\nconst TOOLTIPS_BY_OP = {\n  // logic_compare\n  'EQ': '%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}',\n  'NEQ': '%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}',\n  'LT': '%{BKY_LOGIC_COMPARE_TOOLTIP_LT}',\n  'LTE': '%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}',\n  'GT': '%{BKY_LOGIC_COMPARE_TOOLTIP_GT}',\n  'GTE': '%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}',\n\n  // logic_operation\n  'AND': '%{BKY_LOGIC_OPERATION_TOOLTIP_AND}',\n  'OR': '%{BKY_LOGIC_OPERATION_TOOLTIP_OR}',\n};\n\nExtensions.register(\n  'logic_op_tooltip',\n  Extensions.buildTooltipForDropdown('OP', TOOLTIPS_BY_OP),\n);\n\n/** Type of a block that has CONTROLS_IF_MUTATOR_MIXIN */\ntype IfBlock = Block & IfMixin;\ninterface IfMixin extends IfMixinType {}\ntype IfMixinType = typeof CONTROLS_IF_MUTATOR_MIXIN;\n\n// Types for quarks defined in JSON.\n/** Type of a controls_if_if (if mutator container) block. */\ninterface ContainerBlock extends Block {}\n\n/** Type of a controls_if_elseif or controls_if_else block. */\ninterface ClauseBlock extends Block {\n  valueConnection_?: Connection | null;\n  statementConnection_?: Connection | null;\n}\n\n/** Extra state for serialising controls_if blocks. */\ntype IfExtraState = {\n  elseIfCount?: number;\n  hasElse?: boolean;\n};\n\n/**\n * Mutator methods added to controls_if blocks.\n */\nconst CONTROLS_IF_MUTATOR_MIXIN = {\n  elseifCount_: 0,\n  elseCount_: 0,\n\n  /**\n   * Create XML to represent the number of else-if and else inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: IfBlock): Element | null {\n    if (!this.elseifCount_ && !this.elseCount_) {\n      return null;\n    }\n    const container = xmlUtils.createElement('mutation');\n    if (this.elseifCount_) {\n      container.setAttribute('elseif', String(this.elseifCount_));\n    }\n    if (this.elseCount_) {\n      container.setAttribute('else', '1');\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the else-if and else inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: IfBlock, xmlElement: Element) {\n    this.elseifCount_ = parseInt(xmlElement.getAttribute('elseif')!, 10) || 0;\n    this.elseCount_ = parseInt(xmlElement.getAttribute('else')!, 10) || 0;\n    this.rebuildShape_();\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   *\n   * @returns The state of this block, ie the else if count and else state.\n   */\n  saveExtraState: function (this: IfBlock): IfExtraState | null {\n    if (!this.elseifCount_ && !this.elseCount_) {\n      return null;\n    }\n    const state = Object.create(null);\n    if (this.elseifCount_) {\n      state['elseIfCount'] = this.elseifCount_;\n    }\n    if (this.elseCount_) {\n      state['hasElse'] = true;\n    }\n    return state;\n  },\n  /**\n   * Applies the given state to this block.\n   *\n   * @param state The state to apply to this block, ie the else if count\n   and\n   *     else state.\n   */\n  loadExtraState: function (this: IfBlock, state: IfExtraState) {\n    this.elseifCount_ = state['elseIfCount'] || 0;\n    this.elseCount_ = state['hasElse'] ? 1 : 0;\n    this.updateShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   *\n   * @param workspace MutatorIcon's workspace.\n   * @returns Root block in mutator.\n   */\n  decompose: function (this: IfBlock, workspace: Workspace): ContainerBlock {\n    const containerBlock = workspace.newBlock('controls_if_if');\n    (containerBlock as BlockSvg).initSvg();\n    let connection = containerBlock.nextConnection!;\n    for (let i = 1; i <= this.elseifCount_; i++) {\n      const elseifBlock = workspace.newBlock('controls_if_elseif');\n      (elseifBlock as BlockSvg).initSvg();\n      connection.connect(elseifBlock.previousConnection!);\n      connection = elseifBlock.nextConnection!;\n    }\n    if (this.elseCount_) {\n      const elseBlock = workspace.newBlock('controls_if_else');\n      (elseBlock as BlockSvg).initSvg();\n      connection.connect(elseBlock.previousConnection!);\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   *\n   * @param containerBlock Root block in mutator.\n   */\n  compose: function (this: IfBlock, containerBlock: ContainerBlock) {\n    let clauseBlock =\n      containerBlock.nextConnection!.targetBlock() as ClauseBlock | null;\n    // Count number of inputs.\n    this.elseifCount_ = 0;\n    this.elseCount_ = 0;\n    // Connections arrays are passed to .reconnectChildBlocks_() which\n    // takes 1-based arrays, so are initialised with a dummy value at\n    // index 0 for convenience.\n    const valueConnections: Array<Connection | null> = [null];\n    const statementConnections: Array<Connection | null> = [null];\n    let elseStatementConnection: Connection | null = null;\n    while (clauseBlock) {\n      if (clauseBlock.isInsertionMarker()) {\n        clauseBlock = clauseBlock.getNextBlock() as ClauseBlock | null;\n        continue;\n      }\n      switch (clauseBlock.type) {\n        case 'controls_if_elseif':\n          this.elseifCount_++;\n          // TODO(#6920): null valid, undefined not.\n          valueConnections.push(\n            clauseBlock.valueConnection_ as Connection | null,\n          );\n          statementConnections.push(\n            clauseBlock.statementConnection_ as Connection | null,\n          );\n          break;\n        case 'controls_if_else':\n          this.elseCount_++;\n          elseStatementConnection =\n            clauseBlock.statementConnection_ as Connection | null;\n          break;\n        default:\n          throw TypeError('Unknown block type: ' + clauseBlock.type);\n      }\n      clauseBlock = clauseBlock.getNextBlock() as ClauseBlock | null;\n    }\n    this.updateShape_();\n    // Reconnect any child blocks.\n    this.reconnectChildBlocks_(\n      valueConnections,\n      statementConnections,\n      elseStatementConnection,\n    );\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   *\n   * @param containerBlock Root block in mutator.\n   */\n  saveConnections: function (this: IfBlock, containerBlock: ContainerBlock) {\n    let clauseBlock =\n      containerBlock!.nextConnection!.targetBlock() as ClauseBlock | null;\n    let i = 1;\n    while (clauseBlock) {\n      if (clauseBlock.isInsertionMarker()) {\n        clauseBlock = clauseBlock.getNextBlock() as ClauseBlock | null;\n        continue;\n      }\n      switch (clauseBlock.type) {\n        case 'controls_if_elseif': {\n          const inputIf = this.getInput('IF' + i);\n          const inputDo = this.getInput('DO' + i);\n          clauseBlock.valueConnection_ =\n            inputIf && inputIf.connection!.targetConnection;\n          clauseBlock.statementConnection_ =\n            inputDo && inputDo.connection!.targetConnection;\n          i++;\n          break;\n        }\n        case 'controls_if_else': {\n          const inputDo = this.getInput('ELSE');\n          clauseBlock.statementConnection_ =\n            inputDo && inputDo.connection!.targetConnection;\n          break;\n        }\n        default:\n          throw TypeError('Unknown block type: ' + clauseBlock.type);\n      }\n      clauseBlock = clauseBlock.getNextBlock() as ClauseBlock | null;\n    }\n  },\n  /**\n   * Reconstructs the block with all child blocks attached.\n   */\n  rebuildShape_: function (this: IfBlock) {\n    const valueConnections: Array<Connection | null> = [null];\n    const statementConnections: Array<Connection | null> = [null];\n    let elseStatementConnection: Connection | null = null;\n\n    if (this.getInput('ELSE')) {\n      elseStatementConnection =\n        this.getInput('ELSE')!.connection!.targetConnection;\n    }\n    for (let i = 1; this.getInput('IF' + i); i++) {\n      const inputIf = this.getInput('IF' + i);\n      const inputDo = this.getInput('DO' + i);\n      valueConnections.push(inputIf!.connection!.targetConnection);\n      statementConnections.push(inputDo!.connection!.targetConnection);\n    }\n    this.updateShape_();\n    this.reconnectChildBlocks_(\n      valueConnections,\n      statementConnections,\n      elseStatementConnection,\n    );\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   *\n   * @internal\n   */\n  updateShape_: function (this: IfBlock) {\n    // Delete everything.\n    if (this.getInput('ELSE')) {\n      this.removeInput('ELSE');\n    }\n    for (let i = 1; this.getInput('IF' + i); i++) {\n      this.removeInput('IF' + i);\n      this.removeInput('DO' + i);\n    }\n    // Rebuild block.\n    for (let i = 1; i <= this.elseifCount_; i++) {\n      this.appendValueInput('IF' + i)\n        .setCheck('Boolean')\n        .appendField(Msg['CONTROLS_IF_MSG_ELSEIF']);\n      this.appendStatementInput('DO' + i).appendField(\n        Msg['CONTROLS_IF_MSG_THEN'],\n      );\n    }\n    if (this.elseCount_) {\n      this.appendStatementInput('ELSE').appendField(\n        Msg['CONTROLS_IF_MSG_ELSE'],\n      );\n    }\n  },\n  /**\n   * Reconnects child blocks.\n   *\n   * @param valueConnections 1-based array of value connections for\n   *     'if' input.  Value at index [0] ignored.\n   * @param statementConnections 1-based array of statement\n   *     connections for 'do' input.  Value at index [0] ignored.\n   * @param elseStatementConnection Statement connection for else input.\n   */\n  reconnectChildBlocks_: function (\n    this: IfBlock,\n    valueConnections: Array<Connection | null>,\n    statementConnections: Array<Connection | null>,\n    elseStatementConnection: Connection | null,\n  ) {\n    for (let i = 1; i <= this.elseifCount_; i++) {\n      valueConnections[i]?.reconnect(this, 'IF' + i);\n      statementConnections[i]?.reconnect(this, 'DO' + i);\n    }\n    elseStatementConnection?.reconnect(this, 'ELSE');\n  },\n};\n\nExtensions.registerMutator(\n  'controls_if_mutator',\n  CONTROLS_IF_MUTATOR_MIXIN,\n  null as unknown as undefined, // TODO(#6920)\n  ['controls_if_elseif', 'controls_if_else'],\n);\n\n/**\n * \"controls_if\" extension function. Adds mutator, shape updating methods,\n * and dynamic tooltip to \"controls_if\" blocks.\n */\nconst CONTROLS_IF_TOOLTIP_EXTENSION = function (this: IfBlock) {\n  this.setTooltip(\n    function (this: IfBlock) {\n      if (!this.elseifCount_ && !this.elseCount_) {\n        return Msg['CONTROLS_IF_TOOLTIP_1'];\n      } else if (!this.elseifCount_ && this.elseCount_) {\n        return Msg['CONTROLS_IF_TOOLTIP_2'];\n      } else if (this.elseifCount_ && !this.elseCount_) {\n        return Msg['CONTROLS_IF_TOOLTIP_3'];\n      } else if (this.elseifCount_ && this.elseCount_) {\n        return Msg['CONTROLS_IF_TOOLTIP_4'];\n      }\n      return '';\n    }.bind(this),\n  );\n};\n\nExtensions.register('controls_if_tooltip', CONTROLS_IF_TOOLTIP_EXTENSION);\n\n/** Type of a block that has LOGIC_COMPARE_ONCHANGE_MIXIN */\ntype CompareBlock = Block & CompareMixin;\ninterface CompareMixin extends CompareMixinType {\n  prevBlocks_?: Array<Block | null>;\n}\ntype CompareMixinType = typeof LOGIC_COMPARE_ONCHANGE_MIXIN;\n\n/**\n * Adds dynamic type validation for the left and right sides of a\n * logic_compare block.\n */\nconst LOGIC_COMPARE_ONCHANGE_MIXIN = {\n  /**\n   * Called whenever anything on the workspace changes.\n   * Prevent mismatched types from being compared.\n   *\n   * @param e Change event.\n   */\n  onchange: function (this: CompareBlock, e: AbstractEvent) {\n    if (!this.prevBlocks_) {\n      this.prevBlocks_ = [null, null];\n    }\n\n    const blockA = this.getInputTargetBlock('A');\n    const blockB = this.getInputTargetBlock('B');\n    // Disconnect blocks that existed prior to this change if they don't\n    // match.\n    if (\n      blockA &&\n      blockB &&\n      !this.workspace.connectionChecker.doTypeChecks(\n        blockA.outputConnection!,\n        blockB.outputConnection!,\n      )\n    ) {\n      // Mismatch between two inputs.  Revert the block connections,\n      // bumping away the newly connected block(s).\n      Events.setGroup(e.group);\n      const prevA = this.prevBlocks_[0];\n      if (prevA !== blockA) {\n        blockA.unplug();\n        if (prevA && !prevA.isDisposed() && !prevA.isShadow()) {\n          // The shadow block is automatically replaced during unplug().\n          this.getInput('A')!.connection!.connect(prevA.outputConnection!);\n        }\n      }\n      const prevB = this.prevBlocks_[1];\n      if (prevB !== blockB) {\n        blockB.unplug();\n        if (prevB && !prevB.isDisposed() && !prevB.isShadow()) {\n          // The shadow block is automatically replaced during unplug().\n          this.getInput('B')!.connection!.connect(prevB.outputConnection!);\n        }\n      }\n      this.bumpNeighbours();\n      Events.setGroup(false);\n    }\n    this.prevBlocks_[0] = this.getInputTargetBlock('A');\n    this.prevBlocks_[1] = this.getInputTargetBlock('B');\n  },\n};\n\n/**\n * \"logic_compare\" extension function. Adds type left and right side type\n * checking to \"logic_compare\" blocks.\n */\nconst LOGIC_COMPARE_EXTENSION = function (this: CompareBlock) {\n  // Add onchange handler to ensure types are compatible.\n  this.mixin(LOGIC_COMPARE_ONCHANGE_MIXIN);\n};\n\nExtensions.register('logic_compare', LOGIC_COMPARE_EXTENSION);\n\n/** Type of a block that has LOGIC_TERNARY_ONCHANGE_MIXIN */\ntype TernaryBlock = Block & TernaryMixin;\ninterface TernaryMixin extends TernaryMixinType {}\ntype TernaryMixinType = typeof LOGIC_TERNARY_ONCHANGE_MIXIN;\n\n/**\n * Adds type coordination between inputs and output.\n */\nconst LOGIC_TERNARY_ONCHANGE_MIXIN = {\n  prevParentConnection_: null as Connection | null,\n\n  /**\n   * Called whenever anything on the workspace changes.\n   * Prevent mismatched types.\n   */\n  onchange: function (this: TernaryBlock, e: AbstractEvent) {\n    const blockA = this.getInputTargetBlock('THEN');\n    const blockB = this.getInputTargetBlock('ELSE');\n    const parentConnection = this.outputConnection!.targetConnection;\n    // Disconnect blocks that existed prior to this change if they don't\n    // match.\n    if ((blockA || blockB) && parentConnection) {\n      for (let i = 0; i < 2; i++) {\n        const block = i === 1 ? blockA : blockB;\n        if (\n          block &&\n          !block.workspace.connectionChecker.doTypeChecks(\n            block.outputConnection!,\n            parentConnection,\n          )\n        ) {\n          // Ensure that any disconnections are grouped with the causing\n          // event.\n          Events.setGroup(e.group);\n          if (parentConnection === this.prevParentConnection_) {\n            this.unplug();\n            parentConnection.getSourceBlock().bumpNeighbours();\n          } else {\n            block.unplug();\n            block.bumpNeighbours();\n          }\n          Events.setGroup(false);\n        }\n      }\n    }\n    this.prevParentConnection_ = parentConnection;\n  },\n};\n\nExtensions.registerMixin('logic_ternary', LOGIC_TERNARY_ONCHANGE_MIXIN);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.lists\n\nimport * as fieldRegistry from '../core/field_registry.js';\nimport * as xmlUtils from '../core/utils/xml.js';\nimport {Align} from '../core/inputs/align.js';\nimport type {Block} from '../core/block.js';\nimport type {Connection} from '../core/connection.js';\nimport type {BlockSvg} from '../core/block_svg.js';\nimport type {FieldDropdown} from '../core/field_dropdown.js';\nimport {Msg} from '../core/msg.js';\nimport {MutatorIcon} from '../core/icons/mutator_icon.js';\nimport type {Workspace} from '../core/workspace.js';\nimport {\n  createBlockDefinitionsFromJsonArray,\n  defineBlocks,\n} from '../core/common.js';\nimport '../core/field_dropdown.js';\nimport {ValueInput} from '../core/inputs/value_input.js';\n\n/**\n * A dictionary of the block definitions provided by this module.\n */\nexport const blocks = createBlockDefinitionsFromJsonArray([\n  // Block for creating an empty list\n  // The 'list_create_with' block is preferred as it is more flexible.\n  // <block type=\"lists_create_with\">\n  //   <mutation items=\"0\"></mutation>\n  // </block>\n  {\n    'type': 'lists_create_empty',\n    'message0': '%{BKY_LISTS_CREATE_EMPTY_TITLE}',\n    'output': 'Array',\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_CREATE_EMPTY_HELPURL}',\n  },\n  // Block for creating a list with one element repeated.\n  {\n    'type': 'lists_repeat',\n    'message0': '%{BKY_LISTS_REPEAT_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'ITEM',\n      },\n      {\n        'type': 'input_value',\n        'name': 'NUM',\n        'check': 'Number',\n      },\n    ],\n    'output': 'Array',\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_REPEAT_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_REPEAT_HELPURL}',\n  },\n  // Block for reversing a list.\n  {\n    'type': 'lists_reverse',\n    'message0': '%{BKY_LISTS_REVERSE_MESSAGE0}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'LIST',\n        'check': 'Array',\n      },\n    ],\n    'output': 'Array',\n    'inputsInline': true,\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_REVERSE_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_REVERSE_HELPURL}',\n  },\n  // Block for checking if a list is empty\n  {\n    'type': 'lists_isEmpty',\n    'message0': '%{BKY_LISTS_ISEMPTY_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': ['String', 'Array'],\n      },\n    ],\n    'output': 'Boolean',\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_ISEMPTY_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_ISEMPTY_HELPURL}',\n  },\n  // Block for getting the list length\n  {\n    'type': 'lists_length',\n    'message0': '%{BKY_LISTS_LENGTH_TITLE}',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'VALUE',\n        'check': ['String', 'Array'],\n      },\n    ],\n    'output': 'Number',\n    'style': 'list_blocks',\n    'tooltip': '%{BKY_LISTS_LENGTH_TOOLTIP}',\n    'helpUrl': '%{BKY_LISTS_LENGTH_HELPURL}',\n  },\n]);\n\n/** Type of a 'lists_create_with' block. */\ntype CreateWithBlock = Block & ListCreateWithMixin;\ninterface ListCreateWithMixin extends ListCreateWithMixinType {\n  itemCount_: number;\n}\ntype ListCreateWithMixinType = typeof LISTS_CREATE_WITH;\n\nconst LISTS_CREATE_WITH = {\n  /**\n   * Block for creating a list with any number of elements of any type.\n   */\n  init: function (this: CreateWithBlock) {\n    this.setHelpUrl(Msg['LISTS_CREATE_WITH_HELPURL']);\n    this.setStyle('list_blocks');\n    this.itemCount_ = 3;\n    this.updateShape_();\n    this.setOutput(true, 'Array');\n    this.setMutator(\n      new MutatorIcon(['lists_create_with_item'], this as unknown as BlockSvg),\n    ); // BUG(#6905)\n    this.setTooltip(Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent list inputs.\n   * Backwards compatible serialization implementation.\n   */\n  mutationToDom: function (this: CreateWithBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('items', String(this.itemCount_));\n    return container;\n  },\n  /**\n   * Parse XML to restore the list inputs.\n   * Backwards compatible serialization implementation.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: CreateWithBlock, xmlElement: Element) {\n    const items = xmlElement.getAttribute('items');\n    if (!items) throw new TypeError('element did not have items');\n    this.itemCount_ = parseInt(items, 10);\n    this.updateShape_();\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   *\n   * @returns The state of this block, ie the item count.\n   */\n  saveExtraState: function (this: CreateWithBlock): {itemCount: number} {\n    return {\n      'itemCount': this.itemCount_,\n    };\n  },\n  /**\n   * Applies the given state to this block.\n   *\n   * @param state The state to apply to this block, ie the item count.\n   */\n  loadExtraState: function (this: CreateWithBlock, state: AnyDuringMigration) {\n    this.itemCount_ = state['itemCount'];\n    this.updateShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   *\n   * @param workspace Mutator's workspace.\n   * @returns Root block in mutator.\n   */\n  decompose: function (\n    this: CreateWithBlock,\n    workspace: Workspace,\n  ): ContainerBlock {\n    const containerBlock = workspace.newBlock(\n      'lists_create_with_container',\n    ) as ContainerBlock;\n    (containerBlock as BlockSvg).initSvg();\n    let connection = containerBlock.getInput('STACK')!.connection;\n    for (let i = 0; i < this.itemCount_; i++) {\n      const itemBlock = workspace.newBlock(\n        'lists_create_with_item',\n      ) as ItemBlock;\n      (itemBlock as BlockSvg).initSvg();\n      if (!itemBlock.previousConnection) {\n        throw new Error('itemBlock has no previousConnection');\n      }\n      connection!.connect(itemBlock.previousConnection);\n      connection = itemBlock.nextConnection;\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   *\n   * @param containerBlock Root block in mutator.\n   */\n  compose: function (this: CreateWithBlock, containerBlock: Block) {\n    let itemBlock: ItemBlock | null = containerBlock.getInputTargetBlock(\n      'STACK',\n    ) as ItemBlock;\n    // Count number of inputs.\n    const connections: Connection[] = [];\n    while (itemBlock) {\n      if (itemBlock.isInsertionMarker()) {\n        itemBlock = itemBlock.getNextBlock() as ItemBlock | null;\n        continue;\n      }\n      connections.push(itemBlock.valueConnection_ as Connection);\n      itemBlock = itemBlock.getNextBlock() as ItemBlock | null;\n    }\n    // Disconnect any children that don't belong.\n    for (let i = 0; i < this.itemCount_; i++) {\n      const connection = this.getInput('ADD' + i)!.connection!.targetConnection;\n      if (connection && connections.indexOf(connection) === -1) {\n        connection.disconnect();\n      }\n    }\n    this.itemCount_ = connections.length;\n    this.updateShape_();\n    // Reconnect any child blocks.\n    for (let i = 0; i < this.itemCount_; i++) {\n      connections[i]?.reconnect(this, 'ADD' + i);\n    }\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   *\n   * @param containerBlock Root block in mutator.\n   */\n  saveConnections: function (this: CreateWithBlock, containerBlock: Block) {\n    let itemBlock: ItemBlock | null = containerBlock.getInputTargetBlock(\n      'STACK',\n    ) as ItemBlock;\n    let i = 0;\n    while (itemBlock) {\n      if (itemBlock.isInsertionMarker()) {\n        itemBlock = itemBlock.getNextBlock() as ItemBlock | null;\n        continue;\n      }\n      const input = this.getInput('ADD' + i);\n      itemBlock.valueConnection_ = input?.connection!\n        .targetConnection as Connection;\n      itemBlock = itemBlock.getNextBlock() as ItemBlock | null;\n      i++;\n    }\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   */\n  updateShape_: function (this: CreateWithBlock) {\n    if (this.itemCount_ && this.getInput('EMPTY')) {\n      this.removeInput('EMPTY');\n    } else if (!this.itemCount_ && !this.getInput('EMPTY')) {\n      this.appendDummyInput('EMPTY').appendField(\n        Msg['LISTS_CREATE_EMPTY_TITLE'],\n      );\n    }\n    // Add new inputs.\n    for (let i = 0; i < this.itemCount_; i++) {\n      if (!this.getInput('ADD' + i)) {\n        const input = this.appendValueInput('ADD' + i).setAlign(Align.RIGHT);\n        if (i === 0) {\n          input.appendField(Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n        }\n      }\n    }\n    // Remove deleted inputs.\n    for (let i = this.itemCount_; this.getInput('ADD' + i); i++) {\n      this.removeInput('ADD' + i);\n    }\n  },\n};\nblocks['lists_create_with'] = LISTS_CREATE_WITH;\n\n/** Type for a 'lists_create_with_container' block. */\ntype ContainerBlock = Block & ContainerMutator;\ninterface ContainerMutator extends ContainerMutatorType {}\ntype ContainerMutatorType = typeof LISTS_CREATE_WITH_CONTAINER;\n\nconst LISTS_CREATE_WITH_CONTAINER = {\n  /**\n   * Mutator block for list container.\n   */\n  init: function (this: ContainerBlock) {\n    this.setStyle('list_blocks');\n    this.appendDummyInput().appendField(\n      Msg['LISTS_CREATE_WITH_CONTAINER_TITLE_ADD'],\n    );\n    this.appendStatementInput('STACK');\n    this.setTooltip(Msg['LISTS_CREATE_WITH_CONTAINER_TOOLTIP']);\n    this.contextMenu = false;\n  },\n};\nblocks['lists_create_with_container'] = LISTS_CREATE_WITH_CONTAINER;\n\n/** Type for a 'lists_create_with_item' block. */\ntype ItemBlock = Block & ItemMutator;\ninterface ItemMutator extends ItemMutatorType {\n  valueConnection_?: Connection;\n}\ntype ItemMutatorType = typeof LISTS_CREATE_WITH_ITEM;\n\nconst LISTS_CREATE_WITH_ITEM = {\n  /**\n   * Mutator block for adding items.\n   */\n  init: function (this: ItemBlock) {\n    this.setStyle('list_blocks');\n    this.appendDummyInput().appendField(Msg['LISTS_CREATE_WITH_ITEM_TITLE']);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setTooltip(Msg['LISTS_CREATE_WITH_ITEM_TOOLTIP']);\n    this.contextMenu = false;\n  },\n};\nblocks['lists_create_with_item'] = LISTS_CREATE_WITH_ITEM;\n\n/** Type for a 'lists_indexOf' block. */\ntype IndexOfBlock = Block & IndexOfMutator;\ninterface IndexOfMutator extends IndexOfMutatorType {}\ntype IndexOfMutatorType = typeof LISTS_INDEXOF;\n\nconst LISTS_INDEXOF = {\n  /**\n   * Block for finding an item in the list.\n   */\n  init: function (this: IndexOfBlock) {\n    const OPERATORS = [\n      [Msg['LISTS_INDEX_OF_FIRST'], 'FIRST'],\n      [Msg['LISTS_INDEX_OF_LAST'], 'LAST'],\n    ];\n    this.setHelpUrl(Msg['LISTS_INDEX_OF_HELPURL']);\n    this.setStyle('list_blocks');\n    this.setOutput(true, 'Number');\n    this.appendValueInput('VALUE')\n      .setCheck('Array')\n      .appendField(Msg['LISTS_INDEX_OF_INPUT_IN_LIST']);\n    const operatorsDropdown = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options: OPERATORS,\n    });\n    if (!operatorsDropdown) throw new Error('field_dropdown not found');\n    this.appendValueInput('FIND').appendField(operatorsDropdown, 'END');\n    this.setInputsInline(true);\n    this.setTooltip(() => {\n      return Msg['LISTS_INDEX_OF_TOOLTIP'].replace(\n        '%1',\n        this.workspace.options.oneBasedIndex ? '0' : '-1',\n      );\n    });\n  },\n};\nblocks['lists_indexOf'] = LISTS_INDEXOF;\n\n/** Type for a 'lists_getIndex' block. */\ntype GetIndexBlock = Block & GetIndexMutator;\ninterface GetIndexMutator extends GetIndexMutatorType {\n  WHERE_OPTIONS: Array<[string, string]>;\n}\ntype GetIndexMutatorType = typeof LISTS_GETINDEX;\n\nconst LISTS_GETINDEX = {\n  /**\n   * Block for getting element at index.\n   */\n  init: function (this: GetIndexBlock) {\n    const MODE = [\n      [Msg['LISTS_GET_INDEX_GET'], 'GET'],\n      [Msg['LISTS_GET_INDEX_GET_REMOVE'], 'GET_REMOVE'],\n      [Msg['LISTS_GET_INDEX_REMOVE'], 'REMOVE'],\n    ];\n    this.WHERE_OPTIONS = [\n      [Msg['LISTS_GET_INDEX_FROM_START'], 'FROM_START'],\n      [Msg['LISTS_GET_INDEX_FROM_END'], 'FROM_END'],\n      [Msg['LISTS_GET_INDEX_FIRST'], 'FIRST'],\n      [Msg['LISTS_GET_INDEX_LAST'], 'LAST'],\n      [Msg['LISTS_GET_INDEX_RANDOM'], 'RANDOM'],\n    ];\n    this.setHelpUrl(Msg['LISTS_GET_INDEX_HELPURL']);\n    this.setStyle('list_blocks');\n    const modeMenu = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options: MODE,\n    }) as FieldDropdown;\n    modeMenu.setValidator(\n      /** @param value The input value. */\n      function (this: FieldDropdown, value: string) {\n        const isStatement = value === 'REMOVE';\n        (this.getSourceBlock() as GetIndexBlock).updateStatement_(isStatement);\n        return undefined;\n      },\n    );\n    this.appendValueInput('VALUE')\n      .setCheck('Array')\n      .appendField(Msg['LISTS_GET_INDEX_INPUT_IN_LIST']);\n    this.appendDummyInput()\n      .appendField(modeMenu, 'MODE')\n      .appendField('', 'SPACE');\n    this.appendDummyInput('AT');\n    if (Msg['LISTS_GET_INDEX_TAIL']) {\n      this.appendDummyInput('TAIL').appendField(Msg['LISTS_GET_INDEX_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true);\n    this.updateAt_(true);\n    this.setTooltip(() => {\n      const mode = this.getFieldValue('MODE');\n      const where = this.getFieldValue('WHERE');\n      let tooltip = '';\n      switch (mode + ' ' + where) {\n        case 'GET FROM_START':\n        case 'GET FROM_END':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_FROM'];\n          break;\n        case 'GET FIRST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_FIRST'];\n          break;\n        case 'GET LAST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_LAST'];\n          break;\n        case 'GET RANDOM':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_RANDOM'];\n          break;\n        case 'GET_REMOVE FROM_START':\n        case 'GET_REMOVE FROM_END':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM'];\n          break;\n        case 'GET_REMOVE FIRST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST'];\n          break;\n        case 'GET_REMOVE LAST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST'];\n          break;\n        case 'GET_REMOVE RANDOM':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM'];\n          break;\n        case 'REMOVE FROM_START':\n        case 'REMOVE FROM_END':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM'];\n          break;\n        case 'REMOVE FIRST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST'];\n          break;\n        case 'REMOVE LAST':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST'];\n          break;\n        case 'REMOVE RANDOM':\n          tooltip = Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM'];\n          break;\n      }\n      if (where === 'FROM_START' || where === 'FROM_END') {\n        const msg =\n          where === 'FROM_START'\n            ? Msg['LISTS_INDEX_FROM_START_TOOLTIP']\n            : Msg['LISTS_INDEX_FROM_END_TOOLTIP'];\n        tooltip +=\n          '  ' +\n          msg.replace('%1', this.workspace.options.oneBasedIndex ? '#1' : '#0');\n      }\n      return tooltip;\n    });\n  },\n  /**\n   * Create XML to represent whether the block is a statement or a value.\n   * Also represent whether there is an 'AT' input.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: GetIndexBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    const isStatement = !this.outputConnection;\n    container.setAttribute('statement', String(isStatement));\n    const isAt = this.getInput('AT') instanceof ValueInput;\n    container.setAttribute('at', String(isAt));\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: GetIndexBlock, xmlElement: Element) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'statement' defaults to false and 'at' defaults to true.\n    const isStatement = xmlElement.getAttribute('statement') === 'true';\n    this.updateStatement_(isStatement);\n    const isAt = xmlElement.getAttribute('at') !== 'false';\n    this.updateAt_(isAt);\n  },\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * Returns null for efficiency if no state is needed (not a statement)\n   *\n   * @returns The state of this block, ie whether it's a statement.\n   */\n  saveExtraState: function (this: GetIndexBlock): {\n    isStatement: boolean;\n  } | null {\n    if (!this.outputConnection) {\n      return {\n        isStatement: true,\n      };\n    }\n    return null;\n  },\n\n  /**\n   * Applies the given state to this block.\n   *\n   * @param state The state to apply to this block, ie whether it's a\n   *     statement.\n   */\n  loadExtraState: function (this: GetIndexBlock, state: AnyDuringMigration) {\n    if (state['isStatement']) {\n      this.updateStatement_(true);\n    } else if (typeof state === 'string') {\n      // backward compatible for json serialised mutations\n      this.domToMutation(xmlUtils.textToDom(state));\n    }\n  },\n\n  /**\n   * Switch between a value block and a statement block.\n   *\n   * @param newStatement True if the block should be a statement.\n   *     False if the block should be a value.\n   */\n  updateStatement_: function (this: GetIndexBlock, newStatement: boolean) {\n    const oldStatement = !this.outputConnection;\n    if (newStatement !== oldStatement) {\n      // TODO(#6920): The .unplug only has one parameter.\n      (this.unplug as (arg0?: boolean, arg1?: boolean) => void)(true, true);\n      if (newStatement) {\n        this.setOutput(false);\n        this.setPreviousStatement(true);\n        this.setNextStatement(true);\n      } else {\n        this.setPreviousStatement(false);\n        this.setNextStatement(false);\n        this.setOutput(true);\n      }\n    }\n  },\n  /**\n   * Create or delete an input for the numeric index.\n   *\n   * @param isAt True if the input should exist.\n   */\n  updateAt_: function (this: GetIndexBlock, isAt: boolean) {\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT');\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL').appendField(\n          Msg['ORDINAL_NUMBER_SUFFIX'],\n        );\n      }\n    } else {\n      this.appendDummyInput('AT');\n    }\n    const menu = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options: this.WHERE_OPTIONS,\n    }) as FieldDropdown;\n    menu.setValidator(\n      /**\n       * @param value The input value.\n       * @returns Null if the field has been replaced; otherwise undefined.\n       */\n      function (this: FieldDropdown, value: string) {\n        const newAt = value === 'FROM_START' || value === 'FROM_END';\n        // The 'isAt' variable is available due to this function being a\n        // closure.\n        if (newAt !== isAt) {\n          const block = this.getSourceBlock() as GetIndexBlock;\n          block.updateAt_(newAt);\n          // This menu has been destroyed and replaced.  Update the\n          // replacement.\n          block.setFieldValue(value, 'WHERE');\n          return null;\n        }\n        return undefined;\n      },\n    );\n    this.getInput('AT')!.appendField(menu, 'WHERE');\n    if (Msg['LISTS_GET_INDEX_TAIL']) {\n      this.moveInputBefore('TAIL', null);\n    }\n  },\n};\nblocks['lists_getIndex'] = LISTS_GETINDEX;\n\n/** Type for a 'lists_setIndex' block. */\ntype SetIndexBlock = Block & SetIndexMutator;\ninterface SetIndexMutator extends SetIndexMutatorType {\n  WHERE_OPTIONS: Array<[string, string]>;\n}\ntype SetIndexMutatorType = typeof LISTS_SETINDEX;\n\nconst LISTS_SETINDEX = {\n  /**\n   * Block for setting the element at index.\n   */\n  init: function (this: SetIndexBlock) {\n    const MODE = [\n      [Msg['LISTS_SET_INDEX_SET'], 'SET'],\n      [Msg['LISTS_SET_INDEX_INSERT'], 'INSERT'],\n    ];\n    this.WHERE_OPTIONS = [\n      [Msg['LISTS_GET_INDEX_FROM_START'], 'FROM_START'],\n      [Msg['LISTS_GET_INDEX_FROM_END'], 'FROM_END'],\n      [Msg['LISTS_GET_INDEX_FIRST'], 'FIRST'],\n      [Msg['LISTS_GET_INDEX_LAST'], 'LAST'],\n      [Msg['LISTS_GET_INDEX_RANDOM'], 'RANDOM'],\n    ];\n    this.setHelpUrl(Msg['LISTS_SET_INDEX_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('LIST')\n      .setCheck('Array')\n      .appendField(Msg['LISTS_SET_INDEX_INPUT_IN_LIST']);\n    const operationDropdown = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options: MODE,\n    }) as FieldDropdown;\n    this.appendDummyInput()\n      .appendField(operationDropdown, 'MODE')\n      .appendField('', 'SPACE');\n    this.appendDummyInput('AT');\n    this.appendValueInput('TO').appendField(Msg['LISTS_SET_INDEX_INPUT_TO']);\n    this.setInputsInline(true);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setTooltip(Msg['LISTS_SET_INDEX_TOOLTIP']);\n    this.updateAt_(true);\n    this.setTooltip(() => {\n      const mode = this.getFieldValue('MODE');\n      const where = this.getFieldValue('WHERE');\n      let tooltip = '';\n      switch (mode + ' ' + where) {\n        case 'SET FROM_START':\n        case 'SET FROM_END':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_SET_FROM'];\n          break;\n        case 'SET FIRST':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_SET_FIRST'];\n          break;\n        case 'SET LAST':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_SET_LAST'];\n          break;\n        case 'SET RANDOM':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_SET_RANDOM'];\n          break;\n        case 'INSERT FROM_START':\n        case 'INSERT FROM_END':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_FROM'];\n          break;\n        case 'INSERT FIRST':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST'];\n          break;\n        case 'INSERT LAST':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_LAST'];\n          break;\n        case 'INSERT RANDOM':\n          tooltip = Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM'];\n          break;\n      }\n      if (where === 'FROM_START' || where === 'FROM_END') {\n        tooltip +=\n          '  ' +\n          Msg['LISTS_INDEX_FROM_START_TOOLTIP'].replace(\n            '%1',\n            this.workspace.options.oneBasedIndex ? '#1' : '#0',\n          );\n      }\n      return tooltip;\n    });\n  },\n  /**\n   * Create XML to represent whether there is an 'AT' input.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: SetIndexBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    const isAt = this.getInput('AT') instanceof ValueInput;\n    container.setAttribute('at', String(isAt));\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: SetIndexBlock, xmlElement: Element) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'at' defaults to true.\n    const isAt = xmlElement.getAttribute('at') !== 'false';\n    this.updateAt_(isAt);\n  },\n\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * This block does not need to serialize any specific state as it is already\n   * encoded in the dropdown values, but must have an implementation to avoid\n   * the backward compatible XML mutations being serialized.\n   *\n   * @returns The state of this block.\n   */\n  saveExtraState: function (this: SetIndexBlock): null {\n    return null;\n  },\n\n  /**\n   * Applies the given state to this block.\n   * No extra state is needed or expected as it is already encoded in the\n   * dropdown values.\n   */\n  loadExtraState: function (this: SetIndexBlock) {},\n\n  /**\n   * Create or delete an input for the numeric index.\n   *\n   * @param isAt True if the input should exist.\n   */\n  updateAt_: function (this: SetIndexBlock, isAt: boolean) {\n    // Destroy old 'AT' and 'ORDINAL' input.\n    this.removeInput('AT');\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL').appendField(\n          Msg['ORDINAL_NUMBER_SUFFIX'],\n        );\n      }\n    } else {\n      this.appendDummyInput('AT');\n    }\n    const menu = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options: this.WHERE_OPTIONS,\n    }) as FieldDropdown;\n    menu.setValidator(\n      /**\n       * @param value The input value.\n       * @returns Null if the field has been replaced; otherwise undefined.\n       */\n      function (this: FieldDropdown, value: string) {\n        const newAt = value === 'FROM_START' || value === 'FROM_END';\n        // The 'isAt' variable is available due to this function being a\n        // closure.\n        if (newAt !== isAt) {\n          const block = this.getSourceBlock() as SetIndexBlock;\n          block.updateAt_(newAt);\n          // This menu has been destroyed and replaced.  Update the\n          // replacement.\n          block.setFieldValue(value, 'WHERE');\n          return null;\n        }\n        return undefined;\n      },\n    );\n    this.moveInputBefore('AT', 'TO');\n    if (this.getInput('ORDINAL')) {\n      this.moveInputBefore('ORDINAL', 'TO');\n    }\n\n    this.getInput('AT')!.appendField(menu, 'WHERE');\n  },\n};\nblocks['lists_setIndex'] = LISTS_SETINDEX;\n\n/** Type for a 'lists_getSublist' block. */\ntype GetSublistBlock = Block & GetSublistMutator;\ninterface GetSublistMutator extends GetSublistMutatorType {\n  WHERE_OPTIONS_1: Array<[string, string]>;\n  WHERE_OPTIONS_2: Array<[string, string]>;\n}\ntype GetSublistMutatorType = typeof LISTS_GETSUBLIST;\n\nconst LISTS_GETSUBLIST = {\n  /**\n   * Block for getting sublist.\n   */\n  init: function (this: GetSublistBlock) {\n    this['WHERE_OPTIONS_1'] = [\n      [Msg['LISTS_GET_SUBLIST_START_FROM_START'], 'FROM_START'],\n      [Msg['LISTS_GET_SUBLIST_START_FROM_END'], 'FROM_END'],\n      [Msg['LISTS_GET_SUBLIST_START_FIRST'], 'FIRST'],\n    ];\n    this['WHERE_OPTIONS_2'] = [\n      [Msg['LISTS_GET_SUBLIST_END_FROM_START'], 'FROM_START'],\n      [Msg['LISTS_GET_SUBLIST_END_FROM_END'], 'FROM_END'],\n      [Msg['LISTS_GET_SUBLIST_END_LAST'], 'LAST'],\n    ];\n    this.setHelpUrl(Msg['LISTS_GET_SUBLIST_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('LIST')\n      .setCheck('Array')\n      .appendField(Msg['LISTS_GET_SUBLIST_INPUT_IN_LIST']);\n    this.appendDummyInput('AT1');\n    this.appendDummyInput('AT2');\n    if (Msg['LISTS_GET_SUBLIST_TAIL']) {\n      this.appendDummyInput('TAIL').appendField(Msg['LISTS_GET_SUBLIST_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true, 'Array');\n    this.updateAt_(1, true);\n    this.updateAt_(2, true);\n    this.setTooltip(Msg['LISTS_GET_SUBLIST_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent whether there are 'AT' inputs.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: GetSublistBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    const isAt1 = this.getInput('AT1') instanceof ValueInput;\n    container.setAttribute('at1', String(isAt1));\n    const isAt2 = this.getInput('AT2') instanceof ValueInput;\n    container.setAttribute('at2', String(isAt2));\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' inputs.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: GetSublistBlock, xmlElement: Element) {\n    const isAt1 = xmlElement.getAttribute('at1') === 'true';\n    const isAt2 = xmlElement.getAttribute('at2') === 'true';\n    this.updateAt_(1, isAt1);\n    this.updateAt_(2, isAt2);\n  },\n\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * This block does not need to serialize any specific state as it is already\n   * encoded in the dropdown values, but must have an implementation to avoid\n   * the backward compatible XML mutations being serialized.\n   *\n   * @returns The state of this block.\n   */\n  saveExtraState: function (this: GetSublistBlock): null {\n    return null;\n  },\n\n  /**\n   * Applies the given state to this block.\n   * No extra state is needed or expected as it is already encoded in the\n   * dropdown values.\n   */\n  loadExtraState: function (this: GetSublistBlock) {},\n\n  /**\n   * Create or delete an input for a numeric index.\n   * This block has two such inputs, independent of each other.\n   *\n   * @param n Specify first or second input (1 or 2).\n   * @param isAt True if the input should exist.\n   */\n  updateAt_: function (this: GetSublistBlock, n: 1 | 2, isAt: boolean) {\n    // Create or delete an input for the numeric index.\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT' + n);\n    this.removeInput('ORDINAL' + n, true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT' + n).setCheck('Number');\n      if (Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL' + n).appendField(\n          Msg['ORDINAL_NUMBER_SUFFIX'],\n        );\n      }\n    } else {\n      this.appendDummyInput('AT' + n);\n    }\n    const menu = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options:\n        this[('WHERE_OPTIONS_' + n) as 'WHERE_OPTIONS_1' | 'WHERE_OPTIONS_2'],\n    }) as FieldDropdown;\n    menu.setValidator(\n      /**\n       * @param value The input value.\n       * @returns Null if the field has been replaced; otherwise undefined.\n       */\n      function (this: FieldDropdown, value: string) {\n        const newAt = value === 'FROM_START' || value === 'FROM_END';\n        // The 'isAt' variable is available due to this function being a\n        // closure.\n        if (newAt !== isAt) {\n          const block = this.getSourceBlock() as GetSublistBlock;\n          block.updateAt_(n, newAt);\n          // This menu has been destroyed and replaced.\n          // Update the replacement.\n          block.setFieldValue(value, 'WHERE' + n);\n          return null;\n        }\n      },\n    );\n    this.getInput('AT' + n)!.appendField(menu, 'WHERE' + n);\n    if (n === 1) {\n      this.moveInputBefore('AT1', 'AT2');\n      if (this.getInput('ORDINAL1')) {\n        this.moveInputBefore('ORDINAL1', 'AT2');\n      }\n    }\n    if (Msg['LISTS_GET_SUBLIST_TAIL']) {\n      this.moveInputBefore('TAIL', null);\n    }\n  },\n};\nblocks['lists_getSublist'] = LISTS_GETSUBLIST;\n\ntype SortBlock = Block | (typeof blocks)['lists_sort'];\n\nblocks['lists_sort'] = {\n  /**\n   * Block for sorting a list.\n   */\n  init: function (this: SortBlock) {\n    this.jsonInit({\n      'message0': '%{BKY_LISTS_SORT_TITLE}',\n      'args0': [\n        {\n          'type': 'field_dropdown',\n          'name': 'TYPE',\n          'options': [\n            ['%{BKY_LISTS_SORT_TYPE_NUMERIC}', 'NUMERIC'],\n            ['%{BKY_LISTS_SORT_TYPE_TEXT}', 'TEXT'],\n            ['%{BKY_LISTS_SORT_TYPE_IGNORECASE}', 'IGNORE_CASE'],\n          ],\n        },\n        {\n          'type': 'field_dropdown',\n          'name': 'DIRECTION',\n          'options': [\n            ['%{BKY_LISTS_SORT_ORDER_ASCENDING}', '1'],\n            ['%{BKY_LISTS_SORT_ORDER_DESCENDING}', '-1'],\n          ],\n        },\n        {\n          'type': 'input_value',\n          'name': 'LIST',\n          'check': 'Array',\n        },\n      ],\n      'output': 'Array',\n      'style': 'list_blocks',\n      'tooltip': '%{BKY_LISTS_SORT_TOOLTIP}',\n      'helpUrl': '%{BKY_LISTS_SORT_HELPURL}',\n    });\n  },\n};\n\ntype SplitBlock = Block | (typeof blocks)['lists_split'];\n\nblocks['lists_split'] = {\n  /**\n   * Block for splitting text into a list, or joining a list into text.\n   */\n  init: function (this: SplitBlock) {\n    const dropdown = fieldRegistry.fromJson({\n      type: 'field_dropdown',\n      options: [\n        [Msg['LISTS_SPLIT_LIST_FROM_TEXT'], 'SPLIT'],\n        [Msg['LISTS_SPLIT_TEXT_FROM_LIST'], 'JOIN'],\n      ],\n    });\n    if (!dropdown) throw new Error('field_dropdown not found');\n    dropdown.setValidator((newMode) => {\n      this.updateType_(newMode);\n    });\n    this.setHelpUrl(Msg['LISTS_SPLIT_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('INPUT')\n      .setCheck('String')\n      .appendField(dropdown, 'MODE');\n    this.appendValueInput('DELIM')\n      .setCheck('String')\n      .appendField(Msg['LISTS_SPLIT_WITH_DELIMITER']);\n    this.setInputsInline(true);\n    this.setOutput(true, 'Array');\n    this.setTooltip(() => {\n      const mode = this.getFieldValue('MODE');\n      if (mode === 'SPLIT') {\n        return Msg['LISTS_SPLIT_TOOLTIP_SPLIT'];\n      } else if (mode === 'JOIN') {\n        return Msg['LISTS_SPLIT_TOOLTIP_JOIN'];\n      }\n      throw Error('Unknown mode: ' + mode);\n    });\n  },\n  /**\n   * Modify this block to have the correct input and output types.\n   *\n   * @param newMode Either 'SPLIT' or 'JOIN'.\n   */\n  updateType_: function (this: SplitBlock, newMode: string) {\n    const mode = this.getFieldValue('MODE');\n    if (mode !== newMode) {\n      const inputConnection = this.getInput('INPUT')!.connection;\n      inputConnection!.setShadowDom(null);\n      const inputBlock = inputConnection!.targetBlock();\n      // TODO(#6920): This is probably not needed; see details in bug.\n      if (inputBlock) {\n        inputConnection!.disconnect();\n        if (inputBlock.isShadow()) {\n          inputBlock.dispose(false);\n        } else {\n          this.bumpNeighbours();\n        }\n      }\n    }\n    if (newMode === 'SPLIT') {\n      this.outputConnection!.setCheck('Array');\n      this.getInput('INPUT')!.setCheck('String');\n    } else {\n      this.outputConnection!.setCheck('String');\n      this.getInput('INPUT')!.setCheck('Array');\n    }\n  },\n  /**\n   * Create XML to represent the input and output types.\n   *\n   * @returns XML storage element.\n   */\n  mutationToDom: function (this: SplitBlock): Element {\n    const container = xmlUtils.createElement('mutation');\n    container.setAttribute('mode', this.getFieldValue('MODE'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the input and output types.\n   *\n   * @param xmlElement XML storage element.\n   */\n  domToMutation: function (this: SplitBlock, xmlElement: Element) {\n    this.updateType_(xmlElement.getAttribute('mode'));\n  },\n\n  /**\n   * Returns the state of this block as a JSON serializable object.\n   * This block does not need to serialize any specific state as it is already\n   * encoded in the dropdown values, but must have an implementation to avoid\n   * the backward compatible XML mutations being serialized.\n   *\n   * @returns The state of this block.\n   */\n  saveExtraState: function (this: SplitBlock): null {\n    return null;\n  },\n\n  /**\n   * Applies the given state to this block.\n   * No extra state is needed or expected as it is already encoded in the\n   * dropdown values.\n   */\n  loadExtraState: function (this: SplitBlock) {},\n};\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks.colour\n\nimport {\n  createBlockDefinitionsFromJsonArray,\n  defineBlocks,\n} from '../core/common.js';\nimport '../core/field_colour.js';\n\n/**\n * A dictionary of the block definitions provided by this module.\n */\nexport const blocks = createBlockDefinitionsFromJsonArray([\n  // Block for colour picker.\n  {\n    'type': 'colour_picker',\n    'message0': '%1',\n    'args0': [\n      {\n        'type': 'field_colour',\n        'name': 'COLOUR',\n        'colour': '#ff0000',\n      },\n    ],\n    'output': 'Colour',\n    'helpUrl': '%{BKY_COLOUR_PICKER_HELPURL}',\n    'style': 'colour_blocks',\n    'tooltip': '%{BKY_COLOUR_PICKER_TOOLTIP}',\n    'extensions': ['parent_tooltip_when_inline'],\n  },\n\n  // Block for random colour.\n  {\n    'type': 'colour_random',\n    'message0': '%{BKY_COLOUR_RANDOM_TITLE}',\n    'output': 'Colour',\n    'helpUrl': '%{BKY_COLOUR_RANDOM_HELPURL}',\n    'style': 'colour_blocks',\n    'tooltip': '%{BKY_COLOUR_RANDOM_TOOLTIP}',\n  },\n\n  // Block for composing a colour from RGB components.\n  {\n    'type': 'colour_rgb',\n    'message0':\n      '%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'RED',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'GREEN',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'BLUE',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n    ],\n    'output': 'Colour',\n    'helpUrl': '%{BKY_COLOUR_RGB_HELPURL}',\n    'style': 'colour_blocks',\n    'tooltip': '%{BKY_COLOUR_RGB_TOOLTIP}',\n  },\n\n  // Block for blending two colours together.\n  {\n    'type': 'colour_blend',\n    'message0':\n      '%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} ' +\n      '%1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3',\n    'args0': [\n      {\n        'type': 'input_value',\n        'name': 'COLOUR1',\n        'check': 'Colour',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'COLOUR2',\n        'check': 'Colour',\n        'align': 'RIGHT',\n      },\n      {\n        'type': 'input_value',\n        'name': 'RATIO',\n        'check': 'Number',\n        'align': 'RIGHT',\n      },\n    ],\n    'output': 'Colour',\n    'helpUrl': '%{BKY_COLOUR_BLEND_HELPURL}',\n    'style': 'colour_blocks',\n    'tooltip': '%{BKY_COLOUR_BLEND_TOOLTIP}',\n  },\n]);\n\n// Register provided blocks.\ndefineBlocks(blocks);\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Former goog.module ID: Blockly.libraryBlocks\n\nimport * as colour from './colour.js';\nimport * as lists from './lists.js';\nimport * as logic from './logic.js';\nimport * as loops from './loops.js';\nimport * as math from './math.js';\nimport * as procedures from './procedures.js';\nimport * as texts from './text.js';\nimport * as variables from './variables.js';\nimport * as variablesDynamic from './variables_dynamic.js';\nimport type {BlockDefinition} from '../core/blocks.js';\n\nexport {\n  colour,\n  lists,\n  loops,\n  math,\n  procedures,\n  texts,\n  variables,\n  variablesDynamic,\n};\n\n/**\n * A dictionary of the block definitions provided by all the\n * Blockly.libraryBlocks.* modules.\n */\nexport const blocks: {[key: string]: BlockDefinition} = Object.assign(\n  {},\n  colour.blocks,\n  lists.blocks,\n  logic.blocks,\n  loops.blocks,\n  math.blocks,\n  procedures.blocks,\n  variables.blocks,\n  variablesDynamic.blocks,\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}